import{e as Re,L as Me,f as fe,g as Ye,o as d,c as u,a as s,b as o,j as qe,i as t,F as h,k as te,l as Be,t as m,p as _,w as r,d as v,m as H,r as w,I as R,n as q,M as Pe,y as x,x as C,z as se,E as ze,N as xe,A as We}from"./IgzNwamV.js";import{_ as Ke}from"./DeFhM5eI.js";import{_ as Xe}from"./BcOqzIgr.js";import{_ as Ge}from"./CQ6IkQgw.js";import{u as Je}from"./DrGAFbxs.js";const Qe={class:"space-y-5"},Ze={class:"flex items-center gap-2 -mb-1"},et={key:0,class:"text-center py-12 text-slate-500 text-sm"},tt={class:"flex items-center gap-3"},st={class:"flex-1 min-w-0"},lt={class:"text-xl font-bold truncate"},at={key:0,class:"text-sm text-slate-500 truncate"},nt={key:0,class:"flex items-center gap-3 p-3 rounded-xl bg-amber-500/10 border border-amber-500/30"},ot={class:"text-sm text-amber-300 flex-1"},it={class:"flex gap-3"},dt={class:"text-2xl font-bold text-slate-100"},rt={class:"text-2xl font-bold text-slate-100"},ut={class:"text-2xl font-bold text-slate-100"},ct={class:"text-sm font-medium text-slate-300 pt-1"},mt={class:"flex items-center justify-between"},pt={class:"space-y-0.5"},ft={class:"text-sm text-slate-200"},xt={key:0,class:"text-xs text-slate-500"},vt={class:"px-4 pt-3.5 pb-3 flex items-center justify-between"},yt={class:"text-sm font-medium text-slate-200"},_t={class:"text-[11px] text-slate-500"},gt=["disabled","onClick"],bt={key:0,class:"px-4 py-3 text-xs text-slate-600"},ht={key:1,class:"px-4 py-3 space-y-3"},wt={class:"flex items-center gap-3"},kt={class:"space-y-1"},Ct={class:"flex gap-1.5"},Dt=["onClick"],Et={class:"flex justify-end gap-2"},St={class:"grid grid-cols-7 gap-1 mb-1"},Lt={class:"grid grid-cols-7 gap-1"},At={class:"flex items-center justify-between"},It={class:"text-sm text-slate-300"},Vt={class:"text-xs text-slate-600"},Tt={class:"text-sm text-slate-300"},$t={class:"text-xs text-slate-600"},Ot={class:"flex items-center gap-3"},Ut={class:"text-sm font-medium text-slate-200"},Ft=["disabled","onClick"],Nt={class:"flex gap-3 pt-1"},jt={class:"p-4 space-y-4"},Ht={class:"space-y-2"},Rt={key:0,class:"flex flex-wrap gap-1"},Mt=["onClick"],Yt={class:"flex gap-2"},qt=["onClick"],Bt={class:"flex items-center gap-2"},Pt={class:"flex gap-2 mb-2"},zt=["onClick"],Wt={key:0,class:"flex items-center gap-2"},Kt={class:"flex items-center gap-1"},Xt={class:"w-5 text-center text-sm font-medium"},Gt={key:1,class:"flex gap-1.5"},Jt=["onClick"],Qt={key:0,class:"mt-2"},Zt={key:0,class:"mt-2 space-y-1.5"},es=["onClick"],ts={key:1,class:"text-sm text-red-400 flex items-center gap-1.5"},ss={class:"flex justify-end gap-2 pt-2"},ls={class:"p-5 space-y-4"},as={class:"flex items-start gap-3"},ns={class:"w-10 h-10 rounded-full bg-amber-500/10 flex items-center justify-center flex-shrink-0"},os={class:"space-y-1"},is={class:"font-semibold"},ds={class:"flex justify-end gap-2"},rs={class:"p-5 space-y-4"},us={class:"flex items-start gap-3"},cs={class:"w-10 h-10 rounded-full bg-amber-500/10 flex items-center justify-center flex-shrink-0"},ms={class:"space-y-1"},ps={class:"font-semibold"},fs={class:"flex justify-end gap-2"},hs=Re({__name:"[id]",setup(xs){const ve=Me(),b=We(),{impact:ye,notification:X}=Je(),i=x(null),G=x([]),S=x([]),V=x([]),B=x(!0),le=x(!1),ae=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ne=["Su","Mo","Tu","We","Th","Fr","Sa"];async function _e(){if(!b.isAvailable){B.value=!1;return}const a=ve.params.id,e=new Date().toISOString().slice(0,10),c=new Date;c.setDate(c.getDate()-89);const p=c.toISOString().slice(0,10),[f,y,k,Y]=await Promise.all([b.getHabits(),b.getCompletionsForHabit(a,p,e),b.getHabitLogsForHabit(a,p,e),b.getRemindersForHabit(a)]);if(i.value=f.find(l=>l.id===a)??null,!i.value){le.value=!0,B.value=!1;return}G.value=y,S.value=k,V.value=Y,B.value=!1}const ge=C(()=>{const a=i.value?.schedule;return!a||a.schedule_type==="DAILY"?"Daily":a.schedule_type==="WEEKLY_FLEX"?`${a.frequency_count??1}× per week`:a.schedule_type==="SPECIFIC_DAYS"?(a.days_of_week??[]).map(e=>ae[e]).join(" · ")||"No days selected":"Daily"}),oe=C(()=>new Set(G.value.map(a=>a.date))),J=new Date().toISOString().slice(0,10),be=C(()=>{const a=new Date,e=new Date(a);return e.setDate(a.getDate()-a.getDay()),e.setDate(e.getDate()-35),Array.from({length:42},(c,p)=>{const f=new Date(e);f.setDate(e.getDate()+p);const y=f.toISOString().slice(0,10);return{dateStr:y,day:f.getDate(),done:oe.value.has(y),isToday:y===J,future:y>J}})}),he=C(()=>{let a=0;const e=new Date;for(;oe.value.has(e.toISOString().slice(0,10));)a++,e.setDate(e.getDate()-1);return a}),Q=C(()=>S.value.reduce((a,e)=>a+e.value,0)),we=C(()=>{if(!S.value.length)return 0;const a=new Set(S.value.map(e=>e.date)).size;return Math.round(Q.value/a*10)/10}),ie=C(()=>[...G.value].sort((a,e)=>e.completed_at.localeCompare(a.completed_at)).slice(0,5)),de=C(()=>[...S.value].sort((a,e)=>e.logged_at.localeCompare(a.logged_at)).slice(0,10));function re(a){return new Date(a).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function ue(a){return new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}function ce(a){return new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}const P=se(new Set);async function ke(a){if(!P.has(a)){P.add(a);try{await b.deleteHabitLog(a),S.value=S.value.filter(e=>e.id!==a)}finally{P.delete(a)}}}const L=x(!1),T=x(null);fe(L,a=>{a||(T.value=null)});const n=se({name:"",description:"",type:"BOOLEAN",target_value:1,schedule_type:"DAILY",frequency_count:3,days_of_week:[],tags:[],show_due_time:!1,due_time:""}),z=x(!1),$=x(""),D=x([]),O=x(!1);function Ce(){const a=$.value.replace(/,$/,"").trim();a&&!a.startsWith("habitat-")&&!n.tags.includes(a)&&n.tags.push(a),$.value=""}function De(a){const e=n.tags.indexOf(a);e>=0&&n.tags.splice(e,1)}function Ee(a){(a.key==="Enter"||a.key===",")&&(a.preventDefault(),Ce())}function Se(){D.value.push({key:"",value:""})}function Le(a){D.value.splice(a,1)}function Ae(){return n.type==="NUMERIC"&&(n.schedule_type==="SPECIFIC_DAYS"||n.schedule_type==="WEEKLY_FLEX"&&n.frequency_count>1)?"Metric habits can only be daily or 1× per week.":n.type==="LIMIT"&&n.schedule_type!=="DAILY"?"Limit habits must be daily.":null}fe([()=>n.type,()=>n.schedule_type,()=>n.frequency_count],()=>{T.value=null});function Ie(a){const e=n.days_of_week.indexOf(a);e>=0?n.days_of_week.splice(e,1):(n.days_of_week.push(a),n.days_of_week.sort((c,p)=>c-p))}function me(){if(!i.value)return;const a=i.value.schedule;n.name=i.value.name,n.description=i.value.description,n.type=i.value.type,n.target_value=i.value.target_value,n.schedule_type=a?.schedule_type??"DAILY",n.frequency_count=a?.frequency_count??3,n.days_of_week=a?.days_of_week?[...a.days_of_week]:[],n.tags=[...i.value.tags],n.show_due_time=!!a?.due_time,n.due_time=a?.due_time??"",$.value="",D.value=Object.entries(i.value.annotations).map(([e,c])=>({key:e,value:c})),O.value=D.value.length>0,L.value=!0}async function Ve(){if(!i.value||!n.name.trim())return;const a=Ae();if(a){T.value=a;return}T.value=null,z.value=!0;try{const e={};for(const{key:f,value:y}of D.value)f.trim()&&(e[f.trim()]=y);const c=await b.updateHabit({id:i.value.id,name:n.name.trim(),description:n.description.trim(),type:n.type,target_value:n.target_value,tags:[...n.tags],annotations:e}),p=c.schedule;if(p){const f=await b.updateHabitSchedule({id:p.id,schedule_type:n.schedule_type,frequency_count:n.schedule_type==="WEEKLY_FLEX"?n.frequency_count:null,days_of_week:n.schedule_type==="SPECIFIC_DAYS"?[...n.days_of_week]:null,due_time:n.show_due_time&&n.due_time?n.due_time:null});i.value={...c,schedule:f}}else i.value=c;L.value=!1,await X("success")}finally{z.value=!1}}const U=x(!1),F=x(""),N=x(!1),Z=new Date;Z.setDate(Z.getDate()+1);const Te=Z.toISOString().slice(0,10),pe=C(()=>{const a=i.value?.paused_until;return a!=null&&a>=J});async function $e(){if(!(!i.value||!F.value)){N.value=!0;try{i.value=await b.pauseHabit(i.value.id,F.value),U.value=!1,await X("success")}finally{N.value=!1}}}async function Oe(){if(i.value){N.value=!0;try{i.value=await b.pauseHabit(i.value.id,null),await ye("medium")}finally{N.value=!1}}}const M=x(!1),ee=x(!1);async function Ue(){if(i.value){ee.value=!0;try{await b.archiveHabit(i.value.id),await X("success"),await ze("/habits")}finally{ee.value=!1}}}const A=x(!1),I=x(""),E=x([]),W=x(!1),K=se(new Set);function Fe(a){return!a.days_active||a.days_active.length===0?"Every day":a.days_active.map(e=>ae[e]).join(", ")}function Ne(a){const e=E.value.indexOf(a);e>=0?E.value.splice(e,1):(E.value.push(a),E.value.sort((c,p)=>c-p))}async function je(){if(!(!i.value||!I.value)){W.value=!0;try{const a=await b.createReminder(i.value.id,I.value,E.value.length?[...E.value]:null);V.value.push(a),I.value="",E.value=[],A.value=!1,xe().scheduleAll().catch(console.error)}finally{W.value=!1}}}async function He(a){if(!K.has(a)){K.add(a);try{await b.deleteReminder(a),V.value=V.value.filter(e=>e.id!==a),xe().scheduleAll().catch(console.error)}finally{K.delete(a)}}}return Ye(_e),(a,e)=>{const c=qe,p=Be,f=Ke,y=Xe,k=Ge,Y=Pe;return d(),u("div",Qe,[s("div",Ze,[o(c,{icon:"i-heroicons-arrow-left",variant:"ghost",color:"neutral",size:"sm",to:"/habits"}),e[21]||(e[21]=s("span",{class:"text-sm text-slate-500"},"Habits",-1))]),t(le)?(d(),u("div",et," Habit not found. ")):!t(B)&&t(i)?(d(),u(h,{key:1},[s("div",tt,[s("div",{class:"w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0",style:te({backgroundColor:t(i).color+"33"})},[o(p,{name:t(i).icon,class:"w-6 h-6",style:te({color:t(i).color})},null,8,["name","style"])],4),s("div",st,[s("h2",lt,m(t(i).name),1),t(i).description?(d(),u("p",at,m(t(i).description),1)):_("",!0)])]),t(pe)?(d(),u("div",nt,[o(p,{name:"i-heroicons-pause-circle",class:"w-5 h-5 text-amber-400 flex-shrink-0"}),s("p",ot," Paused until "+m(ce(t(i).paused_until)),1),o(c,{size:"xs",color:"warning",variant:"soft",loading:t(N),onClick:Oe},{default:r(()=>[...e[22]||(e[22]=[v(" Resume ",-1)])]),_:1},8,["loading"])])):_("",!0),s("div",it,[t(i).type==="BOOLEAN"?(d(),H(f,{key:0,ui:{root:"rounded-2xl flex-1",body:"p-3 sm:p-3 space-y-0.5"}},{default:r(()=>[e[24]||(e[24]=s("p",{class:"text-[11px] text-slate-500"},"Current streak",-1)),s("p",dt,[v(m(t(he))+" ",1),e[23]||(e[23]=s("span",{class:"text-sm font-normal text-slate-500"},"days",-1))])]),_:1})):(d(),u(h,{key:1},[o(f,{ui:{root:"rounded-2xl flex-1",body:"p-3 sm:p-3 space-y-0.5"}},{default:r(()=>[e[25]||(e[25]=s("p",{class:"text-[11px] text-slate-500"},"Total logged",-1)),s("p",rt,m(t(Q).toFixed(t(Q)%1===0?0:1)),1)]),_:1}),o(f,{ui:{root:"rounded-2xl flex-1",body:"p-3 sm:p-3 space-y-0.5"}},{default:r(()=>[e[26]||(e[26]=s("p",{class:"text-[11px] text-slate-500"},"Avg / day",-1)),s("p",ut,m(t(we)),1)]),_:1})],64)),o(f,{ui:{root:"rounded-2xl flex-1",body:"p-3 sm:p-3 space-y-0.5"}},{default:r(()=>[e[27]||(e[27]=s("p",{class:"text-[11px] text-slate-500"},"Tracked since",-1)),s("p",ct,m(ce(t(i).created_at)),1)]),_:1})]),o(f,{ui:{root:"rounded-2xl",body:"p-4 sm:p-4"}},{default:r(()=>[s("div",mt,[s("div",pt,[e[28]||(e[28]=s("p",{class:"text-xs font-semibold text-slate-400"},"Schedule",-1)),s("p",ft,m(t(ge)),1),t(i).schedule?.due_time?(d(),u("p",xt," Due at "+m(t(i).schedule.due_time),1)):_("",!0)]),o(c,{size:"xs",variant:"ghost",color:"neutral",onClick:me},{default:r(()=>[...e[29]||(e[29]=[v("Edit",-1)])]),_:1})])]),_:1}),o(f,{ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:r(()=>[s("div",vt,[e[30]||(e[30]=s("p",{class:"text-xs font-semibold text-slate-400"},"Reminders",-1)),o(c,{size:"sm",variant:"ghost",color:"neutral",icon:t(A)?"i-heroicons-chevron-up":"i-heroicons-plus",onClick:e[0]||(e[0]=l=>A.value=!t(A))},null,8,["icon"])]),(d(!0),u(h,null,w(t(V),l=>(d(),u("div",{key:l.id,class:"flex items-center justify-between px-4 py-2.5"},[s("div",null,[s("p",yt,m(l.trigger_time),1),s("p",_t,m(Fe(l)),1)]),s("button",{class:"p-2 -m-2 text-slate-700 hover:text-red-400 transition-colors",disabled:t(K).has(l.id),onClick:g=>He(l.id)},[o(p,{name:"i-heroicons-trash",class:"w-4 h-4"})],8,gt)]))),128)),t(V).length===0&&!t(A)?(d(),u("div",bt," No reminders set. ")):_("",!0),t(A)?(d(),u("div",ht,[s("div",wt,[o(y,{modelValue:t(I),"onUpdate:modelValue":e[1]||(e[1]=l=>R(I)?I.value=l:null),type:"time",class:"w-32"},null,8,["modelValue"]),e[31]||(e[31]=s("span",{class:"text-xs text-slate-500"},"Remind me at this time",-1))]),s("div",kt,[e[32]||(e[32]=s("p",{class:"text-[11px] text-slate-500"},"Days (leave blank for every day)",-1)),s("div",Ct,[(d(),u(h,null,w(ne,(l,g)=>s("button",{key:g,class:q(["w-8 h-8 rounded-full text-xs font-medium border transition-colors",t(E).includes(g)?"bg-primary-500/20 border-primary-500 text-primary-300":"border-slate-700 text-slate-500 hover:border-slate-600"]),onClick:j=>Ne(g)},m(l),11,Dt)),64))])]),s("div",Et,[o(c,{size:"xs",variant:"ghost",color:"neutral",onClick:e[2]||(e[2]=l=>A.value=!1)},{default:r(()=>[...e[33]||(e[33]=[v("Cancel",-1)])]),_:1}),o(c,{size:"xs",disabled:!t(I)||t(W),loading:t(W),onClick:je},{default:r(()=>[...e[34]||(e[34]=[v(" Add ",-1)])]),_:1},8,["disabled","loading"])])])):_("",!0)]),_:1}),t(i).type==="BOOLEAN"?(d(),H(f,{key:1,ui:{root:"rounded-2xl",body:"p-4 sm:p-4 space-y-2"}},{default:r(()=>[e[35]||(e[35]=s("p",{class:"text-xs font-semibold text-slate-400 mb-3"},"Activity",-1)),s("div",St,[(d(),u(h,null,w(["S","M","T","W","T","F","S"],l=>s("div",{key:l,class:"text-center text-[10px] text-slate-600 font-medium"},m(l),1)),64))]),s("div",Lt,[(d(!0),u(h,null,w(t(be),l=>(d(),u("div",{key:l.dateStr,class:"aspect-square flex items-center justify-center"},[s("div",{class:q(["w-7 h-7 rounded-full flex items-center justify-center text-[10px] font-medium transition-colors",{"text-white":l.done,"ring-1 ring-inset ring-primary-500 text-primary-400":l.isToday&&!l.done,"text-slate-700":!l.done&&!l.isToday&&!l.future,"text-slate-800":l.future}]),style:te(l.done?{backgroundColor:t(i).color}:{})},m(l.day),7)]))),128))])]),_:1})):_("",!0),t(pe)?_("",!0):(d(),H(f,{key:2,ui:{root:"rounded-2xl",body:"p-4 sm:p-4"}},{default:r(()=>[s("div",At,[e[37]||(e[37]=s("div",null,[s("p",{class:"text-sm font-medium text-slate-300"},"Pause habit"),s("p",{class:"text-xs text-slate-500"},"Hide from today screen until a date")],-1)),o(c,{size:"xs",variant:"soft",color:"neutral",onClick:e[3]||(e[3]=l=>U.value=!0)},{default:r(()=>[...e[36]||(e[36]=[v(" Pause ",-1)])]),_:1})])]),_:1})),t(i).type==="BOOLEAN"&&t(ie).length?(d(),H(f,{key:3,ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:r(()=>[e[38]||(e[38]=s("div",{class:"px-4 pt-3 pb-2"},[s("p",{class:"text-xs font-semibold text-slate-400"},"Log History")],-1)),(d(!0),u(h,null,w(t(ie),l=>(d(),u("div",{key:l.id,class:"flex items-center justify-between px-4 py-3"},[s("p",It,m(re(l.completed_at)),1),s("p",Vt,m(ue(l.completed_at))+" — Completed",1)]))),128))]),_:1})):_("",!0),t(i).type!=="BOOLEAN"&&t(de).length?(d(),H(f,{key:4,ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:r(()=>[e[39]||(e[39]=s("div",{class:"px-4 pt-3 pb-2"},[s("p",{class:"text-xs font-semibold text-slate-400"},"Log History")],-1)),(d(!0),u(h,null,w(t(de),l=>(d(),u("div",{key:l.id,class:"flex items-center justify-between px-4 py-3"},[s("div",null,[s("p",Tt,m(re(l.logged_at)),1),s("p",$t,m(ue(l.logged_at)),1)]),s("div",Ot,[s("span",Ut,m(l.value),1),s("button",{class:"p-2 -m-2 text-slate-700 hover:text-red-400 transition-colors",disabled:t(P).has(l.id),onClick:g=>ke(l.id)},[o(p,{name:"i-heroicons-trash",class:"w-4 h-4"})],8,Ft)])]))),128))]),_:1})):_("",!0),s("div",Nt,[o(c,{variant:"outline",color:"neutral",class:"flex-1 justify-center",onClick:me},{default:r(()=>[...e[40]||(e[40]=[v(" Edit Habit ",-1)])]),_:1}),o(c,{variant:"soft",color:"error",class:"flex-1 justify-center",onClick:e[4]||(e[4]=l=>M.value=!0)},{default:r(()=>[...e[41]||(e[41]=[v(" Archive ",-1)])]),_:1})])],64)):_("",!0),o(Y,{open:t(L),"onUpdate:open":e[15]||(e[15]=l=>R(L)?L.value=l:null)},{content:r(()=>[s("div",jt,[e[48]||(e[48]=s("h3",{class:"text-lg font-semibold"},"Edit Habit",-1)),o(k,{label:"Name",required:""},{default:r(()=>[o(y,{modelValue:t(n).name,"onUpdate:modelValue":e[5]||(e[5]=l=>t(n).name=l),autofocus:""},null,8,["modelValue"])]),_:1}),o(k,{label:"Description"},{default:r(()=>[o(y,{modelValue:t(n).description,"onUpdate:modelValue":e[6]||(e[6]=l=>t(n).description=l),placeholder:"Optional description"},null,8,["modelValue"])]),_:1}),o(k,{label:"Tags"},{default:r(()=>[s("div",Ht,[t(n).tags.length?(d(),u("div",Rt,[(d(!0),u(h,null,w(t(n).tags,l=>(d(),u("span",{key:l,class:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-800 border border-slate-700 text-xs text-slate-300"},[v(m(l)+" ",1),s("button",{class:"text-slate-500 hover:text-white leading-none",onClick:g=>De(l)},"×",8,Mt)]))),128))])):_("",!0),o(y,{modelValue:t($),"onUpdate:modelValue":e[7]||(e[7]=l=>R($)?$.value=l:null),placeholder:"Add tag, press Enter",onKeydown:Ee},null,8,["modelValue"])])]),_:1}),o(k,{label:"Type"},{default:r(()=>[s("div",Yt,[(d(),u(h,null,w(["BOOLEAN","NUMERIC","LIMIT"],l=>s("button",{key:l,class:q(["flex-1 py-1.5 px-2 rounded-lg text-xs font-medium border transition-colors",t(n).type===l?"bg-primary-500/20 border-primary-500 text-primary-300":"border-slate-700 text-slate-400 hover:border-slate-600"]),onClick:g=>t(n).type=l},m(l==="BOOLEAN"?"✓ Done":l==="NUMERIC"?"# Metric":"↓ Limit"),11,qt)),64))])]),_:1}),t(n).type!=="BOOLEAN"?(d(),H(k,{key:0,label:t(n).type==="NUMERIC"?"Target":"Limit"},{default:r(()=>[s("div",Bt,[o(y,{modelValue:t(n).target_value,"onUpdate:modelValue":e[8]||(e[8]=l=>t(n).target_value=l),modelModifiers:{number:!0},type:"number",min:"0.1",step:"any",class:"w-28"},null,8,["modelValue"]),e[42]||(e[42]=s("span",{class:"text-sm text-slate-500"},"per day",-1))])]),_:1},8,["label"])):_("",!0),o(k,{label:"Schedule"},{default:r(()=>[s("div",Pt,[(d(),u(h,null,w(["DAILY","WEEKLY_FLEX","SPECIFIC_DAYS"],l=>s("button",{key:l,class:q(["flex-1 py-1.5 px-1 rounded-lg text-xs font-medium border transition-colors",t(n).schedule_type===l?"bg-slate-700 border-slate-500 text-slate-100":"border-slate-700 text-slate-400 hover:border-slate-600"]),onClick:g=>t(n).schedule_type=l},m(l==="DAILY"?"Daily":l==="WEEKLY_FLEX"?"N× week":"Specific days"),11,zt)),64))]),t(n).schedule_type==="WEEKLY_FLEX"?(d(),u("div",Wt,[e[43]||(e[43]=s("span",{class:"text-sm text-slate-400"},"Times per week:",-1)),s("div",Kt,[s("button",{class:"w-7 h-7 rounded-lg bg-slate-800 border border-slate-700 text-slate-300 flex items-center justify-center text-sm",onClick:e[9]||(e[9]=l=>t(n).frequency_count=Math.max(1,t(n).frequency_count-1))},"−"),s("span",Xt,m(t(n).frequency_count),1),s("button",{class:"w-7 h-7 rounded-lg bg-slate-800 border border-slate-700 text-slate-300 flex items-center justify-center text-sm",onClick:e[10]||(e[10]=l=>t(n).frequency_count=Math.min(7,t(n).frequency_count+1))},"+")])])):_("",!0),t(n).schedule_type==="SPECIFIC_DAYS"?(d(),u("div",Gt,[(d(),u(h,null,w(ne,(l,g)=>s("button",{key:g,class:q(["w-8 h-8 rounded-full text-xs font-medium border transition-colors",t(n).days_of_week.includes(g)?"bg-primary-500/20 border-primary-500 text-primary-300":"border-slate-700 text-slate-500 hover:border-slate-600"]),onClick:j=>Ie(g)},m(l),11,Jt)),64))])):_("",!0)]),_:1}),s("div",null,[s("button",{class:"text-xs text-slate-500 hover:text-slate-400 flex items-center gap-1",onClick:e[11]||(e[11]=l=>t(n).show_due_time=!t(n).show_due_time)},[o(p,{name:t(n).show_due_time?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-3.5 h-3.5"},null,8,["name"]),v(" "+m(t(n).show_due_time?"Remove due time":"Add due time"),1)]),t(n).show_due_time?(d(),u("div",Qt,[o(y,{modelValue:t(n).due_time,"onUpdate:modelValue":e[12]||(e[12]=l=>t(n).due_time=l),type:"time",class:"w-32"},null,8,["modelValue"])])):_("",!0)]),s("div",null,[s("button",{class:"text-xs text-slate-500 hover:text-slate-400 flex items-center gap-1",onClick:e[13]||(e[13]=l=>O.value=!t(O))},[o(p,{name:t(O)?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-3.5 h-3.5"},null,8,["name"]),v(" "+m(t(O)?"Hide annotations":t(D).length>0?`Annotations (${t(D).length})`:"Add annotations"),1)]),t(O)?(d(),u("div",Zt,[(d(!0),u(h,null,w(t(D),(l,g)=>(d(),u("div",{key:g,class:"flex items-center gap-1.5"},[o(y,{modelValue:l.key,"onUpdate:modelValue":j=>l.key=j,placeholder:"key",class:"w-24 shrink-0"},null,8,["modelValue","onUpdate:modelValue"]),e[44]||(e[44]=s("span",{class:"text-slate-600 text-xs"},":",-1)),o(y,{modelValue:l.value,"onUpdate:modelValue":j=>l.value=j,placeholder:"value",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),s("button",{class:"text-slate-700 hover:text-red-400 transition-colors",onClick:j=>Le(g)},[o(p,{name:"i-heroicons-x-mark",class:"w-3.5 h-3.5"})],8,es)]))),128)),s("button",{class:"text-xs text-slate-500 hover:text-slate-400 flex items-center gap-1",onClick:Se},[o(p,{name:"i-heroicons-plus",class:"w-3 h-3"}),e[45]||(e[45]=v(" Add annotation ",-1))])])):_("",!0)]),t(T)?(d(),u("p",ts,[o(p,{name:"i-heroicons-exclamation-circle",class:"w-4 h-4 flex-shrink-0"}),v(" "+m(t(T)),1)])):_("",!0),s("div",ss,[o(c,{variant:"ghost",color:"neutral",onClick:e[14]||(e[14]=l=>L.value=!1)},{default:r(()=>[...e[46]||(e[46]=[v("Cancel",-1)])]),_:1}),o(c,{disabled:!t(n).name.trim()||t(z),loading:t(z),onClick:Ve},{default:r(()=>[...e[47]||(e[47]=[v(" Save ",-1)])]),_:1},8,["disabled","loading"])])])]),_:1},8,["open"]),o(Y,{open:t(U),"onUpdate:open":e[18]||(e[18]=l=>R(U)?U.value=l:null)},{content:r(()=>[s("div",ls,[s("div",as,[s("div",ns,[o(p,{name:"i-heroicons-pause-circle",class:"w-5 h-5 text-amber-400"})]),s("div",os,[s("p",is,'Pause "'+m(t(i)?.name)+'"',1),e[49]||(e[49]=s("p",{class:"text-sm text-slate-400"},"Choose when to resume. The habit will be hidden until then.",-1))])]),o(k,{label:"Resume on"},{default:r(()=>[o(y,{modelValue:t(F),"onUpdate:modelValue":e[16]||(e[16]=l=>R(F)?F.value=l:null),type:"date",min:t(Te)},null,8,["modelValue","min"])]),_:1}),s("div",ds,[o(c,{variant:"ghost",color:"neutral",onClick:e[17]||(e[17]=l=>U.value=!1)},{default:r(()=>[...e[50]||(e[50]=[v("Cancel",-1)])]),_:1}),o(c,{color:"warning",disabled:!t(F),loading:t(N),onClick:$e},{default:r(()=>[...e[51]||(e[51]=[v(" Pause ",-1)])]),_:1},8,["disabled","loading"])])])]),_:1},8,["open"]),o(Y,{open:t(M),"onUpdate:open":e[20]||(e[20]=l=>R(M)?M.value=l:null)},{content:r(()=>[s("div",rs,[s("div",us,[s("div",cs,[o(p,{name:"i-heroicons-archive-box",class:"w-5 h-5 text-amber-400"})]),s("div",ms,[s("p",ps,'Archive "'+m(t(i)?.name)+'"?',1),e[52]||(e[52]=s("p",{class:"text-sm text-slate-400"},"The habit and all its history will be preserved in your archive.",-1))])]),s("div",fs,[o(c,{variant:"ghost",color:"neutral",onClick:e[19]||(e[19]=l=>M.value=!1)},{default:r(()=>[...e[53]||(e[53]=[v("Cancel",-1)])]),_:1}),o(c,{color:"warning",loading:t(ee),onClick:Ue},{default:r(()=>[...e[54]||(e[54]=[v("Archive",-1)])]),_:1},8,["loading"])])])]),_:1},8,["open"])])}}});export{hs as default};
