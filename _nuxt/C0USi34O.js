import{x as X,O as cs,P as ps,e as Je,f as Mt,o as u,m as R,Q as Te,V as fs,R as vs,c as x,p as j,F as P,r as ue,S as ms,U as xs,W as Ot,w as _,X as _e,i as a,s as ys,Y as gs,Z as lt,$ as bs,a0 as Et,a1 as hs,a2 as Ht,a3 as ks,a4 as ws,a5 as Ss,a6 as Cs,a as t,n as Z,b as f,l as He,d as k,t as z,a7 as _t,a8 as st,a9 as _s,aa as qs,ab as Is,ac as As,y as I,L as Tt,ad as js,j as zs,k as Vs,G as Ee,q as et,H as tt,A as $s,ae as Us,z as pt}from"./CnafM-N_.js";import{L as Ms,_ as Os}from"./Dq9z1-Qo.js";import{_ as Es}from"./5U_8i3pa.js";import{_ as Hs}from"./BDKd3ECL.js";import{_ as Ts}from"./Bth3F3IT.js";import{u as Ds}from"./gpKlMiRG.js";function Bs(l){return X(()=>cs(l)?!!ps(l)?.closest("form"):!0)}var Rs=Je({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(l){const s=l,{primitiveElement:n,currentElement:i}=vs(),o=X(()=>s.checked??s.value);return Mt(o,(r,c)=>{if(!i.value)return;const g=i.value,v=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(v,"value").set;if(p&&r!==c){const m=new Event("input",{bubbles:!0}),A=new Event("change",{bubbles:!0});p.call(g,r),g.dispatchEvent(m),g.dispatchEvent(A)}}),(r,c)=>(u(),R(fs,Te({ref_key:"primitiveElement",ref:n},{...s,...r.$attrs},{as:"input"}),null,16))}}),qt=Rs,Ps=Je({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(l){const s=l,n=X(()=>typeof s.value=="object"&&Array.isArray(s.value)&&s.value.length===0&&s.required),i=X(()=>typeof s.value=="string"||typeof s.value=="number"||typeof s.value=="boolean"||s.value===null||s.value===void 0?[{name:s.name,value:s.value}]:typeof s.value=="object"&&Array.isArray(s.value)?s.value.flatMap((o,r)=>typeof o=="object"?Object.entries(o).map(([c,g])=>({name:`${s.name}[${r}][${c}]`,value:g})):{name:`${s.name}[${r}]`,value:o}):s.value!==null&&typeof s.value=="object"&&!Array.isArray(s.value)?Object.entries(s.value).map(([o,r])=>({name:`${s.name}[${o}]`,value:r})):[]);return(o,r)=>(u(),x(P,null,[j(" We render single input if it's required "),n.value?(u(),R(qt,Te({key:o.name},{...s,...o.$attrs},{name:o.name,value:o.value}),null,16,["name","value"])):(u(!0),x(P,{key:1},ue(i.value,c=>(u(),R(qt,Te({key:c.name},{ref_for:!0},{...s,...o.$attrs},{name:c.name,value:c.value}),null,16,["name","value"]))),128))],2112))}}),Fs=Ps;const[Ns,Ls]=bs("SwitchRoot");var Ws=Je({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(l,{emit:s}){const n=l,i=s,{disabled:o}=ms(n),r=xs(n,"modelValue",i,{defaultValue:n.defaultValue,passive:n.modelValue===void 0});function c(){o.value||(r.value=!r.value)}const{forwardRef:g,currentElement:v}=Ot(),b=Bs(v),p=X(()=>n.id&&v.value?document.querySelector(`[for="${n.id}"]`)?.innerText:void 0);return Ls({modelValue:r,toggleCheck:c,disabled:o}),(m,A)=>(u(),R(a(lt),Te(m.$attrs,{id:m.id,ref:a(g),role:"switch",type:m.as==="button"?"button":void 0,value:m.value,"aria-label":m.$attrs["aria-label"]||p.value,"aria-checked":a(r),"aria-required":m.required,"data-state":a(r)?"checked":"unchecked","data-disabled":a(o)?"":void 0,"as-child":m.asChild,as:m.as,disabled:a(o),onClick:c,onKeydown:ys(gs(c,["prevent"]),["enter"])}),{default:_(()=>[_e(m.$slots,"default",{modelValue:a(r)}),a(b)&&m.name?(u(),R(a(Fs),{key:0,type:"checkbox",name:m.name,disabled:a(o),required:m.required,value:m.value,checked:!!a(r)},null,8,["name","disabled","required","value","checked"])):j("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),Js=Ws,Gs=Je({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(l){const s=Ns();return Ot(),(n,i)=>(u(),R(a(lt),{"data-state":a(s).modelValue?.value?"checked":"unchecked","data-disabled":a(s).disabled.value?"":void 0,"as-child":n.asChild,as:n.as},{default:_(()=>[_e(n.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"]))}}),Qs=Gs;const Ks={slots:{root:"relative flex items-start",base:["inline-flex items-center shrink-0 rounded-full border-2 border-transparent focus-visible:outline-2 focus-visible:outline-offset-2 data-[state=unchecked]:bg-accented","transition-[background] duration-200"],container:"flex items-center",thumb:"group pointer-events-none rounded-full bg-default shadow-lg ring-0 transition-transform duration-200 data-[state=unchecked]:translate-x-0 data-[state=unchecked]:rtl:-translate-x-0 flex items-center justify-center",icon:["absolute shrink-0 group-data-[state=unchecked]:text-dimmed opacity-0 size-10/12","transition-[color,opacity] duration-200"],wrapper:"ms-2",label:"block font-medium text-default",description:"text-muted"},variants:{color:{primary:{base:"data-[state=checked]:bg-primary focus-visible:outline-primary",icon:"group-data-[state=checked]:text-primary"},secondary:{base:"data-[state=checked]:bg-secondary focus-visible:outline-secondary",icon:"group-data-[state=checked]:text-secondary"},success:{base:"data-[state=checked]:bg-success focus-visible:outline-success",icon:"group-data-[state=checked]:text-success"},info:{base:"data-[state=checked]:bg-info focus-visible:outline-info",icon:"group-data-[state=checked]:text-info"},warning:{base:"data-[state=checked]:bg-warning focus-visible:outline-warning",icon:"group-data-[state=checked]:text-warning"},error:{base:"data-[state=checked]:bg-error focus-visible:outline-error",icon:"group-data-[state=checked]:text-error"},neutral:{base:"data-[state=checked]:bg-inverted focus-visible:outline-inverted",icon:"group-data-[state=checked]:text-highlighted"}},size:{xs:{base:"w-7",container:"h-4",thumb:"size-3 data-[state=checked]:translate-x-3 data-[state=checked]:rtl:-translate-x-3",wrapper:"text-xs"},sm:{base:"w-8",container:"h-4",thumb:"size-3.5 data-[state=checked]:translate-x-3.5 data-[state=checked]:rtl:-translate-x-3.5",wrapper:"text-xs"},md:{base:"w-9",container:"h-5",thumb:"size-4 data-[state=checked]:translate-x-4 data-[state=checked]:rtl:-translate-x-4",wrapper:"text-sm"},lg:{base:"w-10",container:"h-5",thumb:"size-4.5 data-[state=checked]:translate-x-4.5 data-[state=checked]:rtl:-translate-x-4.5",wrapper:"text-sm"},xl:{base:"w-11",container:"h-6",thumb:"size-5 data-[state=checked]:translate-x-5 data-[state=checked]:rtl:-translate-x-5",wrapper:"text-base"}},checked:{true:{icon:"group-data-[state=checked]:opacity-100"}},unchecked:{true:{icon:"group-data-[state=unchecked]:opacity-100"}},loading:{true:{icon:"animate-spin"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-error"}},disabled:{true:{root:"opacity-75",base:"cursor-not-allowed",label:"cursor-not-allowed",description:"cursor-not-allowed"}}},defaultVariants:{color:"primary",size:"md"}},Ys=Object.assign({inheritAttrs:!1},{__name:"USwitch",props:_t({as:{type:null,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1},checkedIcon:{type:null,required:!1},uncheckedIcon:{type:null,required:!1},label:{type:String,required:!1},description:{type:String,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},value:{type:String,required:!1},defaultValue:{type:Boolean,required:!1}},{modelValue:{type:Boolean,default:void 0},modelModifiers:{}}),emits:_t(["change"],["update:modelValue"]),setup(l,{emit:s}){const n=l,i=Et(),o=s,r=hs(l,"modelValue",{type:Boolean,default:void 0}),c=Ht(),g=ks(ws(n,"required","value","defaultValue")),{id:v,emitFormChange:b,emitFormInput:p,size:m,color:A,name:$,disabled:D,ariaAttrs:O}=Ss(n),F=v.value??Cs(),B=X(()=>st({extend:st(Ks),...c.ui?.switch||{}})({size:m.value,color:A.value,required:n.required,loading:n.loading,disabled:D.value||n.loading}));function W(J){const H=new Event("change",{target:{value:J}});o("change",H),b(),p()}return(J,H)=>(u(),R(a(lt),{as:l.as,"data-slot":"root",class:Z(B.value.root({class:[n.ui?.root,n.class]}))},{default:_(()=>[t("div",{"data-slot":"container",class:Z(B.value.container({class:n.ui?.container}))},[f(a(Js),Te({id:a(F)},{...a(g),...J.$attrs,...a(O)},{modelValue:r.value,"onUpdate:modelValue":[H[0]||(H[0]=U=>r.value=U),W],name:a($),disabled:a(D)||l.loading,"data-slot":"base",class:B.value.base({class:n.ui?.base})}),{default:_(()=>[f(a(Qs),{"data-slot":"thumb",class:Z(B.value.thumb({class:n.ui?.thumb}))},{default:_(()=>[l.loading?(u(),R(He,{key:0,name:l.loadingIcon||a(c).ui.icons.loading,"data-slot":"icon",class:Z(B.value.icon({class:n.ui?.icon,checked:!0,unchecked:!0}))},null,8,["name","class"])):(u(),x(P,{key:1},[l.checkedIcon?(u(),R(He,{key:0,name:l.checkedIcon,"data-slot":"icon",class:Z(B.value.icon({class:n.ui?.icon,checked:!0}))},null,8,["name","class"])):j("",!0),l.uncheckedIcon?(u(),R(He,{key:1,name:l.uncheckedIcon,"data-slot":"icon",class:Z(B.value.icon({class:n.ui?.icon,unchecked:!0}))},null,8,["name","class"])):j("",!0)],64))]),_:1},8,["class"])]),_:1},16,["id","modelValue","name","disabled","class"])],2),l.label||i.label||l.description||i.description?(u(),x("div",{key:0,"data-slot":"wrapper",class:Z(B.value.wrapper({class:n.ui?.wrapper}))},[l.label||i.label?(u(),R(a(Ms),{key:0,for:a(F),"data-slot":"label",class:Z(B.value.label({class:n.ui?.label}))},{default:_(()=>[_e(J.$slots,"label",{label:l.label},()=>[k(z(l.label),1)])]),_:3},8,["for","class"])):j("",!0),l.description||i.description?(u(),x("p",{key:1,"data-slot":"description",class:Z(B.value.description({class:n.ui?.description}))},[_e(J.$slots,"description",{description:l.description},()=>[k(z(l.description),1)])],2)):j("",!0)],2)):j("",!0)]),_:3},8,["as","class"]))}}),Zs={slots:{base:"font-medium inline-flex items-center",label:"truncate",leadingIcon:"shrink-0",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailingIcon:"shrink-0"},variants:{fieldGroup:{horizontal:"not-only:first:rounded-e-none not-only:last:rounded-s-none not-last:not-first:rounded-none focus-visible:z-[1]",vertical:"not-only:first:rounded-b-none not-only:last:rounded-t-none not-last:not-first:rounded-none focus-visible:z-[1]"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},variant:{solid:"",outline:"",soft:"",subtle:""},size:{xs:{base:"text-[8px]/3 px-1 py-0.5 gap-1 rounded-sm",leadingIcon:"size-3",leadingAvatarSize:"3xs",trailingIcon:"size-3"},sm:{base:"text-[10px]/3 px-1.5 py-1 gap-1 rounded-sm",leadingIcon:"size-3",leadingAvatarSize:"3xs",trailingIcon:"size-3"},md:{base:"text-xs px-2 py-1 gap-1 rounded-md",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},lg:{base:"text-sm px-2 py-1 gap-1.5 rounded-md",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"text-base px-2.5 py-1 gap-1.5 rounded-md",leadingIcon:"size-6",leadingAvatarSize:"2xs",trailingIcon:"size-6"}},square:{true:""}},compoundVariants:[{color:"primary",variant:"solid",class:"bg-primary text-inverted"},{color:"secondary",variant:"solid",class:"bg-secondary text-inverted"},{color:"success",variant:"solid",class:"bg-success text-inverted"},{color:"info",variant:"solid",class:"bg-info text-inverted"},{color:"warning",variant:"solid",class:"bg-warning text-inverted"},{color:"error",variant:"solid",class:"bg-error text-inverted"},{color:"primary",variant:"outline",class:"text-primary ring ring-inset ring-primary/50"},{color:"secondary",variant:"outline",class:"text-secondary ring ring-inset ring-secondary/50"},{color:"success",variant:"outline",class:"text-success ring ring-inset ring-success/50"},{color:"info",variant:"outline",class:"text-info ring ring-inset ring-info/50"},{color:"warning",variant:"outline",class:"text-warning ring ring-inset ring-warning/50"},{color:"error",variant:"outline",class:"text-error ring ring-inset ring-error/50"},{color:"primary",variant:"soft",class:"bg-primary/10 text-primary"},{color:"secondary",variant:"soft",class:"bg-secondary/10 text-secondary"},{color:"success",variant:"soft",class:"bg-success/10 text-success"},{color:"info",variant:"soft",class:"bg-info/10 text-info"},{color:"warning",variant:"soft",class:"bg-warning/10 text-warning"},{color:"error",variant:"soft",class:"bg-error/10 text-error"},{color:"primary",variant:"subtle",class:"bg-primary/10 text-primary ring ring-inset ring-primary/25"},{color:"secondary",variant:"subtle",class:"bg-secondary/10 text-secondary ring ring-inset ring-secondary/25"},{color:"success",variant:"subtle",class:"bg-success/10 text-success ring ring-inset ring-success/25"},{color:"info",variant:"subtle",class:"bg-info/10 text-info ring ring-inset ring-info/25"},{color:"warning",variant:"subtle",class:"bg-warning/10 text-warning ring ring-inset ring-warning/25"},{color:"error",variant:"subtle",class:"bg-error/10 text-error ring ring-inset ring-error/25"},{color:"neutral",variant:"solid",class:"text-inverted bg-inverted"},{color:"neutral",variant:"outline",class:"ring ring-inset ring-accented text-default bg-default"},{color:"neutral",variant:"soft",class:"text-default bg-elevated"},{color:"neutral",variant:"subtle",class:"ring ring-inset ring-accented text-default bg-elevated"},{size:"xs",square:!0,class:"p-0.5"},{size:"sm",square:!0,class:"p-1"},{size:"md",square:!0,class:"p-1"},{size:"lg",square:!0,class:"p-1"},{size:"xl",square:!0,class:"p-1"}],defaultVariants:{color:"primary",variant:"solid",size:"md"}},Xs={__name:"UBadge",props:{as:{type:null,required:!1,default:"span"},label:{type:[String,Number],required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},square:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:null,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:null,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:null,required:!1}},setup(l){const s=l,n=Et(),i=Ht(),{orientation:o,size:r}=_s(s),{isLeading:c,isTrailing:g,leadingIconName:v,trailingIconName:b}=qs(s),p=X(()=>st({extend:st(Zs),...i.ui?.badge||{}})({color:s.color,variant:s.variant,size:r.value||s.size,square:s.square||!n.default&&!s.label,fieldGroup:o.value}));return(m,A)=>(u(),R(a(lt),{as:l.as,"data-slot":"base",class:Z(p.value.base({class:[s.ui?.base,s.class]}))},{default:_(()=>[_e(m.$slots,"leading",{ui:p.value},()=>[a(c)&&a(v)?(u(),R(He,{key:0,name:a(v),"data-slot":"leadingIcon",class:Z(p.value.leadingIcon({class:s.ui?.leadingIcon}))},null,8,["name","class"])):l.avatar?(u(),R(Is,Te({key:1,size:s.ui?.leadingAvatarSize||p.value.leadingAvatarSize()},l.avatar,{"data-slot":"leadingAvatar",class:p.value.leadingAvatar({class:s.ui?.leadingAvatar})}),null,16,["size","class"])):j("",!0)]),_e(m.$slots,"default",{ui:p.value},()=>[l.label!==void 0&&l.label!==null?(u(),x("span",{key:0,"data-slot":"label",class:Z(p.value.label({class:s.ui?.label}))},z(l.label),3)):j("",!0)]),_e(m.$slots,"trailing",{ui:p.value},()=>[a(g)&&a(b)?(u(),R(He,{key:0,name:a(b),"data-slot":"trailingIcon",class:Z(p.value.trailingIcon({class:s.ui?.trailingIcon}))},null,8,["name","class"])):j("",!0)])]),_:3},8,["as","class"]))}};var ee=Uint8Array,oe=Uint16Array,gt=Int32Array,bt=new ee([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ht=new ee([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),It=new ee([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Dt=function(l,s){for(var n=new oe(31),i=0;i<31;++i)n[i]=s+=1<<l[i-1];for(var o=new gt(n[30]),i=1;i<30;++i)for(var r=n[i];r<n[i+1];++r)o[r]=r-n[i]<<5|i;return{b:n,r:o}},Bt=Dt(bt,2),ea=Bt.b,vt=Bt.r;ea[28]=258,vt[258]=28;var ta=Dt(ht,0),At=ta.r,mt=new oe(32768);for(var T=0;T<32768;++T){var we=(T&43690)>>1|(T&21845)<<1;we=(we&52428)>>2|(we&13107)<<2,we=(we&61680)>>4|(we&3855)<<4,mt[T]=((we&65280)>>8|(we&255)<<8)>>1}var We=(function(l,s,n){for(var i=l.length,o=0,r=new oe(s);o<i;++o)l[o]&&++r[l[o]-1];var c=new oe(s);for(o=1;o<s;++o)c[o]=c[o-1]+r[o-1]<<1;var g;if(n){g=new oe(1<<s);var v=15-s;for(o=0;o<i;++o)if(l[o])for(var b=o<<4|l[o],p=s-l[o],m=c[l[o]-1]++<<p,A=m|(1<<p)-1;m<=A;++m)g[mt[m]>>v]=b}else for(g=new oe(i),o=0;o<i;++o)l[o]&&(g[o]=mt[c[l[o]-1]++]>>15-l[o]);return g}),qe=new ee(288);for(var T=0;T<144;++T)qe[T]=8;for(var T=144;T<256;++T)qe[T]=9;for(var T=256;T<280;++T)qe[T]=7;for(var T=280;T<288;++T)qe[T]=8;var at=new ee(32);for(var T=0;T<32;++T)at[T]=5;var sa=We(qe,9,0),aa=We(at,5,0),Rt=function(l){return(l+7)/8|0},Pt=function(l,s,n){return(n==null||n>l.length)&&(n=l.length),new ee(l.subarray(s,n))},la=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],nt=function(l,s,n){var i=new Error(s||la[l]);if(i.code=l,Error.captureStackTrace&&Error.captureStackTrace(i,nt),!n)throw i;return i},ve=function(l,s,n){n<<=s&7;var i=s/8|0;l[i]|=n,l[i+1]|=n>>8},Ne=function(l,s,n){n<<=s&7;var i=s/8|0;l[i]|=n,l[i+1]|=n>>8,l[i+2]|=n>>16},ft=function(l,s){for(var n=[],i=0;i<l.length;++i)l[i]&&n.push({s:i,f:l[i]});var o=n.length,r=n.slice();if(!o)return{t:Nt,l:0};if(o==1){var c=new ee(n[0].s+1);return c[n[0].s]=1,{t:c,l:1}}n.sort(function(U,K){return U.f-K.f}),n.push({s:-1,f:25001});var g=n[0],v=n[1],b=0,p=1,m=2;for(n[0]={s:-1,f:g.f+v.f,l:g,r:v};p!=o-1;)g=n[n[b].f<n[m].f?b++:m++],v=n[b!=p&&n[b].f<n[m].f?b++:m++],n[p++]={s:-1,f:g.f+v.f,l:g,r:v};for(var A=r[0].s,i=1;i<o;++i)r[i].s>A&&(A=r[i].s);var $=new oe(A+1),D=xt(n[p-1],$,0);if(D>s){var i=0,O=0,F=D-s,B=1<<F;for(r.sort(function(K,V){return $[V.s]-$[K.s]||K.f-V.f});i<o;++i){var W=r[i].s;if($[W]>s)O+=B-(1<<D-$[W]),$[W]=s;else break}for(O>>=F;O>0;){var J=r[i].s;$[J]<s?O-=1<<s-$[J]++-1:++i}for(;i>=0&&O;--i){var H=r[i].s;$[H]==s&&(--$[H],++O)}D=s}return{t:new ee($),l:D}},xt=function(l,s,n){return l.s==-1?Math.max(xt(l.l,s,n+1),xt(l.r,s,n+1)):s[l.s]=n},jt=function(l){for(var s=l.length;s&&!l[--s];);for(var n=new oe(++s),i=0,o=l[0],r=1,c=function(v){n[i++]=v},g=1;g<=s;++g)if(l[g]==o&&g!=s)++r;else{if(!o&&r>2){for(;r>138;r-=138)c(32754);r>2&&(c(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(c(o),--r;r>6;r-=6)c(8304);r>2&&(c(r-3<<5|8208),r=0)}for(;r--;)c(o);r=1,o=l[g]}return{c:n.subarray(0,i),n:s}},Le=function(l,s){for(var n=0,i=0;i<s.length;++i)n+=l[i]*s[i];return n},Ft=function(l,s,n){var i=n.length,o=Rt(s+2);l[o]=i&255,l[o+1]=i>>8,l[o+2]=l[o]^255,l[o+3]=l[o+1]^255;for(var r=0;r<i;++r)l[o+r+4]=n[r];return(o+4+i)*8},zt=function(l,s,n,i,o,r,c,g,v,b,p){ve(s,p++,n),++o[256];for(var m=ft(o,15),A=m.t,$=m.l,D=ft(r,15),O=D.t,F=D.l,B=jt(A),W=B.c,J=B.n,H=jt(O),U=H.c,K=H.n,V=new oe(19),w=0;w<W.length;++w)++V[W[w]&31];for(var w=0;w<U.length;++w)++V[U[w]&31];for(var S=ft(V,7),te=S.t,me=S.l,se=19;se>4&&!te[It[se-1]];--se);var xe=b+5<<3,ne=Le(o,qe)+Le(r,at)+c,ie=Le(o,A)+Le(r,O)+c+14+3*se+Le(V,te)+2*V[16]+3*V[17]+7*V[18];if(v>=0&&xe<=ne&&xe<=ie)return Ft(s,p,l.subarray(v,v+b));var ae,N,le,ce;if(ve(s,p,1+(ie<ne)),p+=2,ie<ne){ae=We(A,$,0),N=A,le=We(O,F,0),ce=O;var Ie=We(te,me,0);ve(s,p,J-257),ve(s,p+5,K-1),ve(s,p+10,se-4),p+=14;for(var w=0;w<se;++w)ve(s,p+3*w,te[It[w]]);p+=3*se;for(var re=[W,U],de=0;de<2;++de)for(var pe=re[de],w=0;w<pe.length;++w){var M=pe[w]&31;ve(s,p,Ie[M]),p+=te[M],M>15&&(ve(s,p,pe[w]>>5&127),p+=pe[w]>>12)}}else ae=sa,N=qe,le=aa,ce=at;for(var w=0;w<g;++w){var G=i[w];if(G>255){var M=G>>18&31;Ne(s,p,ae[M+257]),p+=N[M+257],M>7&&(ve(s,p,G>>23&31),p+=bt[M]);var ye=G&31;Ne(s,p,le[ye]),p+=ce[ye],ye>3&&(Ne(s,p,G>>5&8191),p+=ht[ye])}else Ne(s,p,ae[G]),p+=N[G]}return Ne(s,p,ae[256]),p+N[256]},na=new gt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Nt=new ee(0),ia=function(l,s,n,i,o,r){var c=r.z||l.length,g=new ee(i+c+5*(1+Math.ceil(c/7e3))+o),v=g.subarray(i,g.length-o),b=r.l,p=(r.r||0)&7;if(s){p&&(v[0]=r.r>>3);for(var m=na[s-1],A=m>>13,$=m&8191,D=(1<<n)-1,O=r.p||new oe(32768),F=r.h||new oe(D+1),B=Math.ceil(n/3),W=2*B,J=function(Be){return(l[Be]^l[Be+1]<<B^l[Be+2]<<W)&D},H=new gt(25e3),U=new oe(288),K=new oe(32),V=0,w=0,S=r.i||0,te=0,me=r.w||0,se=0;S+2<c;++S){var xe=J(S),ne=S&32767,ie=F[xe];if(O[ne]=ie,F[xe]=ne,me<=S){var ae=c-S;if((V>7e3||te>24576)&&(ae>423||!b)){p=zt(l,v,0,H,U,K,w,te,se,S-se,p),te=V=w=0,se=S;for(var N=0;N<286;++N)U[N]=0;for(var N=0;N<30;++N)K[N]=0}var le=2,ce=0,Ie=$,re=ne-ie&32767;if(ae>2&&xe==J(S-re))for(var de=Math.min(A,ae)-1,pe=Math.min(32767,S),M=Math.min(258,ae);re<=pe&&--Ie&&ne!=ie;){if(l[S+le]==l[S+le-re]){for(var G=0;G<M&&l[S+G]==l[S+G-re];++G);if(G>le){if(le=G,ce=re,G>de)break;for(var ye=Math.min(re,G-2),Ge=0,N=0;N<ye;++N){var De=S-re+N&32767,ge=O[De],Ae=De-ge&32767;Ae>Ge&&(Ge=Ae,ie=De)}}}ne=ie,ie=O[ne],re+=ne-ie&32767}if(ce){H[te++]=268435456|vt[le]<<18|At[ce];var L=vt[le]&31,Qe=At[ce]&31;w+=bt[L]+ht[Qe],++U[257+L],++K[Qe],me=S+le,++V}else H[te++]=l[S],++U[l[S]]}}for(S=Math.max(S,me);S<c;++S)H[te++]=l[S],++U[l[S]];p=zt(l,v,b,H,U,K,w,te,se,S-se,p),b||(r.r=p&7|v[p/8|0]<<3,p-=7,r.h=F,r.p=O,r.i=S,r.w=me)}else{for(var S=r.w||0;S<c+b;S+=65535){var je=S+65535;je>=c&&(v[p/8|0]=b,je=c),p=Ft(v,p+1,l.subarray(S,je))}r.i=c}return Pt(g,0,i+Rt(p)+o)},oa=(function(){for(var l=new Int32Array(256),s=0;s<256;++s){for(var n=s,i=9;--i;)n=(n&1&&-306674912)^n>>>1;l[s]=n}return l})(),ra=function(){var l=-1;return{p:function(s){for(var n=l,i=0;i<s.length;++i)n=oa[n&255^s[i]]^n>>>8;l=n},d:function(){return~l}}},da=function(l,s,n,i,o){if(!o&&(o={l:1},s.dictionary)){var r=s.dictionary.subarray(-32768),c=new ee(r.length+l.length);c.set(r),c.set(l,r.length),l=c,o.w=r.length}return ia(l,s.level==null?6:s.level,s.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(l.length)))*1.5):20:12+s.mem,n,i,o)},Lt=function(l,s){var n={};for(var i in l)n[i]=l[i];for(var i in s)n[i]=s[i];return n},Y=function(l,s,n){for(;n;++s)l[s]=n,n>>>=8};function ua(l,s){return da(l,s||{},0,0)}var Wt=function(l,s,n,i){for(var o in l){var r=l[o],c=s+o,g=i;Array.isArray(r)&&(g=Lt(i,r[1]),r=r[0]),r instanceof ee?n[c]=[r,g]:(n[c+="/"]=[new ee(0),g],Wt(r,c,n,i))}},Vt=typeof TextEncoder<"u"&&new TextEncoder,ca=typeof TextDecoder<"u"&&new TextDecoder,pa=0;try{ca.decode(Nt,{stream:!0}),pa=1}catch{}function $t(l,s){var n;if(Vt)return Vt.encode(l);for(var i=l.length,o=new ee(l.length+(l.length>>1)),r=0,c=function(b){o[r++]=b},n=0;n<i;++n){if(r+5>o.length){var g=new ee(r+8+(i-n<<1));g.set(o),o=g}var v=l.charCodeAt(n);v<128||s?c(v):v<2048?(c(192|v>>6),c(128|v&63)):v>55295&&v<57344?(v=65536+(v&1047552)|l.charCodeAt(++n)&1023,c(240|v>>18),c(128|v>>12&63),c(128|v>>6&63),c(128|v&63)):(c(224|v>>12),c(128|v>>6&63),c(128|v&63))}return Pt(o,0,r)}var yt=function(l){var s=0;if(l)for(var n in l){var i=l[n].length;i>65535&&nt(9),s+=i+4}return s},Ut=function(l,s,n,i,o,r,c,g){var v=i.length,b=n.extra,p=g&&g.length,m=yt(b);Y(l,s,c!=null?33639248:67324752),s+=4,c!=null&&(l[s++]=20,l[s++]=n.os),l[s]=20,s+=2,l[s++]=n.flag<<1|(r<0&&8),l[s++]=o&&8,l[s++]=n.compression&255,l[s++]=n.compression>>8;var A=new Date(n.mtime==null?Date.now():n.mtime),$=A.getFullYear()-1980;if(($<0||$>119)&&nt(10),Y(l,s,$<<25|A.getMonth()+1<<21|A.getDate()<<16|A.getHours()<<11|A.getMinutes()<<5|A.getSeconds()>>1),s+=4,r!=-1&&(Y(l,s,n.crc),Y(l,s+4,r<0?-r-2:r),Y(l,s+8,n.size)),Y(l,s+12,v),Y(l,s+14,m),s+=16,c!=null&&(Y(l,s,p),Y(l,s+6,n.attrs),Y(l,s+10,c),s+=14),l.set(i,s),s+=v,m)for(var D in b){var O=b[D],F=O.length;Y(l,s,+D),Y(l,s+2,F),l.set(O,s+4),s+=4+F}return p&&(l.set(g,s),s+=p),s},fa=function(l,s,n,i,o){Y(l,s,101010256),Y(l,s+8,n),Y(l,s+10,n),Y(l,s+12,i),Y(l,s+16,o)};function va(l,s){s||(s={});var n={},i=[];Wt(l,"",n,s);var o=0,r=0;for(var c in n){var g=n[c],v=g[0],b=g[1],p=b.level==0?0:8,m=$t(c),A=m.length,$=b.comment,D=$&&$t($),O=D&&D.length,F=yt(b.extra);A>65535&&nt(11);var B=p?ua(v,b):v,W=B.length,J=ra();J.p(v),i.push(Lt(b,{size:v.length,crc:J.d(),c:B,f:m,m:D,u:A!=c.length||D&&$.length!=O,o,compression:p})),o+=30+A+F+W,r+=76+2*(A+F)+(O||0)+W}for(var H=new ee(r+22),U=o,K=r-o,V=0;V<i.length;++V){var m=i[V];Ut(H,m.o,m,m.f,m.u,m.c.length);var w=30+m.f.length+yt(m.extra);H.set(m.c,m.o+w),Ut(H,o,m,m.f,m.u,m.c.length,m.o,m.m),o+=16+w+(m.m?m.m.length:0)}return fa(H,o,i.length,K,U),H}function ma(){const l=As("install-prompt",()=>null),s=X(()=>Tt.isNativePlatform()||typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches),n=X(()=>!s.value&&l.value!==null),i=X(()=>{if(typeof navigator>"u")return!1;const v=navigator.userAgent,b=/iphone|ipad|ipod/i.test(v),p=/safari/i.test(v)&&!/chrome|crios|fxios|edgios|edg\//i.test(v);return b&&p&&!s.value}),o=X(()=>{if(typeof navigator>"u"||s.value||i.value)return!1;const v=navigator.userAgent;return/iphone|ipad|ipod/i.test(v)?!1:!(/chrome|chromium|crios/i.test(v)&&!/edge\/[0-9]/i.test(v)||/edg\//i.test(v)||/opr\//i.test(v))}),r=X(()=>!s.value&&!n.value&&!i.value&&!o.value),c=I(!1);async function g(){if(l.value){c.value=!0;try{await l.value.prompt();const{outcome:v}=await l.value.userChoice;v==="accepted"&&(l.value=null)}finally{c.value=!1}}}return{isInstalled:s,canInstall:n,isIosSafari:i,isUnsupportedBrowser:o,isChromiumNoPrompt:r,installing:c,install:g}}const xa={class:"space-y-6"},ya={class:"space-y-2"},ga={class:"flex items-center justify-between px-4 py-3.5"},ba={class:"flex items-center justify-between px-4 py-3.5"},ha={class:"flex items-center justify-between px-4 py-3.5"},ka={class:"flex items-center justify-between px-4 py-3"},wa={class:"flex items-center justify-between px-4 py-3"},Sa={key:0,class:"flex items-center justify-between px-4 pb-3"},Ca={class:"flex items-center gap-2"},_a={class:"w-4 text-center text-sm font-medium tabular-nums"},qa={class:"flex items-center justify-between px-4 py-3"},Ia={class:"flex items-center justify-between px-4 py-3"},Aa={class:"flex items-center justify-between px-4 py-3"},ja={class:"flex items-center justify-between px-4 py-3"},za={class:"px-4 py-3 pb-4 space-y-2"},Va={class:"flex gap-2"},$a={class:"space-y-2"},Ua={class:"flex items-center justify-between px-4 py-3.5"},Ma={class:"flex items-center justify-between px-4 py-3.5"},Oa={key:0,class:"flex items-center justify-between px-4 py-3.5"},Ea={class:"flex items-center justify-between px-4 py-3.5"},Ha={class:"space-y-0.5"},Ta={class:"text-xs"},Da={key:0,class:"text-amber-400"},Ba={key:0,class:"text-green-400"},Ra={key:1,class:"text-red-400"},Pa={key:2,class:"text-slate-500"},Fa={class:"shrink-0"},Na={key:1,class:"w-2 h-2 rounded-full bg-green-400 mx-2"},La={key:1,class:"flex items-center justify-between px-4 py-3.5"},Wa={class:"space-y-0.5"},Ja={class:"text-xs text-green-400"},Ga={key:2,class:"flex items-center justify-between px-4 py-3.5"},Qa={class:"space-y-2"},Ka={class:"flex items-center justify-between px-4 py-3.5"},Ya={class:"flex items-center justify-between px-4 py-3.5"},Za={class:"flex items-center justify-between px-4 py-3.5"},Xa={class:"flex items-center justify-between px-4 py-3.5"},el={class:"space-y-2"},tl={class:"flex items-center justify-between px-4 py-3.5"},sl={class:"text-sm font-mono font-medium"},al={class:"flex items-center justify-between px-4 py-3.5"},ll={class:"text-sm font-mono text-slate-300"},nl={key:0,class:"flex items-center justify-between px-4 py-3.5"},il={class:"flex items-center justify-between px-4 py-3.5"},ol={class:"flex items-center justify-between px-4 py-3.5"},rl={class:"text-sm font-mono text-slate-300"},dl={class:"flex items-center gap-2 shrink-0"},ul={key:0,class:"border-t border-slate-800 px-4 py-3 space-y-2"},cl={key:0,class:"flex items-center gap-2 text-xs text-slate-500"},pl={class:"flex items-center gap-2 mb-3"},fl={class:"font-mono text-xs text-slate-200"},vl=["onClick"],ml={class:"text-xs font-mono text-slate-300"},xl={key:0,class:"text-[10px] leading-relaxed font-mono text-slate-400 bg-slate-950 px-3 py-2 overflow-x-auto border-t border-slate-800"},yl=["onClick"],gl={class:"min-w-0 text-left"},bl={class:"text-xs font-mono text-slate-400"},hl={class:"text-[10px] text-slate-600 ml-2"},kl={key:0,class:"text-[10px] leading-relaxed font-mono text-slate-400 bg-slate-950 px-3 py-2 overflow-x-auto border-t border-slate-800"},wl={class:"space-y-2"},Sl={class:"flex items-start justify-between px-4 py-3.5 gap-3"},Cl={class:"space-y-0.5 min-w-0"},_l={key:0,class:"mt-1.5"},ql={key:0,class:"text-xs text-green-400 flex items-center gap-1"},Il={key:1,class:"space-y-0.5"},Al={class:"flex items-center gap-2 shrink-0"},jl={key:0,class:"text-xs text-slate-500"},zl={key:0,class:"border-t border-slate-800 px-4 py-3"},Vl={key:0,class:"flex items-center gap-2 text-xs text-slate-500"},$l={key:1,class:"text-xs text-slate-500"},Ul={key:2,class:"space-y-1.5"},Ml={class:"text-[11px] font-mono text-slate-300 truncate"},Ol={class:"text-[11px] font-mono text-slate-500 shrink-0"},El={class:"flex items-center justify-between px-4 py-3.5"},Hl={class:"px-4 py-3.5 space-y-2"},Tl={class:"flex items-center justify-between"},Dl={class:"space-y-1"},Bl={class:"flex justify-between text-xs text-slate-400"},Rl={class:"h-1.5 rounded-full bg-slate-800 overflow-hidden"},Pl={class:"flex items-center justify-between gap-2"},Fl={class:"flex items-center gap-1.5 text-xs"},Nl={class:"space-y-2"},Ll={class:"flex items-center justify-between px-4 py-3.5"},Wl={class:"flex items-center justify-between px-4 py-3.5"},Jl={class:"flex items-center justify-between px-4 py-3.5"},Gl={class:"p-5 space-y-4"},Ql={class:"flex items-center justify-between"},Kl={key:0,class:"space-y-3 text-sm text-slate-300"},Yl={class:"flex items-start gap-3"},Zl={class:"flex justify-end"},Xl={class:"p-5 space-y-4"},en={class:"flex items-center justify-between"},tn={class:"flex items-center gap-2.5 cursor-pointer"},sn=["checked","indeterminate"],an={class:"space-y-3"},ln={class:"text-xs font-semibold uppercase tracking-wider text-slate-500"},nn={class:"border border-slate-800 rounded-xl divide-y divide-slate-800 overflow-hidden"},on=["onUpdate:modelValue"],rn={class:"text-sm text-slate-300"},dn={key:0,class:"space-y-1"},un={class:"flex justify-end gap-2 pt-1"},cn={key:0,class:"p-5 space-y-4"},pn={class:"flex items-start gap-3"},fn={class:"w-10 h-10 rounded-full bg-red-500/10 flex items-center justify-center flex-shrink-0"},vn={class:"space-y-1"},mn={class:"text-sm text-slate-400"},xn={class:"flex justify-end"},yn={key:1,class:"p-5 space-y-4"},gn={class:"flex items-start gap-3"},bn={class:"w-10 h-10 rounded-full bg-green-500/10 flex items-center justify-center flex-shrink-0"},hn={class:"flex justify-end"},kn={key:2,class:"p-5 space-y-4"},wn={class:"flex items-start gap-3"},Sn={class:"w-10 h-10 rounded-full bg-primary-500/10 flex items-center justify-center flex-shrink-0"},Cn={class:"border border-slate-800 rounded-xl p-3 space-y-1"},_n={class:"text-xs text-slate-500 mb-2"},qn={key:0,class:"flex items-center justify-between text-xs"},In={class:"text-slate-400"},An={class:"font-mono text-slate-300"},jn={class:"flex justify-end gap-2 pt-1"},zn={class:"p-5 space-y-4"},Vn={class:"flex items-start gap-3"},$n={class:"w-10 h-10 rounded-full bg-red-500/10 flex items-center justify-center flex-shrink-0"},Un={class:"space-y-1 border border-slate-800 rounded-xl divide-y divide-slate-800 overflow-hidden"},Mn=["onUpdate:modelValue"],On={class:"min-w-0"},En={class:"text-sm font-medium text-slate-200 leading-snug"},Hn={class:"text-xs text-slate-500 leading-snug"},Tn={class:"flex justify-end gap-2 pt-1"},Dn={key:0,class:"p-5 space-y-4"},Bn={class:"flex items-start gap-3"},Rn={class:"w-10 h-10 rounded-full bg-green-500/10 flex items-center justify-center flex-shrink-0"},Pn={key:1,class:"p-5 space-y-4"},Fn={class:"flex items-start gap-3"},Nn={class:"w-10 h-10 rounded-full bg-red-500/10 flex items-center justify-center flex-shrink-0"},Ln={class:"flex justify-end gap-2 pt-1"},Wn={class:"p-5 space-y-5"},Jn={class:"space-y-3"},Gn={class:"flex items-center gap-3 cursor-pointer"},Qn={key:0,class:"ml-7"},Kn={class:"space-y-3"},Yn={class:"flex items-center gap-3 cursor-pointer"},Zn={key:0,class:"ml-7 space-y-2"},Xn=["onClick"],ei={class:"flex justify-end gap-2 pt-1"},oi=Je({__name:"settings",setup(l){const s=$s(),n=Us(),{settings:i,set:o}=Ds(),r=[{label:"Habits",items:[{key:"habits",label:"Habits"},{key:"completions",label:"Completions",parent:"habits"},{key:"habit_logs",label:"Habit logs",parent:"habits"},{key:"habit_schedules",label:"Habit schedules",parent:"habits"},{key:"reminders",label:"Habit reminders",parent:"habits"}]},{label:"Check-ins",items:[{key:"checkin_templates",label:"Templates"},{key:"checkin_questions",label:"Questions",parent:"checkin_templates"},{key:"checkin_responses",label:"Responses",parent:"checkin_questions"},{key:"checkin_reminders",label:"Reminders",parent:"checkin_templates"}]},{label:"Other",items:[{key:"scribbles",label:"Scribbles"},{key:"checkin_entries",label:"Journal entries"}]}];function c(){return{habits:!0,completions:!0,habit_logs:!0,habit_schedules:!0,reminders:!0,checkin_templates:!0,checkin_questions:!0,checkin_responses:!0,checkin_reminders:!0,scribbles:!0,checkin_entries:!0}}const g=I(!1),v=I(!1),b=pt(c()),p=I([]),m=Object.keys(c()),A=X(()=>m.every(y=>b[y])),$=X(()=>m.every(y=>!b[y]));function D(){const y=!A.value;for(const e of m)b[e]=y}function O(){Object.assign(b,c()),p.value=[],g.value=!0}function F(){return[["completions","habits","Completions","Habits"],["habit_logs","habits","Habit logs","Habits"],["habit_schedules","habits","Habit schedules","Habits"],["reminders","habits","Habit reminders","Habits"],["checkin_questions","checkin_templates","Questions","Check-in templates"],["checkin_responses","checkin_questions","Responses","Check-in questions"],["checkin_reminders","checkin_templates","Check-in reminders","Check-in templates"]].filter(([e,h])=>b[e]&&!b[h]).map(([,,e,h])=>`${e} require ${h}`)}async function B(){if(s.isAvailable&&(p.value=F(),!(p.value.length>0))){v.value=!0;try{const y=await s.exportJsonData({...b}),e=JSON.stringify(y,null,2),h=URL.createObjectURL(new Blob([e],{type:"application/json"}));try{const E=document.createElement("a");E.href=h,E.download=`habitat-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(E),E.click(),document.body.removeChild(E)}finally{URL.revokeObjectURL(h)}g.value=!1}finally{v.value=!1}}}const W=I(!1);async function J(){if(s.isAvailable){W.value=!0;try{const y=await s.exportDb(),e=URL.createObjectURL(new Blob([y],{type:"application/x-sqlite3"}));try{const h=document.createElement("a");h.href=e,h.download=`habitat-${new Date().toISOString().slice(0,10)}.sqlite3`,document.body.appendChild(h),h.click(),document.body.removeChild(h)}finally{URL.revokeObjectURL(e)}}finally{W.value=!1}}}const H=I(null),U=I(!1),K=I(!1),V=I(null),w=I(null),S=I(!1);function te(){V.value=null,w.value=null,S.value=!1,H.value?.click()}async function me(y){const e=y.target.files?.[0];if(e){y.target.value="";try{const h=JSON.parse(await e.text());if(typeof h!="object"||h===null){w.value="Invalid file.",U.value=!0;return}const E=h.version;if(typeof E!="number"){w.value="Missing version field — not a Habitat export.",U.value=!0;return}if(E!==1){w.value=`Unsupported version ${E}. This app supports version 1.`,U.value=!0;return}V.value=h,U.value=!0}catch{w.value="Could not parse file as JSON.",U.value=!0}}}function se(){window.location.reload()}async function xe(){if(!(!V.value||!s.isAvailable)){K.value=!0;try{await s.importJson(V.value),S.value=!0,V.value=null}finally{K.value=!1}}}function ne(){return new Promise((y,e)=>{const h=indexedDB.open("habitat",1);h.onupgradeneeded=()=>h.result.createObjectStore("voice_notes",{keyPath:"id"}),h.onsuccess=()=>y(h.result),h.onerror=()=>e(h.error)})}function ie(y){return new Promise((e,h)=>{const E=y.transaction("voice_notes","readonly").objectStore("voice_notes").getAll();E.onsuccess=()=>e(E.result),E.onerror=()=>h(E.error)})}const ae=I(!1);async function N(){ae.value=!0;try{const y=await ne(),e=await ie(y);if(e.length===0)return;const h={};for(const C of e){const Ce=C.mimeType.split("/")[1]?.split(";")[0]??"audio",ke=C.created_at.slice(0,19).replace(/[:.]/g,"-");h[`${ke}.${Ce}`]=new Uint8Array(await C.blob.arrayBuffer())}const E=va(h),q=URL.createObjectURL(new Blob([E.buffer],{type:"application/zip"}));try{const C=document.createElement("a");C.href=q,C.download=`habitat-voice-${new Date().toISOString().slice(0,10)}.zip`,document.body.appendChild(C),C.click(),document.body.removeChild(C)}finally{URL.revokeObjectURL(q)}}finally{ae.value=!1}}function le(){return new Promise(y=>{const e=indexedDB.deleteDatabase("habitat");e.onsuccess=()=>y(),e.onerror=()=>y(),e.onblocked=()=>y()})}function ce(){for(const y of Object.keys(localStorage))y.startsWith("checkin-")&&localStorage.removeItem(y)}const Ie=I(!1);async function re(y){localStorage.removeItem("habitat-has-data"),await s.nukeOpfs(),await le(),ce(),y?window.location.reload():Ie.value=!0}const de=I(!1),pe=I(!1),M=pt({enableSteps:!0,stepGoal:1e4,enableMeals:!0,meals:[{name:"Breakfast",calories:600},{name:"Lunch",calories:600},{name:"Dinner",calories:600}]});function G(){M.meals.push({name:"",calories:600})}function ye(y){M.meals.splice(y,1)}async function Ge(y){o("enableHealth",y),y&&s.isAvailable&&((await s.getHabits()).some(h=>h.tags.includes("habitat-health"))||(de.value=!0))}async function De(){if(s.isAvailable){pe.value=!0;try{const y={description:"",frequency:"daily",annotations:{},paused_until:null};if(M.enableSteps&&await s.createHabit({...y,name:"Steps",type:"NUMERIC",target_value:M.stepGoal,color:"#ef4444",icon:"i-heroicons-fire",tags:["habitat-health","habitat-steps"]}),M.enableMeals)for(const e of M.meals)e.name.trim()&&await s.createHabit({...y,name:e.name.trim(),type:"LIMIT",target_value:e.calories,color:"#f59e0b",icon:"i-heroicons-sparkles",tags:["habitat-health","habitat-meals"]});de.value=!1}finally{pe.value=!1}}}const ge=I(!1),Ae=I(!1),L=pt({habits:!0,checkinEntries:!0,checkins:!0,scribbles:!0,voiceNotes:!0,appliedDefaults:!1}),Qe=[{key:"habits",label:"Habits & completions",description:"All habits, logs, and completion history"},{key:"checkinEntries",label:"Check-in entries",description:"Daily check-in answers stored in the DB"},{key:"checkins",label:"Check-in templates & responses",description:"All templates, questions, and recorded answers"},{key:"scribbles",label:"Scribbles",description:"All free-form notes"},{key:"voiceNotes",label:"Voice recordings",description:"IndexedDB audio data"},{key:"appliedDefaults",label:"Applied defaults",description:"Re-enables seeding of default check-in templates"}],je=X(()=>!(L.habits||L.checkinEntries||L.checkins||L.scribbles||L.voiceNotes||L.appliedDefaults));async function Be(){if(!(!s.isAvailable||je.value)){Ae.value=!0;try{const y=[];L.habits&&y.push(s.deleteAllHabits()),L.checkinEntries&&y.push(s.deleteAllCheckinEntries()),L.checkins&&y.push(s.deleteAllCheckinData()),L.scribbles&&y.push(s.deleteAllScribbles()),L.appliedDefaults&&y.push(s.clearAppliedDefaults()),await Promise.all(y),L.checkinEntries&&ce(),L.voiceNotes&&await le(),L.habits&&localStorage.removeItem("habitat-has-data"),ge.value=!1}finally{Ae.value=!1}}}const ze=I(!1),Ke=I(!1);async function kt(y){if(s.isAvailable){Ke.value=!0;try{await re(y)}catch{ze.value=!1}finally{Ke.value=!1}}}const Se=I(null),it=I(!1);async function Jt(){if(s.isAvailable){it.value=!0,Se.value=null;try{Se.value=await s.integrityCheck()}finally{it.value=!1}}}const Gt=X(()=>Se.value!==null&&Se.value.length===1&&Se.value[0]==="ok"),Re=I(!1),fe=I(null),ot=I(!1),be=I(null);async function Qt(){if(s.isAvailable){ot.value=!0;try{fe.value=await s.getDbInfo()}finally{ot.value=!1}}}function Kt(){Re.value=!Re.value,Re.value&&!fe.value&&Qt()}const Pe=I(!1),Ve=I([]),rt=I(!1);async function wt(y,e=""){const h=[];for await(const[E,q]of y.entries()){const C=e?`${e}/${E}`:E;if(q.kind==="directory")h.push(...await wt(q,C));else{const Ce=await q.getFile();h.push({path:C,size:Ce.size})}}return h}async function St(){rt.value=!0;try{const y=await navigator.storage.getDirectory();Ve.value=await wt(y)}finally{rt.value=!1}}function Yt(){Pe.value=!Pe.value,Pe.value&&St()}function dt(y){return y<1024?`${y} B`:y<1024*1024?`${(y/1024).toFixed(1)} KB`:`${(y/(1024*1024)).toFixed(2)} MB`}const ut=I(!1);async function Zt(){ut.value=!0;try{if("serviceWorker"in navigator){const y=await navigator.serviceWorker.getRegistrations();await Promise.all(y.map(e=>e.unregister()))}if("caches"in window){const y=await caches.keys();await Promise.all(y.map(e=>caches.delete(e)))}window.location.reload()}catch{ut.value=!1}}const{isInstalled:Xt,canInstall:es,isIosSafari:Ye,isChromiumNoPrompt:ts,installing:ss,install:as}=ma(),ls=Tt.isNativePlatform(),$e=I(!1);function ns(){es.value?as():$e.value=!0}const{permission:Ue,requestPermission:is,sendTestNotification:os}=js();async function rs(){await is()}const Me=I(null),he=I(null);async function Ct(){"storage"in navigator&&("estimate"in navigator.storage&&(Me.value=await navigator.storage.estimate()),"persisted"in navigator.storage&&(he.value=await navigator.storage.persisted()))}async function ds(){"storage"in navigator&&"persist"in navigator.storage&&(he.value=await navigator.storage.persist())}const Ze=I(!1),Fe=I(!1),Xe=I(!1);return Mt(Fe,y=>{y&&Ct()}),(y,e)=>{const h=Ys,E=Es,q=zs,C=He,Ce=Xs,ke=Hs,ct=Ts,us=Os;return u(),x("div",xa,[e[138]||(e[138]=t("header",null,[t("p",{class:"text-sm text-slate-500"},"Preferences"),t("h2",{class:"text-2xl font-bold"},"Settings")],-1)),t("section",ya,[e[57]||(e[57]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-slate-500 px-1"},"Display",-1)),f(E,{ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:_(()=>[t("div",ga,[e[41]||(e[41]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"24-hour time"),t("p",{class:"text-xs text-slate-500"},"Show times as 17:34 instead of 5:34 PM.")],-1)),f(h,{"model-value":a(i).use24HourTime,"onUpdate:modelValue":e[0]||(e[0]=d=>a(o)("use24HourTime",d))},null,8,["model-value"])]),t("div",ba,[e[42]||(e[42]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Sticky bottom bar"),t("p",{class:"text-xs text-slate-500"},"Keep the nav bar fixed at the bottom when scrolling.")],-1)),f(h,{"model-value":a(i).stickyNav,"onUpdate:modelValue":e[1]||(e[1]=d=>a(o)("stickyNav",d))},null,8,["model-value"])]),t("div",ha,[e[43]||(e[43]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Extra bottom padding"),t("p",{class:"text-xs text-slate-500"},"Add space below the nav for Android gesture buttons.")],-1)),f(h,{"model-value":a(i).navExtraPadding,"onUpdate:modelValue":e[2]||(e[2]=d=>a(o)("navExtraPadding",d))},null,8,["model-value"])]),e[53]||(e[53]=t("div",{class:"px-4 pt-3 pb-1"},[t("p",{class:"text-[10px] font-semibold uppercase tracking-wider text-slate-600"},"Navigation")],-1)),t("div",ka,[e[44]||(e[44]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Today tab"),t("p",{class:"text-xs text-slate-500"},"Show daily progress and log habits for today.")],-1)),f(h,{"model-value":a(i).enableToday,"onUpdate:modelValue":e[3]||(e[3]=d=>a(o)("enableToday",d))},null,8,["model-value"])]),t("div",null,[t("div",wa,[e[45]||(e[45]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Week view"),t("p",{class:"text-xs text-slate-500"},"Quick-fill view for logging multiple days at once.")],-1)),f(h,{"model-value":a(i).enableWeek,"onUpdate:modelValue":e[4]||(e[4]=d=>a(o)("enableWeek",d))},null,8,["model-value"])]),a(i).enableWeek?(u(),x("div",Sa,[e[46]||(e[46]=t("p",{class:"text-sm text-slate-400"},"Days to show",-1)),t("div",Ca,[t("button",{class:"w-7 h-7 rounded-lg bg-slate-800 border border-slate-700 text-slate-300 flex items-center justify-center text-sm",onClick:e[5]||(e[5]=d=>a(o)("weekDays",Math.max(3,(a(i).weekDays||3)-1)))},"−"),t("span",_a,z(a(i).weekDays||3),1),t("button",{class:"w-7 h-7 rounded-lg bg-slate-800 border border-slate-700 text-slate-300 flex items-center justify-center text-sm",onClick:e[6]||(e[6]=d=>a(o)("weekDays",Math.min(7,(a(i).weekDays||3)+1)))},"+")])])):j("",!0)]),e[54]||(e[54]=t("div",{class:"px-4 pt-3 pb-1"},[t("p",{class:"text-[10px] font-semibold uppercase tracking-wider text-slate-600"},"Habits page")],-1)),t("div",qa,[e[47]||(e[47]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Show tags"),t("p",{class:"text-xs text-slate-500"},"Display habit tags in the habits list.")],-1)),f(h,{"model-value":a(i).showTagsOnHabits,"onUpdate:modelValue":e[7]||(e[7]=d=>a(o)("showTagsOnHabits",d))},null,8,["model-value"])]),t("div",Ia,[e[48]||(e[48]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Show annotations"),t("p",{class:"text-xs text-slate-500"},"Display key:value metadata in the habits list.")],-1)),f(h,{"model-value":a(i).showAnnotationsOnHabits,"onUpdate:modelValue":e[8]||(e[8]=d=>a(o)("showAnnotationsOnHabits",d))},null,8,["model-value"])]),e[55]||(e[55]=t("div",{class:"px-4 pt-3 pb-1"},[t("p",{class:"text-[10px] font-semibold uppercase tracking-wider text-slate-600"},"Today page")],-1)),t("div",Aa,[e[49]||(e[49]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Show tags"),t("p",{class:"text-xs text-slate-500"},"Display habit tags in today's list.")],-1)),f(h,{"model-value":a(i).showTagsOnToday,"onUpdate:modelValue":e[9]||(e[9]=d=>a(o)("showTagsOnToday",d))},null,8,["model-value"])]),t("div",ja,[e[50]||(e[50]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Show annotations"),t("p",{class:"text-xs text-slate-500"},"Display key:value metadata in today's list.")],-1)),f(h,{"model-value":a(i).showAnnotationsOnToday,"onUpdate:modelValue":e[10]||(e[10]=d=>a(o)("showAnnotationsOnToday",d))},null,8,["model-value"])]),e[56]||(e[56]=t("div",{class:"px-4 pt-3 pb-1"},[t("p",{class:"text-[10px] font-semibold uppercase tracking-wider text-slate-600"},"Log entries")],-1)),t("div",za,[e[51]||(e[51]=t("p",{class:"text-sm font-medium"},"Input mode",-1)),e[52]||(e[52]=t("p",{class:"text-xs text-slate-500 mb-2"},"How numeric values are applied when logging a habit.",-1)),t("div",Va,[t("button",{class:Z(["flex-1 py-2 px-3 rounded-xl text-xs font-medium border transition-colors",a(i).logInputMode==="increment"?"bg-primary-500/15 border-primary-500/40 text-primary-300":"bg-slate-800 border-slate-700 text-slate-400"]),onClick:e[11]||(e[11]=d=>a(o)("logInputMode","increment"))}," Add to total ",2),t("button",{class:Z(["flex-1 py-2 px-3 rounded-xl text-xs font-medium border transition-colors",a(i).logInputMode==="absolute"?"bg-primary-500/15 border-primary-500/40 text-primary-300":"bg-slate-800 border-slate-700 text-slate-400"]),onClick:e[12]||(e[12]=d=>a(o)("logInputMode","absolute"))}," Set total ",2)])])]),_:1})]),t("section",$a,[e[67]||(e[67]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-slate-500 px-1"},"Features",-1)),f(E,{ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:_(()=>[t("div",Ua,[e[58]||(e[58]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Enable Journalling"),t("p",{class:"text-xs text-slate-500"},"Show Check-in, Scribbles, and Voice in the navigation.")],-1)),f(h,{"model-value":a(i).enableJournalling,"onUpdate:modelValue":e[13]||(e[13]=d=>a(o)("enableJournalling",d))},null,8,["model-value"])]),t("div",Ma,[e[59]||(e[59]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Enable Health"),t("p",{class:"text-xs text-slate-500"},"Track daily steps and meal calories.")],-1)),f(h,{"model-value":a(i).enableHealth,"onUpdate:modelValue":Ge},null,8,["model-value"])]),a(i).enableJournalling?(u(),x("div",Oa,[e[60]||(e[60]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Save transcriptions"),t("p",{class:"text-xs text-slate-500"},[k("After recording, offer to save the speech-to-text transcript as a Scribble tagged "),t("code",{class:"text-slate-400"},"habitat-transcribed"),k(".")])],-1)),f(h,{"model-value":a(i).saveTranscribedNotes,"onUpdate:modelValue":e[14]||(e[14]=d=>a(o)("saveTranscribedNotes",d))},null,8,["model-value"])])):j("",!0),t("div",Ea,[t("div",Ha,[e[61]||(e[61]=t("p",{class:"text-sm font-medium"},"Notifications",-1)),t("p",Ta,[a(Ye)?(u(),x("span",Da,"Install the app first — iOS only allows notifications in installed PWAs")):(u(),x(P,{key:1},[a(Ue)==="granted"?(u(),x("span",Ba,"Enabled — add reminders on individual habit pages")):a(Ue)==="denied"?(u(),x("span",Ra,"Blocked — allow in browser/OS settings to enable")):(u(),x("span",Pa,"Not enabled — grant permission to receive reminders"))],64))])]),t("div",Fa,[a(Ue)==="default"&&!a(Ye)?(u(),R(q,{key:0,size:"sm",variant:"soft",color:"neutral",icon:"i-heroicons-bell",onClick:rs},{default:_(()=>[...e[62]||(e[62]=[k(" Enable ",-1)])]),_:1})):a(Ue)==="granted"?(u(),x("div",Na)):a(Ue)==="denied"?(u(),R(C,{key:2,name:"i-heroicons-bell-slash",class:"w-5 h-5 text-red-400 mx-1"})):a(Ye)?(u(),R(C,{key:3,name:"i-heroicons-bell-slash",class:"w-5 h-5 text-amber-400 mx-1"})):j("",!0)])]),a(Xt)?(u(),x("div",La,[t("div",Wa,[e[63]||(e[63]=t("p",{class:"text-sm font-medium"},"Habitat is installed",-1)),t("p",Ja,z(a(ls)?"Running as a native app":"Running as a standalone app"),1)]),e[64]||(e[64]=t("div",{class:"w-2 h-2 rounded-full bg-green-400 mx-2 shrink-0"},null,-1))])):(u(),x("div",Ga,[e[66]||(e[66]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Install Habitat"),t("p",{class:"text-xs text-slate-500"},"Add to your home screen for offline access and notifications")],-1)),f(q,{size:"sm",variant:"soft",color:"primary",icon:"i-heroicons-arrow-down-tray",loading:a(ss),class:"shrink-0",onClick:ns},{default:_(()=>[...e[65]||(e[65]=[k(" Install ",-1)])]),_:1},8,["loading"])]))]),_:1})]),t("section",Qa,[e[72]||(e[72]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-slate-500 px-1"},"Data",-1)),f(E,{ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:_(()=>[t("div",Ka,[e[68]||(e[68]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Export data"),t("p",{class:"text-xs text-slate-500"},"Download selected data as a versioned JSON file.")],-1)),f(q,{icon:"i-heroicons-arrow-down-tray",variant:"ghost",color:"neutral",size:"sm",disabled:!a(s).isAvailable,onClick:O},null,8,["disabled"])]),t("div",Ya,[e[69]||(e[69]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Import data"),t("p",{class:"text-xs text-slate-500"},"Merge from a Habitat JSON export. Existing records are kept.")],-1)),t("input",{ref_key:"importInput",ref:H,type:"file",accept:".json",class:"hidden",onChange:me},null,544),f(q,{icon:"i-heroicons-arrow-up-tray",variant:"ghost",color:"neutral",size:"sm",disabled:!a(s).isAvailable,onClick:te},null,8,["disabled"])]),t("div",Za,[e[70]||(e[70]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Export SQLite"),t("p",{class:"text-xs text-slate-500"},[k("Download the raw "),t("span",{class:"font-mono"},".sqlite3"),k(" database file.")])],-1)),f(q,{icon:"i-heroicons-circle-stack",variant:"ghost",color:"neutral",size:"sm",loading:a(W),disabled:!a(s).isAvailable,onClick:J},null,8,["loading","disabled"])]),t("div",Xa,[e[71]||(e[71]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Export voice notes"),t("p",{class:"text-xs text-slate-500"},[k("Download all voice recordings as a "),t("span",{class:"font-mono"},".zip"),k(" archive.")])],-1)),f(q,{icon:"i-heroicons-musical-note",variant:"ghost",color:"neutral",size:"sm",loading:a(ae),onClick:N},null,8,["loading"])])]),_:1})]),t("section",el,[t("button",{class:"w-full flex items-center justify-between px-1 py-0.5",onClick:e[15]||(e[15]=d=>Ze.value=!a(Ze))},[e[73]||(e[73]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-slate-500"},"About",-1)),f(C,{name:a(Ze)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",class:"w-3.5 h-3.5 text-slate-600"},null,8,["name"])]),a(Ze)?(u(),R(E,{key:0,ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:_(()=>[e[83]||(e[83]=t("div",{class:"flex items-center justify-between px-4 py-3.5"},[t("p",{class:"text-sm text-slate-400"},"App"),t("p",{class:"text-sm font-medium"},"Habitat")],-1)),t("div",tl,[e[74]||(e[74]=t("p",{class:"text-sm text-slate-400"},"Version",-1)),t("p",sl,z(a(n).public.appVersion||"—"),1)]),t("div",al,[e[75]||(e[75]=t("p",{class:"text-sm text-slate-400"},"Commit",-1)),t("p",ll,z(a(n).public.commitSha||"—"),1)]),a(n).public.gitTag.length>0?(u(),x("div",nl,[e[76]||(e[76]=t("p",{class:"text-sm text-slate-400"},"Tag",-1)),f(Ce,{label:a(n).public.gitTag,variant:"subtle",color:"primary",size:"sm",class:"rounded-full font-mono"},null,8,["label"])])):j("",!0),t("div",il,[e[77]||(e[77]=t("p",{class:"text-sm text-slate-400"},"Build",-1)),f(Ce,{label:a(n).public.buildTarget,variant:"subtle",color:"neutral",size:"sm",class:"rounded-full font-mono"},null,8,["label"])]),t("div",ol,[e[78]||(e[78]=t("p",{class:"text-sm text-slate-400"},"Built",-1)),t("p",rl,z(a(n).public.buildTime?new Date(a(n).public.buildTime).toLocaleString():"—"),1)]),e[84]||(e[84]=t("div",{class:"flex items-center justify-between px-4 py-3.5"},[t("p",{class:"text-sm text-slate-400"},"Storage"),t("p",{class:"text-sm font-medium"},"On-device (OPFS)")],-1)),t("div",null,[t("button",{class:"w-full flex items-center justify-between px-4 py-3.5 text-left",onClick:Kt},[e[79]||(e[79]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm text-slate-400"},"Database schema")],-1)),t("div",dl,[a(fe)?(u(),R(Ce,{key:0,label:`v${a(fe).userVersion}`,variant:"subtle",color:"neutral",size:"sm",class:"font-mono rounded-full"},null,8,["label"])):j("",!0),f(C,{name:a(Re)?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-4 h-4 text-slate-500"},null,8,["name"])])]),a(Re)?(u(),x("div",ul,[a(ot)?(u(),x("div",cl,[f(C,{name:"i-heroicons-arrow-path",class:"w-3.5 h-3.5 animate-spin"}),e[80]||(e[80]=k(" Loading… ",-1))])):a(fe)?(u(),x(P,{key:1},[t("div",pl,[e[81]||(e[81]=t("span",{class:"text-xs text-slate-500"},"Schema version:",-1)),t("span",fl,z(a(fe).userVersion),1)]),(u(!0),x(P,null,ue(a(fe).tables,d=>(u(),x("div",{key:d.name,class:"rounded-lg border border-slate-800 overflow-hidden"},[t("button",{class:"w-full flex items-center justify-between px-3 py-2 text-left hover:bg-slate-800/40 transition-colors",onClick:Q=>be.value=a(be)===d.name?null:d.name},[t("span",ml,z(d.name),1),f(C,{name:a(be)===d.name?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-3.5 h-3.5 text-slate-600"},null,8,["name"])],8,vl),a(be)===d.name?(u(),x("pre",xl,z(d.sql),1)):j("",!0)]))),128)),a(fe).indices.length>0?(u(),x(P,{key:0},[e[82]||(e[82]=t("p",{class:"text-[10px] font-semibold uppercase tracking-wider text-slate-600 pt-1"},"Indices",-1)),(u(!0),x(P,null,ue(a(fe).indices,d=>(u(),x("div",{key:d.name,class:"rounded-lg border border-slate-800 overflow-hidden"},[t("button",{class:"w-full flex items-center justify-between px-3 py-2 text-left hover:bg-slate-800/40 transition-colors",onClick:Q=>be.value=a(be)===d.name?null:d.name},[t("div",gl,[t("span",bl,z(d.name),1),t("span",hl,"on "+z(d.tbl_name),1)]),f(C,{name:a(be)===d.name?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-3.5 h-3.5 text-slate-600 shrink-0"},null,8,["name"])],8,yl),a(be)===d.name?(u(),x("pre",kl,z(d.sql),1)):j("",!0)]))),128))],64)):j("",!0)],64)):j("",!0)])):j("",!0)])]),_:1})):j("",!0)]),t("section",wl,[t("button",{class:"w-full flex items-center justify-between px-1 py-0.5",onClick:e[16]||(e[16]=d=>Fe.value=!a(Fe))},[e[85]||(e[85]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-slate-500"},"Diagnostics",-1)),f(C,{name:a(Fe)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",class:"w-3.5 h-3.5 text-slate-600"},null,8,["name"])]),a(Fe)?(u(),R(E,{key:0,ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:_(()=>[t("div",Sl,[t("div",Cl,[e[87]||(e[87]=t("p",{class:"text-sm font-medium"},"Integrity check",-1)),e[88]||(e[88]=t("p",{class:"text-xs text-slate-500"},[k("Runs SQLite "),t("span",{class:"font-mono"},"PRAGMA integrity_check")],-1)),a(Se)!==null?(u(),x("div",_l,[a(Gt)?(u(),x("p",ql,[f(C,{name:"i-heroicons-check-circle",class:"w-3.5 h-3.5 shrink-0"}),e[86]||(e[86]=k(" ok ",-1))])):(u(),x("ul",Il,[(u(!0),x(P,null,ue(a(Se),(d,Q)=>(u(),x("li",{key:Q,class:"text-xs text-red-400 font-mono break-all"},z(d),1))),128))]))])):j("",!0)]),f(q,{size:"sm",variant:"ghost",color:"neutral",loading:a(it),disabled:!a(s).isAvailable,icon:"i-heroicons-shield-check",class:"shrink-0",onClick:Jt},null,8,["loading","disabled"])]),t("div",null,[t("button",{class:"w-full flex items-center justify-between px-4 py-3.5 text-left",onClick:Yt},[e[89]||(e[89]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"OPFS files"),t("p",{class:"text-xs text-slate-500"},"All files in the origin private file system")],-1)),t("div",Al,[a(Ve).length>0?(u(),x("span",jl,z(a(Ve).length)+" file"+z(a(Ve).length!==1?"s":""),1)):j("",!0),f(C,{name:a(Pe)?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-4 h-4 text-slate-500"},null,8,["name"])])]),a(Pe)?(u(),x("div",zl,[a(rt)?(u(),x("div",Vl,[f(C,{name:"i-heroicons-arrow-path",class:"w-3.5 h-3.5 animate-spin"}),e[90]||(e[90]=k(" Scanning… ",-1))])):a(Ve).length===0?(u(),x("div",$l,"No files found.")):(u(),x("ul",Ul,[(u(!0),x(P,null,ue(a(Ve),d=>(u(),x("li",{key:d.path,class:"flex items-center justify-between gap-4"},[t("span",Ml,z(d.path),1),t("span",Ol,z(dt(d.size)),1)]))),128))])),t("button",{class:"mt-3 text-xs text-slate-600 hover:text-slate-400 flex items-center gap-1 transition-colors",onClick:St},[f(C,{name:"i-heroicons-arrow-path",class:"w-3 h-3"}),e[91]||(e[91]=k(" Refresh ",-1))])])):j("",!0)]),t("div",El,[e[92]||(e[92]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Test notification"),t("p",{class:"text-xs text-slate-500"},"Fire a sample notification to verify delivery.")],-1)),f(q,{size:"sm",variant:"ghost",color:"neutral",icon:"i-heroicons-bell",disabled:a(Ue)!=="granted",onClick:a(os)},null,8,["disabled","onClick"])]),t("div",Hl,[t("div",Tl,[e[93]||(e[93]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Storage"),t("p",{class:"text-xs text-slate-500"},"Browser quota and current usage.")],-1)),f(q,{size:"sm",variant:"ghost",color:"neutral",icon:"i-heroicons-arrow-path",onClick:Ct})]),a(Me)?(u(),x(P,{key:0},[t("div",Dl,[t("div",Bl,[t("span",null,z(dt(a(Me).usage??0))+" used",1),t("span",null,z(dt(a(Me).quota??0))+" quota",1)]),t("div",Rl,[t("div",{class:"h-full rounded-full bg-primary-500 transition-all",style:Vs({width:`${Math.min(100,(a(Me).usage??0)/(a(Me).quota??1)*100).toFixed(1)}%`})},null,4)])]),t("div",Pl,[t("div",Fl,[f(C,{name:a(he)?"i-heroicons-lock-closed":"i-heroicons-lock-open",class:Z(["w-3.5 h-3.5",a(he)?"text-green-400":"text-amber-400"])},null,8,["name","class"]),t("span",{class:Z(a(he)?"text-green-400":"text-amber-400")},z(a(he)===null?"Checking…":a(he)?"Persistent storage":"Storage not persisted"),3)]),a(he)===!1?(u(),R(q,{key:0,size:"xs",variant:"soft",color:"primary",onClick:ds},{default:_(()=>[...e[94]||(e[94]=[k(" Request ",-1)])]),_:1})):j("",!0)])],64)):j("",!0)])]),_:1})):j("",!0)]),t("section",Nl,[t("button",{class:"w-full flex items-center justify-between px-1 py-0.5",onClick:e[17]||(e[17]=d=>Xe.value=!a(Xe))},[e[95]||(e[95]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-red-900/70"},"🐉 Here be dragons",-1)),f(C,{name:a(Xe)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",class:"w-3.5 h-3.5 text-red-900/50"},null,8,["name"])]),a(Xe)?(u(),R(E,{key:0,ui:{root:"rounded-2xl ring-1 ring-red-900/30",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:_(()=>[t("div",Ll,[e[96]||(e[96]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Force reload"),t("p",{class:"text-xs text-slate-500"},"Unregister service worker, clear JS/CSS caches, and reload. OPFS data is preserved.")],-1)),f(q,{size:"sm",variant:"ghost",color:"neutral",icon:"i-heroicons-arrow-path",loading:a(ut),class:"shrink-0",onClick:Zt},null,8,["loading"])]),t("div",Wl,[e[97]||(e[97]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium text-red-400"},"Clear app data"),t("p",{class:"text-xs text-slate-500"},"Selectively delete habits, check-ins, scribbles, or voice notes.")],-1)),f(q,{icon:"i-heroicons-trash",variant:"ghost",color:"error",size:"sm",disabled:!a(s).isAvailable,onClick:e[18]||(e[18]=d=>ge.value=!0)},null,8,["disabled"])]),t("div",Jl,[e[98]||(e[98]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium text-red-400"},"Clear OPFS storage"),t("p",{class:"text-xs text-slate-500"},"Wipe all on-device file system storage including the database.")],-1)),f(q,{icon:"i-heroicons-fire",variant:"ghost",color:"error",size:"sm",disabled:!a(s).isAvailable,onClick:e[19]||(e[19]=d=>ze.value=!0)},null,8,["disabled"])])]),_:1})):j("",!0)]),f(ke,{open:a($e),"onUpdate:open":e[22]||(e[22]=d=>Ee($e)?$e.value=d:null)},{content:_(()=>[t("div",Gl,[t("div",Ql,[e[99]||(e[99]=t("h3",{class:"font-semibold text-slate-100"},"Install Habitat",-1)),f(q,{icon:"i-heroicons-x-mark",variant:"ghost",color:"neutral",size:"xs",onClick:e[20]||(e[20]=d=>$e.value=!1)})]),a(Ye)?(u(),x("ol",Kl,[t("li",Yl,[e[104]||(e[104]=t("span",{class:"text-primary-400 font-semibold shrink-0"},"1.",-1)),t("span",null,[e[100]||(e[100]=k("Tap the ",-1)),e[101]||(e[101]=t("strong",{class:"text-slate-100"},"Share",-1)),e[102]||(e[102]=k(" button ",-1)),f(C,{name:"i-heroicons-arrow-up-on-square",class:"inline w-4 h-4 align-text-bottom text-slate-100"}),e[103]||(e[103]=k(" in the Safari toolbar",-1))])]),e[105]||(e[105]=t("li",{class:"flex items-start gap-3"},[t("span",{class:"text-primary-400 font-semibold shrink-0"},"2."),t("span",null,[k("Scroll down and tap "),t("strong",{class:"text-slate-100"},"Add to Home Screen")])],-1)),e[106]||(e[106]=t("li",{class:"flex items-start gap-3"},[t("span",{class:"text-primary-400 font-semibold shrink-0"},"3."),t("span",null,[k("Tap "),t("strong",{class:"text-slate-100"},"Add"),k(" to confirm")])],-1))])):a(ts)?(u(),x(P,{key:1},[e[107]||(e[107]=t("p",{class:"text-sm text-slate-400"},"Chrome hasn't offered an install prompt yet — use the browser menu instead:",-1)),e[108]||(e[108]=t("ol",{class:"space-y-3 text-sm text-slate-300"},[t("li",{class:"flex items-start gap-3"},[t("span",{class:"text-primary-400 font-semibold shrink-0"},"1."),t("span",null,[k("Tap the "),t("strong",{class:"text-slate-100"},"⋮ menu"),k(" in the top-right corner of Chrome")])]),t("li",{class:"flex items-start gap-3"},[t("span",{class:"text-primary-400 font-semibold shrink-0"},"2."),t("span",null,[k("Choose "),t("strong",{class:"text-slate-100"},"Install app"),k(" or "),t("strong",{class:"text-slate-100"},"Add to Home Screen")])])],-1))],64)):(u(),x(P,{key:2},[e[109]||(e[109]=t("p",{class:"text-sm text-slate-400"},[k(" Your current browser doesn't support PWA installation. Open Habitat in "),t("strong",{class:"text-slate-100"},"Chrome"),k(", "),t("strong",{class:"text-slate-100"},"Edge"),k(", "),t("strong",{class:"text-slate-100"},"Brave"),k(", or "),t("strong",{class:"text-slate-100"},"Opera"),k(" to install it as a standalone app. ")],-1)),e[110]||(e[110]=t("p",{class:"text-xs text-slate-500"}," These browsers also provide OPFS storage and background notifications. ",-1))],64)),t("div",Zl,[f(q,{variant:"ghost",color:"neutral",onClick:e[21]||(e[21]=d=>$e.value=!1)},{default:_(()=>[...e[111]||(e[111]=[k("Close",-1)])]),_:1})])])]),_:1},8,["open"]),f(ke,{open:a(g),"onUpdate:open":e[25]||(e[25]=d=>Ee(g)?g.value=d:null)},{content:_(()=>[t("div",Xl,[t("div",en,[e[112]||(e[112]=t("h3",{class:"font-semibold text-slate-100"},"Export data",-1)),f(q,{icon:"i-heroicons-x-mark",variant:"ghost",color:"neutral",size:"xs",onClick:e[23]||(e[23]=d=>g.value=!1)})]),t("label",tn,[t("input",{type:"checkbox",class:"accent-primary-500",checked:a(A),indeterminate:!a(A)&&!a($),onChange:D},null,40,sn),e[113]||(e[113]=t("span",{class:"text-sm text-slate-300 font-medium"},"Select all",-1))]),t("div",an,[(u(),x(P,null,ue(r,d=>t("div",{key:d.label,class:"space-y-1.5"},[t("p",ln,z(d.label),1),t("div",nn,[(u(!0),x(P,null,ue(d.items,Q=>(u(),x("label",{key:Q.key,class:"flex items-center gap-3 px-3.5 py-2.5 cursor-pointer hover:bg-slate-800/40 transition-colors"},[et(t("input",{"onUpdate:modelValue":Oe=>a(b)[Q.key]=Oe,type:"checkbox",class:"accent-primary-500 shrink-0"},null,8,on),[[tt,a(b)[Q.key]]]),t("span",rn,z(Q.label),1)]))),128))])])),64))]),a(p).length>0?(u(),x("ul",dn,[(u(!0),x(P,null,ue(a(p),d=>(u(),x("li",{key:d,class:"text-xs text-red-400 flex items-center gap-1.5"},[f(C,{name:"i-heroicons-exclamation-circle",class:"w-3.5 h-3.5 shrink-0"}),k(" "+z(d),1)]))),128))])):j("",!0),t("div",un,[f(q,{variant:"ghost",color:"neutral",size:"sm",onClick:e[24]||(e[24]=d=>g.value=!1)},{default:_(()=>[...e[114]||(e[114]=[k("Cancel",-1)])]),_:1}),f(q,{size:"sm",icon:"i-heroicons-arrow-down-tray",loading:a(v),disabled:a($),onClick:B},{default:_(()=>[...e[115]||(e[115]=[k(" Download ",-1)])]),_:1},8,["loading","disabled"])])])]),_:1},8,["open"]),f(ke,{open:a(U),"onUpdate:open":e[29]||(e[29]=d=>Ee(U)?U.value=d:null)},{content:_(()=>[a(w)?(u(),x("div",cn,[t("div",pn,[t("div",fn,[f(C,{name:"i-heroicons-exclamation-circle",class:"w-5 h-5 text-red-400"})]),t("div",vn,[e[116]||(e[116]=t("p",{class:"font-semibold"},"Cannot import",-1)),t("p",mn,z(a(w)),1)])]),t("div",xn,[f(q,{variant:"ghost",color:"neutral",onClick:e[26]||(e[26]=d=>U.value=!1)},{default:_(()=>[...e[117]||(e[117]=[k("Close",-1)])]),_:1})])])):a(S)?(u(),x("div",yn,[t("div",gn,[t("div",bn,[f(C,{name:"i-heroicons-check-circle",class:"w-5 h-5 text-green-400"})]),e[118]||(e[118]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold"},"Import complete"),t("p",{class:"text-sm text-slate-400"},"Records merged. Reload to see all updates.")],-1))]),t("div",hn,[f(q,{onClick:e[27]||(e[27]=()=>{U.value=!1,se()})},{default:_(()=>[...e[119]||(e[119]=[k("Reload",-1)])]),_:1})])])):a(V)?(u(),x("div",kn,[t("div",wn,[t("div",Sn,[f(C,{name:"i-heroicons-arrow-up-tray",class:"w-5 h-5 text-primary-400"})]),e[120]||(e[120]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold"},"Import data?"),t("p",{class:"text-sm text-slate-400"},"New records will be added; existing IDs are skipped.")],-1))]),t("div",Cn,[t("p",_n," Version "+z(a(V).version)+" export from "+z(new Date(a(V).exported_at).toLocaleDateString()),1),(u(),x(P,null,ue(r,d=>(u(),x(P,{key:d.label},[(u(!0),x(P,null,ue(d.items,Q=>(u(),x(P,{key:Q.key},[(a(V)[Q.key]??[]).length>0?(u(),x("div",qn,[t("span",In,z(Q.label),1),t("span",An,z((a(V)[Q.key]??[]).length),1)])):j("",!0)],64))),128))],64))),64))]),t("div",jn,[f(q,{variant:"ghost",color:"neutral",onClick:e[28]||(e[28]=d=>U.value=!1)},{default:_(()=>[...e[121]||(e[121]=[k("Cancel",-1)])]),_:1}),f(q,{loading:a(K),onClick:xe},{default:_(()=>[...e[122]||(e[122]=[k("Import",-1)])]),_:1},8,["loading"])])])):j("",!0)]),_:1},8,["open"]),f(ke,{open:a(ge),"onUpdate:open":e[31]||(e[31]=d=>Ee(ge)?ge.value=d:null)},{content:_(()=>[t("div",zn,[t("div",Vn,[t("div",$n,[f(C,{name:"i-heroicons-exclamation-triangle",class:"w-5 h-5 text-red-400"})]),e[123]||(e[123]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold"},"Clear app data?"),t("p",{class:"text-sm text-slate-400"},"Select what to delete. This cannot be undone.")],-1))]),t("div",Un,[(u(),x(P,null,ue(Qe,d=>t("label",{key:d.key,class:"flex items-start gap-3 px-3.5 py-3 cursor-pointer hover:bg-slate-800/40 transition-colors"},[et(t("input",{"onUpdate:modelValue":Q=>a(L)[d.key]=Q,type:"checkbox",class:"mt-0.5 accent-red-500 shrink-0"},null,8,Mn),[[tt,a(L)[d.key]]]),t("div",On,[t("p",En,z(d.label),1),t("p",Hn,z(d.description),1)])])),64))]),t("div",Tn,[f(q,{variant:"ghost",color:"neutral",onClick:e[30]||(e[30]=d=>ge.value=!1)},{default:_(()=>[...e[124]||(e[124]=[k("Cancel",-1)])]),_:1}),f(q,{color:"error",loading:a(Ae),disabled:a(je),onClick:Be},{default:_(()=>[...e[125]||(e[125]=[k(" Delete selected ",-1)])]),_:1},8,["loading","disabled"])])])]),_:1},8,["open"]),f(ke,{open:a(ze),"onUpdate:open":e[35]||(e[35]=d=>Ee(ze)?ze.value=d:null)},{content:_(()=>[a(Ie)?(u(),x("div",Dn,[t("div",Bn,[t("div",Rn,[f(C,{name:"i-heroicons-check-circle",class:"w-5 h-5 text-green-400"})]),e[126]||(e[126]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold"},"All data wiped"),t("p",{class:"text-sm text-slate-400"},"Storage has been cleared. You can safely close this tab.")],-1))])])):(u(),x("div",Pn,[t("div",Fn,[t("div",Nn,[f(C,{name:"i-heroicons-fire",class:"w-5 h-5 text-red-400"})]),e[127]||(e[127]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold"},"Wipe OPFS storage?"),t("p",{class:"text-sm text-slate-400"}," Removes every file in the browser's origin private file system — including the SQLite database. Voice recordings and check-in entries will also be cleared. ")],-1))]),t("div",Ln,[f(q,{variant:"ghost",color:"neutral",onClick:e[32]||(e[32]=d=>ze.value=!1)},{default:_(()=>[...e[128]||(e[128]=[k("Cancel",-1)])]),_:1}),f(q,{color:"error",variant:"ghost",loading:a(Ke),onClick:e[33]||(e[33]=d=>kt(!1))},{default:_(()=>[...e[129]||(e[129]=[k("Wipe only",-1)])]),_:1},8,["loading"]),f(q,{color:"error",loading:a(Ke),onClick:e[34]||(e[34]=d=>kt(!0))},{default:_(()=>[...e[130]||(e[130]=[k("Wipe & reload",-1)])]),_:1},8,["loading"])])]))]),_:1},8,["open"]),f(ke,{open:a(de),"onUpdate:open":e[40]||(e[40]=d=>Ee(de)?de.value=d:null)},{content:_(()=>[t("div",Wn,[e[137]||(e[137]=t("div",null,[t("h3",{class:"text-lg font-semibold"},"Set up Health Tracking"),t("p",{class:"text-sm text-slate-400 mt-0.5"},"Choose what you'd like to track. Habits are created in your habit list.")],-1)),t("div",Jn,[t("label",Gn,[et(t("input",{"onUpdate:modelValue":e[36]||(e[36]=d=>a(M).enableSteps=d),type:"checkbox",class:"rounded"},null,512),[[tt,a(M).enableSteps]]),e[131]||(e[131]=t("div",null,[t("p",{class:"text-sm font-medium"},"Track Steps"),t("p",{class:"text-xs text-slate-500"},"Creates a daily NUMERIC habit with your step goal.")],-1))]),a(M).enableSteps?(u(),x("div",Qn,[f(us,{label:"Daily step goal"},{default:_(()=>[f(ct,{modelValue:a(M).stepGoal,"onUpdate:modelValue":e[37]||(e[37]=d=>a(M).stepGoal=d),modelModifiers:{number:!0},type:"number",min:"1000",step:"500",class:"w-40"},null,8,["modelValue"])]),_:1})])):j("",!0)]),t("div",Kn,[t("label",Yn,[et(t("input",{"onUpdate:modelValue":e[38]||(e[38]=d=>a(M).enableMeals=d),type:"checkbox",class:"rounded"},null,512),[[tt,a(M).enableMeals]]),e[132]||(e[132]=t("div",null,[t("p",{class:"text-sm font-medium"},"Track Meals"),t("p",{class:"text-xs text-slate-500"},"Creates LIMIT habits for calorie tracking per meal.")],-1))]),a(M).enableMeals?(u(),x("div",Zn,[(u(!0),x(P,null,ue(a(M).meals,(d,Q)=>(u(),x("div",{key:Q,class:"flex items-center gap-2"},[f(ct,{modelValue:d.name,"onUpdate:modelValue":Oe=>d.name=Oe,placeholder:"Meal name",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),f(ct,{modelValue:d.calories,"onUpdate:modelValue":Oe=>d.calories=Oe,modelModifiers:{number:!0},type:"number",min:"0",step:"50",class:"w-24"},null,8,["modelValue","onUpdate:modelValue"]),e[133]||(e[133]=t("span",{class:"text-xs text-slate-500 shrink-0"},"kcal",-1)),t("button",{class:"text-slate-700 hover:text-red-400 transition-colors shrink-0",onClick:Oe=>ye(Q)},[f(C,{name:"i-heroicons-x-mark",class:"w-4 h-4"})],8,Xn)]))),128)),t("button",{class:"text-xs text-slate-500 hover:text-slate-400 flex items-center gap-1 mt-1",onClick:G},[f(C,{name:"i-heroicons-plus",class:"w-3 h-3"}),e[134]||(e[134]=k(" Add meal ",-1))])])):j("",!0)]),t("div",ei,[f(q,{variant:"ghost",color:"neutral",onClick:e[39]||(e[39]=d=>de.value=!1)},{default:_(()=>[...e[135]||(e[135]=[k("Skip",-1)])]),_:1}),f(q,{color:"primary",disabled:!a(M).enableSteps&&!a(M).enableMeals,loading:a(pe),onClick:De},{default:_(()=>[...e[136]||(e[136]=[k(" Create Habits ",-1)])]),_:1},8,["disabled","loading"])])])]),_:1},8,["open"])])}}});export{oi as default};
