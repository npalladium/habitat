import{e as J,g as K,o as c,c as u,a as l,b as o,j as Q,F as U,r as z,k as W,l as X,t as f,m as F,p,n as E,d as w,i,w as m,q as Y,v as Z,y as g,z as M,A as ee}from"./xAnKZML8.js";import{_ as te}from"./COSDyWQn.js";import{_ as se}from"./D42ACfti.js";import{_ as le}from"./C8z6p9s2.js";import{_ as oe}from"./CxIc_2JD.js";const ie={class:"max-w-lg mx-auto space-y-6"},ne={class:"flex items-center gap-3"},ae={class:"flex items-center justify-between"},re={class:"flex items-center gap-2"},ce={class:"font-semibold text-sm"},de={class:"text-xs text-slate-500"},ue={class:"flex items-center gap-1"},me={class:"space-y-1"},_e={class:"flex-1 min-w-0"},fe={class:"flex items-center gap-2 mt-0.5"},pe={key:0,class:"text-xs text-slate-500"},ve={key:1,class:"text-xs text-slate-500 flex items-center gap-0.5"},ge={key:2,class:"text-xs text-slate-500"},ye={class:"flex items-center gap-1 ml-2 shrink-0"},xe={key:0,class:"text-xs text-slate-600 px-1"},be={key:0,class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center"},ke={class:"relative w-full sm:max-w-md bg-slate-900 border border-slate-800 rounded-t-3xl sm:rounded-2xl p-5 space-y-4"},we={class:"text-lg font-semibold"},he={class:"space-y-3"},Ce={class:"flex items-center gap-2"},Ve={class:"flex gap-2 pt-1"},Ae={key:1,class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center"},$e={class:"relative w-full sm:max-w-md bg-slate-900 border border-slate-800 rounded-t-3xl sm:rounded-2xl p-5 space-y-4 max-h-[90vh] overflow-y-auto"},Be={class:"text-lg font-semibold"},Ue={class:"space-y-3"},ze={class:"flex items-center justify-between"},je={key:0},Ne={class:"flex gap-2"},Fe=["onClick"],Ee={class:"flex gap-2 pt-1"},qe=J({__name:"activities",setup(Me){const _=ee(),A=g([]),j=g([]),y=g(!1),x=g(!1),h=g(null),C=g(null),$=g(""),d=M({name:"",icon:"i-heroicons-sparkles",color:"#6366f1"}),n=M({title:"",description:"",estimated_minutes:"",is_recurring:!1,recurrence_rule:"daily",tags:""});async function b(){[A.value,j.value]=await Promise.all([_.getBoredCategories(),_.getBoredActivities()])}K(b);function B(s){return j.value.filter(e=>e.category_id===s)}function O(s){$.value=s,C.value=null,Object.assign(n,{title:"",description:"",estimated_minutes:"",is_recurring:!1,recurrence_rule:"daily",tags:""}),x.value=!0}function S(s){C.value=s,$.value=s.category_id,Object.assign(n,{title:s.title,description:s.description,estimated_minutes:s.estimated_minutes??"",is_recurring:s.is_recurring,recurrence_rule:s.recurrence_rule??"daily",tags:s.tags.join(", ")}),x.value=!0}function T(){h.value=null,Object.assign(d,{name:"",icon:"i-heroicons-sparkles",color:"#6366f1"}),y.value=!0}function D(s){h.value=s,Object.assign(d,{name:s.name,icon:s.icon,color:s.color}),y.value=!0}async function I(){const s={name:d.name.trim(),icon:d.icon,color:d.color};s.name&&(h.value?await _.updateBoredCategory({id:h.value.id,...s}):await _.createBoredCategory({...s,is_system:!1,sort_order:A.value.length}),y.value=!1,await b())}async function q(s){s.is_system||(await _.deleteBoredCategory(s.id),await b())}async function R(){const s=n.estimated_minutes!==""?Number(n.estimated_minutes):null,e=n.tags.split(",").map(V=>V.trim()).filter(Boolean),a={title:n.title.trim(),description:n.description.trim(),category_id:$.value,estimated_minutes:s,is_recurring:n.is_recurring,recurrence_rule:n.is_recurring?n.recurrence_rule:null,tags:e,annotations:{}};a.title&&(C.value?await _.updateBoredActivity({id:C.value.id,...a}):await _.createBoredActivity(a),x.value=!1,await b())}async function H(s){await _.deleteBoredActivity(s.id),await b()}async function L(s){await _.archiveBoredActivity(s.id),await b()}return(s,e)=>{const a=Q,V=X,k=te,v=se,P=le,G=oe;return c(),u("div",ie,[l("div",ne,[o(a,{to:"/bored",variant:"ghost",color:"neutral",size:"sm",icon:"i-heroicons-arrow-left"}),e[13]||(e[13]=l("h1",{class:"text-xl font-bold"},"Manage Activities",-1))]),(c(!0),u(U,null,z(i(A),t=>(c(),u("div",{key:t.id,class:"space-y-2"},[l("div",ae,[l("div",re,[o(V,{name:t.icon,class:"w-4 h-4",style:W({color:t.color})},null,8,["name","style"]),l("span",ce,f(t.name),1),l("span",de,"("+f(B(t.id).length)+")",1)]),l("div",ue,[t.is_system?p("",!0):(c(),F(a,{key:0,variant:"ghost",color:"neutral",size:"xs",icon:"i-heroicons-pencil",onClick:r=>D(t)},null,8,["onClick"])),t.is_system?p("",!0):(c(),F(a,{key:1,variant:"ghost",color:"error",size:"xs",icon:"i-heroicons-trash",onClick:r=>q(t)},null,8,["onClick"])),o(a,{variant:"ghost",color:"neutral",size:"xs",icon:"i-heroicons-plus",onClick:r=>O(t.id)},null,8,["onClick"])])]),l("div",me,[(c(!0),u(U,null,z(B(t.id),r=>(c(),u("div",{key:r.id,class:"flex items-center justify-between bg-slate-900 border border-slate-800 rounded-xl px-4 py-3"},[l("div",_e,[l("p",{class:E(["text-sm font-medium truncate",r.is_done?"line-through text-slate-500":""])},f(r.title),3),l("div",fe,[r.estimated_minutes?(c(),u("span",pe,f(r.estimated_minutes)+"m ",1)):p("",!0),r.is_recurring?(c(),u("span",ve,[o(V,{name:"i-heroicons-arrow-path",class:"w-3 h-3"}),w(" "+f(r.recurrence_rule),1)])):p("",!0),r.done_count>0?(c(),u("span",ge," Ã—"+f(r.done_count),1)):p("",!0)])]),l("div",ye,[o(a,{variant:"ghost",color:"neutral",size:"xs",icon:"i-heroicons-pencil",onClick:N=>S(r)},null,8,["onClick"]),o(a,{variant:"ghost",color:"neutral",size:"xs",icon:"i-heroicons-archive-box",onClick:N=>L(r)},null,8,["onClick"]),o(a,{variant:"ghost",color:"error",size:"xs",icon:"i-heroicons-trash",onClick:N=>H(r)},null,8,["onClick"])])]))),128)),B(t.id).length===0?(c(),u("div",xe," No activities yet. ")):p("",!0)])]))),128)),o(a,{variant:"soft",color:"neutral",size:"sm",icon:"i-heroicons-plus",class:"w-full",onClick:T},{default:m(()=>[...e[14]||(e[14]=[w(" Add custom category ",-1)])]),_:1}),i(y)?(c(),u("div",be,[l("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e[0]||(e[0]=t=>y.value=!1)}),l("div",ke,[l("h2",we,f(i(h)?"Edit Category":"New Category"),1),l("div",he,[o(v,{label:"Name"},{default:m(()=>[o(k,{modelValue:i(d).name,"onUpdate:modelValue":e[1]||(e[1]=t=>i(d).name=t),placeholder:"Category name",class:"w-full"},null,8,["modelValue"])]),_:1}),o(v,{label:"Icon (Heroicons class)"},{default:m(()=>[o(k,{modelValue:i(d).icon,"onUpdate:modelValue":e[2]||(e[2]=t=>i(d).icon=t),placeholder:"i-heroicons-sparkles",class:"w-full"},null,8,["modelValue"])]),_:1}),o(v,{label:"Color"},{default:m(()=>[l("div",Ce,[Y(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>i(d).color=t),type:"color",class:"w-10 h-8 rounded border border-slate-700 bg-transparent cursor-pointer"},null,512),[[Z,i(d).color]]),o(k,{modelValue:i(d).color,"onUpdate:modelValue":e[4]||(e[4]=t=>i(d).color=t),placeholder:"#6366f1",class:"flex-1"},null,8,["modelValue"])])]),_:1})]),l("div",Ve,[o(a,{variant:"soft",color:"neutral",class:"flex-1",onClick:e[5]||(e[5]=t=>y.value=!1)},{default:m(()=>[...e[15]||(e[15]=[w("Cancel",-1)])]),_:1}),o(a,{color:"primary",class:"flex-1",onClick:I},{default:m(()=>[...e[16]||(e[16]=[w("Save",-1)])]),_:1})])])])):p("",!0),i(x)?(c(),u("div",Ae,[l("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e[6]||(e[6]=t=>x.value=!1)}),l("div",$e,[l("h2",Be,f(i(C)?"Edit Activity":"New Activity"),1),l("div",Ue,[o(v,{label:"Title",required:""},{default:m(()=>[o(k,{modelValue:i(n).title,"onUpdate:modelValue":e[7]||(e[7]=t=>i(n).title=t),placeholder:"Activity title",class:"w-full"},null,8,["modelValue"])]),_:1}),o(v,{label:"Description"},{default:m(()=>[o(P,{modelValue:i(n).description,"onUpdate:modelValue":e[8]||(e[8]=t=>i(n).description=t),placeholder:"Optional description",class:"w-full"},null,8,["modelValue"])]),_:1}),o(v,{label:"Estimated minutes"},{default:m(()=>[o(k,{modelValue:i(n).estimated_minutes,"onUpdate:modelValue":e[9]||(e[9]=t=>i(n).estimated_minutes=t),type:"number",min:"1",placeholder:"e.g. 20",class:"w-full"},null,8,["modelValue"])]),_:1}),l("div",ze,[e[17]||(e[17]=l("span",{class:"text-sm"},"Recurring",-1)),o(G,{modelValue:i(n).is_recurring,"onUpdate:modelValue":e[10]||(e[10]=t=>i(n).is_recurring=t)},null,8,["modelValue"])]),i(n).is_recurring?(c(),u("div",je,[o(v,{label:"Recurrence"},{default:m(()=>[l("div",Ne,[(c(),u(U,null,z(["daily","weekly","monthly"],t=>l("button",{key:t,class:E(["flex-1 py-1.5 rounded-lg text-sm font-medium capitalize transition-colors",i(n).recurrence_rule===t?"bg-primary-600 text-white":"bg-slate-800 text-slate-300"]),onClick:r=>i(n).recurrence_rule=t},f(t),11,Fe)),64))])]),_:1})])):p("",!0),o(v,{label:"Tags (comma-separated)"},{default:m(()=>[o(k,{modelValue:i(n).tags,"onUpdate:modelValue":e[11]||(e[11]=t=>i(n).tags=t),placeholder:"tag1, tag2",class:"w-full"},null,8,["modelValue"])]),_:1})]),l("div",Ee,[o(a,{variant:"soft",color:"neutral",class:"flex-1",onClick:e[12]||(e[12]=t=>x.value=!1)},{default:m(()=>[...e[18]||(e[18]=[w("Cancel",-1)])]),_:1}),o(a,{color:"primary",class:"flex-1",onClick:R},{default:m(()=>[...e[19]||(e[19]=[w("Save",-1)])]),_:1})])])])):p("",!0)])}}});export{qe as default};
