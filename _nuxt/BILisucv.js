import{e as Ne,K as Re,f as fe,g as Me,o as d,c as u,a as s,b as o,j as Ye,i as t,F as h,k as te,l as qe,t as m,p as _,w as r,d as v,m as N,r as w,G as R,n as q,y as x,x as C,z as se,D as Be,A as Pe}from"./BXS-ooRf.js";import{_ as ze}from"./DeYFpVP_.js";import{_ as We}from"./MFDmPvqo.js";import{_ as Ke}from"./C73Y16og.js";import{_ as Xe}from"./BnyXbyeO.js";import{u as Ge}from"./CCdyr2Lw.js";const Je={class:"space-y-5"},Qe={class:"flex items-center gap-2 -mb-1"},Ze={key:0,class:"text-center py-12 text-slate-500 text-sm"},et={class:"flex items-center gap-3"},tt={class:"flex-1 min-w-0"},st={class:"text-xl font-bold truncate"},lt={key:0,class:"text-sm text-slate-500 truncate"},at={key:0,class:"flex items-center gap-3 p-3 rounded-xl bg-amber-500/10 border border-amber-500/30"},nt={class:"text-sm text-amber-300 flex-1"},ot={class:"flex gap-3"},it={class:"text-2xl font-bold text-slate-100"},dt={class:"text-2xl font-bold text-slate-100"},rt={class:"text-2xl font-bold text-slate-100"},ut={class:"text-sm font-medium text-slate-300 pt-1"},ct={class:"flex items-center justify-between"},mt={class:"space-y-0.5"},pt={class:"text-sm text-slate-200"},ft={key:0,class:"text-xs text-slate-500"},xt={class:"px-4 pt-3.5 pb-3 flex items-center justify-between"},vt={class:"text-sm font-medium text-slate-200"},yt={class:"text-[11px] text-slate-500"},_t=["disabled","onClick"],gt={key:0,class:"px-4 py-3 text-xs text-slate-600"},bt={key:1,class:"px-4 py-3 space-y-3"},ht={class:"flex items-center gap-3"},wt={class:"space-y-1"},kt={class:"flex gap-1.5"},Ct=["onClick"],Dt={class:"flex justify-end gap-2"},Et={class:"grid grid-cols-7 gap-1 mb-1"},St={class:"grid grid-cols-7 gap-1"},Lt={class:"flex items-center justify-between"},At={class:"text-sm text-slate-300"},Vt={class:"text-xs text-slate-600"},It={class:"text-sm text-slate-300"},Tt={class:"text-xs text-slate-600"},$t={class:"flex items-center gap-3"},Ot={class:"text-sm font-medium text-slate-200"},Ut=["disabled","onClick"],Ft={class:"flex gap-3 pt-1"},jt={class:"p-4 space-y-4"},Ht={class:"space-y-2"},Nt={key:0,class:"flex flex-wrap gap-1"},Rt=["onClick"],Mt={class:"flex gap-2"},Yt=["onClick"],qt={class:"flex items-center gap-2"},Bt={class:"flex gap-2 mb-2"},Pt=["onClick"],zt={key:0,class:"flex items-center gap-2"},Wt={class:"flex items-center gap-1"},Kt={class:"w-5 text-center text-sm font-medium"},Xt={key:1,class:"flex gap-1.5"},Gt=["onClick"],Jt={key:0,class:"mt-2"},Qt={key:0,class:"mt-2 space-y-1.5"},Zt=["onClick"],es={key:1,class:"text-sm text-red-400 flex items-center gap-1.5"},ts={class:"flex justify-end gap-2 pt-2"},ss={class:"p-5 space-y-4"},ls={class:"flex items-start gap-3"},as={class:"w-10 h-10 rounded-full bg-amber-500/10 flex items-center justify-center flex-shrink-0"},ns={class:"space-y-1"},os={class:"font-semibold"},is={class:"flex justify-end gap-2"},ds={class:"p-5 space-y-4"},rs={class:"flex items-start gap-3"},us={class:"w-10 h-10 rounded-full bg-amber-500/10 flex items-center justify-center flex-shrink-0"},cs={class:"space-y-1"},ms={class:"font-semibold"},ps={class:"flex justify-end gap-2"},hs=Ne({__name:"[id]",setup(fs){const xe=Re(),b=Pe(),{impact:ve,notification:X}=Ge(),i=x(null),G=x([]),S=x([]),I=x([]),B=x(!0),le=x(!1),ae=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ne=["Su","Mo","Tu","We","Th","Fr","Sa"];async function ye(){if(!b.isAvailable){B.value=!1;return}const a=xe.params.id,e=new Date().toISOString().slice(0,10),c=new Date;c.setDate(c.getDate()-89);const p=c.toISOString().slice(0,10),[f,y,k,Y]=await Promise.all([b.getHabits(),b.getCompletionsForHabit(a,p,e),b.getHabitLogsForHabit(a,p,e),b.getRemindersForHabit(a)]);if(i.value=f.find(l=>l.id===a)??null,!i.value){le.value=!0,B.value=!1;return}G.value=y,S.value=k,I.value=Y,B.value=!1}const _e=C(()=>{const a=i.value?.schedule;return!a||a.schedule_type==="DAILY"?"Daily":a.schedule_type==="WEEKLY_FLEX"?`${a.frequency_count??1}× per week`:a.schedule_type==="SPECIFIC_DAYS"?(a.days_of_week??[]).map(e=>ae[e]).join(" · ")||"No days selected":"Daily"}),oe=C(()=>new Set(G.value.map(a=>a.date))),J=new Date().toISOString().slice(0,10),ge=C(()=>{const a=new Date,e=new Date(a);return e.setDate(a.getDate()-a.getDay()),e.setDate(e.getDate()-35),Array.from({length:42},(c,p)=>{const f=new Date(e);f.setDate(e.getDate()+p);const y=f.toISOString().slice(0,10);return{dateStr:y,day:f.getDate(),done:oe.value.has(y),isToday:y===J,future:y>J}})}),be=C(()=>{let a=0;const e=new Date;for(;oe.value.has(e.toISOString().slice(0,10));)a++,e.setDate(e.getDate()-1);return a}),Q=C(()=>S.value.reduce((a,e)=>a+e.value,0)),he=C(()=>{if(!S.value.length)return 0;const a=new Set(S.value.map(e=>e.date)).size;return Math.round(Q.value/a*10)/10}),ie=C(()=>[...G.value].sort((a,e)=>e.completed_at.localeCompare(a.completed_at)).slice(0,5)),de=C(()=>[...S.value].sort((a,e)=>e.logged_at.localeCompare(a.logged_at)).slice(0,10));function re(a){return new Date(a).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function ue(a){return new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}function ce(a){return new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}const P=se(new Set);async function we(a){if(!P.has(a)){P.add(a);try{await b.deleteHabitLog(a),S.value=S.value.filter(e=>e.id!==a)}finally{P.delete(a)}}}const L=x(!1),T=x(null);fe(L,a=>{a||(T.value=null)});const n=se({name:"",description:"",type:"BOOLEAN",target_value:1,schedule_type:"DAILY",frequency_count:3,days_of_week:[],tags:[],show_due_time:!1,due_time:""}),z=x(!1),$=x(""),D=x([]),O=x(!1);function ke(){const a=$.value.replace(/,$/,"").trim();a&&!a.startsWith("habitat-")&&!n.tags.includes(a)&&n.tags.push(a),$.value=""}function Ce(a){const e=n.tags.indexOf(a);e>=0&&n.tags.splice(e,1)}function De(a){(a.key==="Enter"||a.key===",")&&(a.preventDefault(),ke())}function Ee(){D.value.push({key:"",value:""})}function Se(a){D.value.splice(a,1)}function Le(){return n.type==="NUMERIC"&&(n.schedule_type==="SPECIFIC_DAYS"||n.schedule_type==="WEEKLY_FLEX"&&n.frequency_count>1)?"Metric habits can only be daily or 1× per week.":n.type==="LIMIT"&&n.schedule_type!=="DAILY"?"Limit habits must be daily.":null}fe([()=>n.type,()=>n.schedule_type,()=>n.frequency_count],()=>{T.value=null});function Ae(a){const e=n.days_of_week.indexOf(a);e>=0?n.days_of_week.splice(e,1):(n.days_of_week.push(a),n.days_of_week.sort((c,p)=>c-p))}function me(){if(!i.value)return;const a=i.value.schedule;n.name=i.value.name,n.description=i.value.description,n.type=i.value.type,n.target_value=i.value.target_value,n.schedule_type=a?.schedule_type??"DAILY",n.frequency_count=a?.frequency_count??3,n.days_of_week=a?.days_of_week?[...a.days_of_week]:[],n.tags=[...i.value.tags],n.show_due_time=!!a?.due_time,n.due_time=a?.due_time??"",$.value="",D.value=Object.entries(i.value.annotations).map(([e,c])=>({key:e,value:c})),O.value=D.value.length>0,L.value=!0}async function Ve(){if(!i.value||!n.name.trim())return;const a=Le();if(a){T.value=a;return}T.value=null,z.value=!0;try{const e={};for(const{key:f,value:y}of D.value)f.trim()&&(e[f.trim()]=y);const c=await b.updateHabit({id:i.value.id,name:n.name.trim(),description:n.description.trim(),type:n.type,target_value:n.target_value,tags:[...n.tags],annotations:e}),p=c.schedule;if(p){const f=await b.updateHabitSchedule({id:p.id,schedule_type:n.schedule_type,frequency_count:n.schedule_type==="WEEKLY_FLEX"?n.frequency_count:null,days_of_week:n.schedule_type==="SPECIFIC_DAYS"?[...n.days_of_week]:null,due_time:n.show_due_time&&n.due_time?n.due_time:null});i.value={...c,schedule:f}}else i.value=c;L.value=!1,await X("success")}finally{z.value=!1}}const U=x(!1),F=x(""),j=x(!1),Z=new Date;Z.setDate(Z.getDate()+1);const Ie=Z.toISOString().slice(0,10),pe=C(()=>{const a=i.value?.paused_until;return a!=null&&a>=J});async function Te(){if(!(!i.value||!F.value)){j.value=!0;try{i.value=await b.pauseHabit(i.value.id,F.value),U.value=!1,await X("success")}finally{j.value=!1}}}async function $e(){if(i.value){j.value=!0;try{i.value=await b.pauseHabit(i.value.id,null),await ve("medium")}finally{j.value=!1}}}const M=x(!1),ee=x(!1);async function Oe(){if(i.value){ee.value=!0;try{await b.archiveHabit(i.value.id),await X("success"),await Be("/habits")}finally{ee.value=!1}}}const A=x(!1),V=x(""),E=x([]),W=x(!1),K=se(new Set);function Ue(a){return!a.days_active||a.days_active.length===0?"Every day":a.days_active.map(e=>ae[e]).join(", ")}function Fe(a){const e=E.value.indexOf(a);e>=0?E.value.splice(e,1):(E.value.push(a),E.value.sort((c,p)=>c-p))}async function je(){if(!(!i.value||!V.value)){W.value=!0;try{const a=await b.createReminder(i.value.id,V.value,E.value.length?[...E.value]:null);I.value.push(a),V.value="",E.value=[],A.value=!1}finally{W.value=!1}}}async function He(a){if(!K.has(a)){K.add(a);try{await b.deleteReminder(a),I.value=I.value.filter(e=>e.id!==a)}finally{K.delete(a)}}}return Me(ye),(a,e)=>{const c=Ye,p=qe,f=ze,y=We,k=Ke,Y=Xe;return d(),u("div",Je,[s("div",Qe,[o(c,{icon:"i-heroicons-arrow-left",variant:"ghost",color:"neutral",size:"sm",to:"/habits"}),e[21]||(e[21]=s("span",{class:"text-sm text-slate-500"},"Habits",-1))]),t(le)?(d(),u("div",Ze," Habit not found. ")):!t(B)&&t(i)?(d(),u(h,{key:1},[s("div",et,[s("div",{class:"w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0",style:te({backgroundColor:t(i).color+"33"})},[o(p,{name:t(i).icon,class:"w-6 h-6",style:te({color:t(i).color})},null,8,["name","style"])],4),s("div",tt,[s("h2",st,m(t(i).name),1),t(i).description?(d(),u("p",lt,m(t(i).description),1)):_("",!0)])]),t(pe)?(d(),u("div",at,[o(p,{name:"i-heroicons-pause-circle",class:"w-5 h-5 text-amber-400 flex-shrink-0"}),s("p",nt," Paused until "+m(ce(t(i).paused_until)),1),o(c,{size:"xs",color:"warning",variant:"soft",loading:t(j),onClick:$e},{default:r(()=>[...e[22]||(e[22]=[v(" Resume ",-1)])]),_:1},8,["loading"])])):_("",!0),s("div",ot,[t(i).type==="BOOLEAN"?(d(),N(f,{key:0,ui:{root:"rounded-2xl flex-1",body:"p-3 sm:p-3 space-y-0.5"}},{default:r(()=>[e[24]||(e[24]=s("p",{class:"text-[11px] text-slate-500"},"Current streak",-1)),s("p",it,[v(m(t(be))+" ",1),e[23]||(e[23]=s("span",{class:"text-sm font-normal text-slate-500"},"days",-1))])]),_:1})):(d(),u(h,{key:1},[o(f,{ui:{root:"rounded-2xl flex-1",body:"p-3 sm:p-3 space-y-0.5"}},{default:r(()=>[e[25]||(e[25]=s("p",{class:"text-[11px] text-slate-500"},"Total logged",-1)),s("p",dt,m(t(Q).toFixed(t(Q)%1===0?0:1)),1)]),_:1}),o(f,{ui:{root:"rounded-2xl flex-1",body:"p-3 sm:p-3 space-y-0.5"}},{default:r(()=>[e[26]||(e[26]=s("p",{class:"text-[11px] text-slate-500"},"Avg / day",-1)),s("p",rt,m(t(he)),1)]),_:1})],64)),o(f,{ui:{root:"rounded-2xl flex-1",body:"p-3 sm:p-3 space-y-0.5"}},{default:r(()=>[e[27]||(e[27]=s("p",{class:"text-[11px] text-slate-500"},"Tracked since",-1)),s("p",ut,m(ce(t(i).created_at)),1)]),_:1})]),o(f,{ui:{root:"rounded-2xl",body:"p-4 sm:p-4"}},{default:r(()=>[s("div",ct,[s("div",mt,[e[28]||(e[28]=s("p",{class:"text-xs font-semibold text-slate-400"},"Schedule",-1)),s("p",pt,m(t(_e)),1),t(i).schedule?.due_time?(d(),u("p",ft," Due at "+m(t(i).schedule.due_time),1)):_("",!0)]),o(c,{size:"xs",variant:"ghost",color:"neutral",onClick:me},{default:r(()=>[...e[29]||(e[29]=[v("Edit",-1)])]),_:1})])]),_:1}),o(f,{ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:r(()=>[s("div",xt,[e[30]||(e[30]=s("p",{class:"text-xs font-semibold text-slate-400"},"Reminders",-1)),o(c,{size:"xs",variant:"ghost",color:"neutral",icon:t(A)?"i-heroicons-chevron-up":"i-heroicons-plus",onClick:e[0]||(e[0]=l=>A.value=!t(A))},null,8,["icon"])]),(d(!0),u(h,null,w(t(I),l=>(d(),u("div",{key:l.id,class:"flex items-center justify-between px-4 py-2.5"},[s("div",null,[s("p",vt,m(l.trigger_time),1),s("p",yt,m(Ue(l)),1)]),s("button",{class:"text-slate-700 hover:text-red-400 transition-colors",disabled:t(K).has(l.id),onClick:g=>He(l.id)},[o(p,{name:"i-heroicons-trash",class:"w-4 h-4"})],8,_t)]))),128)),t(I).length===0&&!t(A)?(d(),u("div",gt," No reminders set. ")):_("",!0),t(A)?(d(),u("div",bt,[s("div",ht,[o(y,{modelValue:t(V),"onUpdate:modelValue":e[1]||(e[1]=l=>R(V)?V.value=l:null),type:"time",class:"w-32"},null,8,["modelValue"]),e[31]||(e[31]=s("span",{class:"text-xs text-slate-500"},"Remind me at this time",-1))]),s("div",wt,[e[32]||(e[32]=s("p",{class:"text-[11px] text-slate-500"},"Days (leave blank for every day)",-1)),s("div",kt,[(d(),u(h,null,w(ne,(l,g)=>s("button",{key:g,class:q(["w-8 h-8 rounded-full text-xs font-medium border transition-colors",t(E).includes(g)?"bg-primary-500/20 border-primary-500 text-primary-300":"border-slate-700 text-slate-500 hover:border-slate-600"]),onClick:H=>Fe(g)},m(l),11,Ct)),64))])]),s("div",Dt,[o(c,{size:"xs",variant:"ghost",color:"neutral",onClick:e[2]||(e[2]=l=>A.value=!1)},{default:r(()=>[...e[33]||(e[33]=[v("Cancel",-1)])]),_:1}),o(c,{size:"xs",disabled:!t(V)||t(W),loading:t(W),onClick:je},{default:r(()=>[...e[34]||(e[34]=[v(" Add ",-1)])]),_:1},8,["disabled","loading"])])])):_("",!0)]),_:1}),t(i).type==="BOOLEAN"?(d(),N(f,{key:1,ui:{root:"rounded-2xl",body:"p-4 sm:p-4 space-y-2"}},{default:r(()=>[e[35]||(e[35]=s("p",{class:"text-xs font-semibold text-slate-400 mb-3"},"Activity",-1)),s("div",Et,[(d(),u(h,null,w(["S","M","T","W","T","F","S"],l=>s("div",{key:l,class:"text-center text-[10px] text-slate-600 font-medium"},m(l),1)),64))]),s("div",St,[(d(!0),u(h,null,w(t(ge),l=>(d(),u("div",{key:l.dateStr,class:"aspect-square flex items-center justify-center"},[s("div",{class:q(["w-7 h-7 rounded-full flex items-center justify-center text-[10px] font-medium transition-colors",{"text-white":l.done,"ring-1 ring-inset ring-primary-500 text-primary-400":l.isToday&&!l.done,"text-slate-700":!l.done&&!l.isToday&&!l.future,"text-slate-800":l.future}]),style:te(l.done?{backgroundColor:t(i).color}:{})},m(l.day),7)]))),128))])]),_:1})):_("",!0),t(pe)?_("",!0):(d(),N(f,{key:2,ui:{root:"rounded-2xl",body:"p-4 sm:p-4"}},{default:r(()=>[s("div",Lt,[e[37]||(e[37]=s("div",null,[s("p",{class:"text-sm font-medium text-slate-300"},"Pause habit"),s("p",{class:"text-xs text-slate-500"},"Hide from today screen until a date")],-1)),o(c,{size:"xs",variant:"soft",color:"neutral",onClick:e[3]||(e[3]=l=>U.value=!0)},{default:r(()=>[...e[36]||(e[36]=[v(" Pause ",-1)])]),_:1})])]),_:1})),t(i).type==="BOOLEAN"&&t(ie).length?(d(),N(f,{key:3,ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:r(()=>[e[38]||(e[38]=s("div",{class:"px-4 pt-3 pb-2"},[s("p",{class:"text-xs font-semibold text-slate-400"},"Log History")],-1)),(d(!0),u(h,null,w(t(ie),l=>(d(),u("div",{key:l.id,class:"flex items-center justify-between px-4 py-3"},[s("p",At,m(re(l.completed_at)),1),s("p",Vt,m(ue(l.completed_at))+" — Completed",1)]))),128))]),_:1})):_("",!0),t(i).type!=="BOOLEAN"&&t(de).length?(d(),N(f,{key:4,ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:r(()=>[e[39]||(e[39]=s("div",{class:"px-4 pt-3 pb-2"},[s("p",{class:"text-xs font-semibold text-slate-400"},"Log History")],-1)),(d(!0),u(h,null,w(t(de),l=>(d(),u("div",{key:l.id,class:"flex items-center justify-between px-4 py-3"},[s("div",null,[s("p",It,m(re(l.logged_at)),1),s("p",Tt,m(ue(l.logged_at)),1)]),s("div",$t,[s("span",Ot,m(l.value),1),s("button",{class:"text-slate-700 hover:text-red-400 transition-colors",disabled:t(P).has(l.id),onClick:g=>we(l.id)},[o(p,{name:"i-heroicons-trash",class:"w-4 h-4"})],8,Ut)])]))),128))]),_:1})):_("",!0),s("div",Ft,[o(c,{variant:"outline",color:"neutral",class:"flex-1 justify-center",onClick:me},{default:r(()=>[...e[40]||(e[40]=[v(" Edit Habit ",-1)])]),_:1}),o(c,{variant:"soft",color:"error",class:"flex-1 justify-center",onClick:e[4]||(e[4]=l=>M.value=!0)},{default:r(()=>[...e[41]||(e[41]=[v(" Archive ",-1)])]),_:1})])],64)):_("",!0),o(Y,{open:t(L),"onUpdate:open":e[15]||(e[15]=l=>R(L)?L.value=l:null)},{content:r(()=>[s("div",jt,[e[48]||(e[48]=s("h3",{class:"text-lg font-semibold"},"Edit Habit",-1)),o(k,{label:"Name",required:""},{default:r(()=>[o(y,{modelValue:t(n).name,"onUpdate:modelValue":e[5]||(e[5]=l=>t(n).name=l),autofocus:""},null,8,["modelValue"])]),_:1}),o(k,{label:"Description"},{default:r(()=>[o(y,{modelValue:t(n).description,"onUpdate:modelValue":e[6]||(e[6]=l=>t(n).description=l),placeholder:"Optional description"},null,8,["modelValue"])]),_:1}),o(k,{label:"Tags"},{default:r(()=>[s("div",Ht,[t(n).tags.length?(d(),u("div",Nt,[(d(!0),u(h,null,w(t(n).tags,l=>(d(),u("span",{key:l,class:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-800 border border-slate-700 text-xs text-slate-300"},[v(m(l)+" ",1),s("button",{class:"text-slate-500 hover:text-white leading-none",onClick:g=>Ce(l)},"×",8,Rt)]))),128))])):_("",!0),o(y,{modelValue:t($),"onUpdate:modelValue":e[7]||(e[7]=l=>R($)?$.value=l:null),placeholder:"Add tag, press Enter",onKeydown:De},null,8,["modelValue"])])]),_:1}),o(k,{label:"Type"},{default:r(()=>[s("div",Mt,[(d(),u(h,null,w(["BOOLEAN","NUMERIC","LIMIT"],l=>s("button",{key:l,class:q(["flex-1 py-1.5 px-2 rounded-lg text-xs font-medium border transition-colors",t(n).type===l?"bg-primary-500/20 border-primary-500 text-primary-300":"border-slate-700 text-slate-400 hover:border-slate-600"]),onClick:g=>t(n).type=l},m(l==="BOOLEAN"?"✓ Done":l==="NUMERIC"?"# Metric":"↓ Limit"),11,Yt)),64))])]),_:1}),t(n).type!=="BOOLEAN"?(d(),N(k,{key:0,label:t(n).type==="NUMERIC"?"Target":"Limit"},{default:r(()=>[s("div",qt,[o(y,{modelValue:t(n).target_value,"onUpdate:modelValue":e[8]||(e[8]=l=>t(n).target_value=l),modelModifiers:{number:!0},type:"number",min:"0.1",step:"any",class:"w-28"},null,8,["modelValue"]),e[42]||(e[42]=s("span",{class:"text-sm text-slate-500"},"per day",-1))])]),_:1},8,["label"])):_("",!0),o(k,{label:"Schedule"},{default:r(()=>[s("div",Bt,[(d(),u(h,null,w(["DAILY","WEEKLY_FLEX","SPECIFIC_DAYS"],l=>s("button",{key:l,class:q(["flex-1 py-1.5 px-1 rounded-lg text-xs font-medium border transition-colors",t(n).schedule_type===l?"bg-slate-700 border-slate-500 text-slate-100":"border-slate-700 text-slate-400 hover:border-slate-600"]),onClick:g=>t(n).schedule_type=l},m(l==="DAILY"?"Daily":l==="WEEKLY_FLEX"?"N× week":"Specific days"),11,Pt)),64))]),t(n).schedule_type==="WEEKLY_FLEX"?(d(),u("div",zt,[e[43]||(e[43]=s("span",{class:"text-sm text-slate-400"},"Times per week:",-1)),s("div",Wt,[s("button",{class:"w-7 h-7 rounded-lg bg-slate-800 border border-slate-700 text-slate-300 flex items-center justify-center text-sm",onClick:e[9]||(e[9]=l=>t(n).frequency_count=Math.max(1,t(n).frequency_count-1))},"−"),s("span",Kt,m(t(n).frequency_count),1),s("button",{class:"w-7 h-7 rounded-lg bg-slate-800 border border-slate-700 text-slate-300 flex items-center justify-center text-sm",onClick:e[10]||(e[10]=l=>t(n).frequency_count=Math.min(7,t(n).frequency_count+1))},"+")])])):_("",!0),t(n).schedule_type==="SPECIFIC_DAYS"?(d(),u("div",Xt,[(d(),u(h,null,w(ne,(l,g)=>s("button",{key:g,class:q(["w-8 h-8 rounded-full text-xs font-medium border transition-colors",t(n).days_of_week.includes(g)?"bg-primary-500/20 border-primary-500 text-primary-300":"border-slate-700 text-slate-500 hover:border-slate-600"]),onClick:H=>Ae(g)},m(l),11,Gt)),64))])):_("",!0)]),_:1}),s("div",null,[s("button",{class:"text-xs text-slate-500 hover:text-slate-400 flex items-center gap-1",onClick:e[11]||(e[11]=l=>t(n).show_due_time=!t(n).show_due_time)},[o(p,{name:t(n).show_due_time?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-3.5 h-3.5"},null,8,["name"]),v(" "+m(t(n).show_due_time?"Remove due time":"Add due time"),1)]),t(n).show_due_time?(d(),u("div",Jt,[o(y,{modelValue:t(n).due_time,"onUpdate:modelValue":e[12]||(e[12]=l=>t(n).due_time=l),type:"time",class:"w-32"},null,8,["modelValue"])])):_("",!0)]),s("div",null,[s("button",{class:"text-xs text-slate-500 hover:text-slate-400 flex items-center gap-1",onClick:e[13]||(e[13]=l=>O.value=!t(O))},[o(p,{name:t(O)?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-3.5 h-3.5"},null,8,["name"]),v(" "+m(t(O)?"Hide annotations":t(D).length>0?`Annotations (${t(D).length})`:"Add annotations"),1)]),t(O)?(d(),u("div",Qt,[(d(!0),u(h,null,w(t(D),(l,g)=>(d(),u("div",{key:g,class:"flex items-center gap-1.5"},[o(y,{modelValue:l.key,"onUpdate:modelValue":H=>l.key=H,placeholder:"key",class:"w-24 shrink-0"},null,8,["modelValue","onUpdate:modelValue"]),e[44]||(e[44]=s("span",{class:"text-slate-600 text-xs"},":",-1)),o(y,{modelValue:l.value,"onUpdate:modelValue":H=>l.value=H,placeholder:"value",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),s("button",{class:"text-slate-700 hover:text-red-400 transition-colors",onClick:H=>Se(g)},[o(p,{name:"i-heroicons-x-mark",class:"w-3.5 h-3.5"})],8,Zt)]))),128)),s("button",{class:"text-xs text-slate-500 hover:text-slate-400 flex items-center gap-1",onClick:Ee},[o(p,{name:"i-heroicons-plus",class:"w-3 h-3"}),e[45]||(e[45]=v(" Add annotation ",-1))])])):_("",!0)]),t(T)?(d(),u("p",es,[o(p,{name:"i-heroicons-exclamation-circle",class:"w-4 h-4 flex-shrink-0"}),v(" "+m(t(T)),1)])):_("",!0),s("div",ts,[o(c,{variant:"ghost",color:"neutral",onClick:e[14]||(e[14]=l=>L.value=!1)},{default:r(()=>[...e[46]||(e[46]=[v("Cancel",-1)])]),_:1}),o(c,{disabled:!t(n).name.trim()||t(z),loading:t(z),onClick:Ve},{default:r(()=>[...e[47]||(e[47]=[v(" Save ",-1)])]),_:1},8,["disabled","loading"])])])]),_:1},8,["open"]),o(Y,{open:t(U),"onUpdate:open":e[18]||(e[18]=l=>R(U)?U.value=l:null)},{content:r(()=>[s("div",ss,[s("div",ls,[s("div",as,[o(p,{name:"i-heroicons-pause-circle",class:"w-5 h-5 text-amber-400"})]),s("div",ns,[s("p",os,'Pause "'+m(t(i)?.name)+'"',1),e[49]||(e[49]=s("p",{class:"text-sm text-slate-400"},"Choose when to resume. The habit will be hidden until then.",-1))])]),o(k,{label:"Resume on"},{default:r(()=>[o(y,{modelValue:t(F),"onUpdate:modelValue":e[16]||(e[16]=l=>R(F)?F.value=l:null),type:"date",min:t(Ie)},null,8,["modelValue","min"])]),_:1}),s("div",is,[o(c,{variant:"ghost",color:"neutral",onClick:e[17]||(e[17]=l=>U.value=!1)},{default:r(()=>[...e[50]||(e[50]=[v("Cancel",-1)])]),_:1}),o(c,{color:"warning",disabled:!t(F),loading:t(j),onClick:Te},{default:r(()=>[...e[51]||(e[51]=[v(" Pause ",-1)])]),_:1},8,["disabled","loading"])])])]),_:1},8,["open"]),o(Y,{open:t(M),"onUpdate:open":e[20]||(e[20]=l=>R(M)?M.value=l:null)},{content:r(()=>[s("div",ds,[s("div",rs,[s("div",us,[o(p,{name:"i-heroicons-archive-box",class:"w-5 h-5 text-amber-400"})]),s("div",cs,[s("p",ms,'Archive "'+m(t(i)?.name)+'"?',1),e[52]||(e[52]=s("p",{class:"text-sm text-slate-400"},"The habit and all its history will be preserved in your archive.",-1))])]),s("div",ps,[o(c,{variant:"ghost",color:"neutral",onClick:e[19]||(e[19]=l=>M.value=!1)},{default:r(()=>[...e[53]||(e[53]=[v("Cancel",-1)])]),_:1}),o(c,{color:"warning",loading:t(ee),onClick:Oe},{default:r(()=>[...e[54]||(e[54]=[v("Archive",-1)])]),_:1},8,["loading"])])])]),_:1},8,["open"])])}}});export{hs as default};
