import{ac as v,aJ as A,a2 as j,a3 as I,aT as M,o as r,m as d,w,b,l as _,i as e,n as g,Q as N,j as C,x as B,e as P,K as $,aU as T,c as q,a as h,h as V,p as y,X as F,k as z,F as E,r as U,d as H,t as L}from"./Bh4stn2M.js";import{_ as O}from"./ChX89ksB.js";import{u as D}from"./B-Wc9cTa.js";const W=()=>v("color-mode").value,J=Object.assign({inheritAttrs:!1},{__name:"UColorModeButton",props:{color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"ghost"},label:{type:String,required:!1},activeColor:{type:null,required:!1},activeVariant:{type:null,required:!1},size:{type:null,required:!1},square:{type:Boolean,required:!1},block:{type:Boolean,required:!1},loadingAuto:{type:Boolean,required:!1},onClick:{type:[Function,Array],required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:null,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:null,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1},as:{type:null,required:!1},type:{type:null,required:!1},disabled:{type:Boolean,required:!1},exactActiveClass:{type:String,required:!1},viewTransition:{type:Boolean,required:!1}},setup(k){const a=k,{t:s}=A(),l=W(),p=j(),t=I(M(a,"icon")),i=B({get(){return l.value==="dark"},set(c){l.preference=c?"dark":"light"}});return(c,u)=>(r(),d(C,N({...e(t),"aria-label":i.value?e(s)("colorMode.switchToLight"):e(s)("colorMode.switchToDark"),...c.$attrs},{onClick:u[0]||(u[0]=o=>i.value=!i.value)}),{leading:w(({ui:o})=>[b(_,{class:g(o.leadingIcon({class:[a.ui?.leadingIcon,"hidden dark:inline-block"]})),name:e(p).ui.icons.dark},null,8,["class","name"]),b(_,{class:g(o.leadingIcon({class:[a.ui?.leadingIcon,"dark:hidden"]})),name:e(p).ui.icons.light},null,8,["class","name"])]),_:1},16))}}),K={class:"min-h-screen bg-slate-950 text-slate-100 flex flex-col"},Q={class:"border-b border-slate-800 px-4 py-3 flex items-center justify-between"},R={class:"flex items-center gap-1"},Z=P({__name:"default",setup(k){const a=$(),{$dbError:s}=T(),l=v("eviction-detected",()=>!1),p=v("opfs-unsupported",()=>!1),{settings:t}=D(),i=[{to:"/",icon:"i-heroicons-home",label:"Today",today:!0},{to:"/week",icon:"i-heroicons-calendar-days",label:"Week",week:!0},{to:"/habits",icon:"i-heroicons-list-bullet",label:"Habits"},{to:"/health",icon:"i-heroicons-heart",label:"Health",health:!0},{to:"/checkin",icon:"i-heroicons-pencil-square",label:"Check-in",journalling:!0},{to:"/scribbles",icon:"i-heroicons-pencil",label:"Scribbles",journalling:!0},{to:"/voice",icon:"i-heroicons-microphone",label:"Voice",journalling:!0},{to:"/stats",icon:"i-heroicons-chart-bar",label:"Stats"}],c=B(()=>i.filter(o=>!(o.today&&!t.value.enableToday||o.week&&!t.value.enableWeek||o.health&&!t.value.enableHealth||o.journalling&&!t.value.enableJournalling)));function u(o){return o==="/"?a.path==="/":a.path.startsWith(o)}return(o,f)=>{const x=C,S=J,m=O;return r(),q("div",K,[h("header",Q,[f[1]||(f[1]=V('<div class="flex items-center gap-2"><svg class="plant-logo w-6 h-[1.625rem]" viewBox="0 0 40 44" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M 8,40 C 12,37 28,37 32,40" stroke="currentColor" stroke-width="3" fill="none" stroke-linecap="round"></path><line x1="20" y1="40" x2="20" y2="24" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"></line><path d="M 20,24 C 11,23 4,29 8,34 C 11,37 19,30 20,24" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></path><path d="M 20,24 C 26,20 32,14 30,8 C 28,5 20,13 20,24" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="text-lg font-semibold tracking-tight">Habitat</span></div>',1)),h("div",R,[b(x,{to:"/settings",icon:"i-heroicons-cog-6-tooth",variant:"ghost",color:"neutral",size:"sm",class:g(u("/settings")?"text-primary-400":"")},null,8,["class"]),b(S)])]),e(p)?(r(),d(m,{key:0,title:"Browser not supported",description:"Habitat requires the Origin Private File System (OPFS) API, which is not available in this browser. Please use a modern browser such as Chrome, Firefox, or Safari 17+.",color:"error",variant:"soft",icon:"i-heroicons-exclamation-triangle",class:"rounded-none border-0 border-b border-red-900/50"})):y("",!0),e(s)?(r(),d(m,{key:1,description:e(s),color:"error",variant:"soft",icon:"i-heroicons-exclamation-triangle",class:"rounded-none border-0 border-b border-red-900/50"},null,8,["description"])):y("",!0),e(l)?(r(),d(m,{key:2,title:"Storage may have been cleared",description:"Your browser appears to have cleared on-device storage. If data is missing, use Export in Settings regularly to back up.",color:"warning",variant:"soft",icon:"i-heroicons-exclamation-triangle","close-button":{icon:"i-heroicons-x-mark",variant:"ghost",color:"neutral",size:"sm"},class:"rounded-none border-0 border-b border-amber-900/50",onClose:f[0]||(f[0]=n=>l.value=!1)})):y("",!0),h("main",{class:"flex-1 p-4 pb-2",style:z(e(t).stickyNav?{paddingBottom:e(t).navExtraPadding?"80px":"60px"}:{})},[F(o.$slots,"default")],4),h("nav",{class:g(["border-t border-slate-800 px-1 py-1 flex justify-around",[e(t).stickyNav?"fixed bottom-0 inset-x-0 z-30 bg-slate-950":"safe-area-bottom",e(t).navExtraPadding?"pb-5":""]])},[(r(!0),q(E,null,U(e(c),n=>(r(),d(x,{key:n.to,to:n.to,icon:n.icon,color:u(n.to)?"primary":"neutral",variant:"ghost",ui:{base:"flex-col gap-0.5 h-auto py-2 px-3 text-xs"}},{default:w(()=>[H(L(n.label),1)]),_:2},1032,["to","icon","color"]))),128))],2)])}}});export{Z as default};
