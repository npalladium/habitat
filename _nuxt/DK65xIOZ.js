import{a0 as x,aq as j,S as I,ac as M,ar as P,o as a,m as u,w as C,b as g,l as _,i as e,n as m,Y as T,j as B,x as S,e as N,L as $,as as E,c as y,a as b,h as F,k,p as h,W as O,F as V,r as z,t as L}from"./IgzNwamV.js";import{_ as D}from"./DDqyIYp0.js";import{u as H}from"./bw2NYF_B.js";const U=()=>x("color-mode").value,W=Object.assign({inheritAttrs:!1},{__name:"UColorModeButton",props:{color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"ghost"},label:{type:String,required:!1},activeColor:{type:null,required:!1},activeVariant:{type:null,required:!1},size:{type:null,required:!1},square:{type:Boolean,required:!1},block:{type:Boolean,required:!1},loadingAuto:{type:Boolean,required:!1},onClick:{type:[Function,Array],required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:null,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:null,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1},as:{type:null,required:!1},type:{type:null,required:!1},disabled:{type:Boolean,required:!1},exactActiveClass:{type:String,required:!1},viewTransition:{type:Boolean,required:!1}},setup(q){const n=q,{t:l}=j(),i=U(),p=I(),o=M(P(n,"icon")),c=S({get(){return i.value==="dark"},set(r){i.preference=r?"dark":"light"}});return(r,d)=>(a(),u(B,T({...e(o),"aria-label":c.value?e(l)("colorMode.switchToLight"):e(l)("colorMode.switchToDark"),...r.$attrs},{onClick:d[0]||(d[0]=t=>c.value=!c.value)}),{leading:C(({ui:t})=>[g(_,{class:m(t.leadingIcon({class:[n.ui?.leadingIcon,"hidden dark:inline-block"]})),name:e(p).ui.icons.dark},null,8,["class","name"]),g(_,{class:m(t.leadingIcon({class:[n.ui?.leadingIcon,"dark:hidden"]})),name:e(p).ui.icons.light},null,8,["class","name"])]),_:1},16))}}),Y={class:"min-h-screen bg-slate-950 text-slate-100 flex flex-col"},J={class:"flex items-center gap-1"},R={key:0},X=N({__name:"default",setup(q){const n=$(),{$dbError:l}=E(),i=x("eviction-detected",()=>!1),p=x("opfs-unsupported",()=>!1),{settings:o}=H(),c=[{to:"/",icon:"i-heroicons-home",label:"Today",today:!0},{to:"/week",icon:"i-heroicons-calendar-days",label:"Week",week:!0},{to:"/habits",icon:"i-heroicons-list-bullet",label:"Habits"},{to:"/health",icon:"i-heroicons-heart",label:"Health",health:!0},{to:"/todos",icon:"i-heroicons-check-circle",label:"TODOs",todos:!0},{to:"/bored",icon:"i-heroicons-face-smile",label:"Bored",bored:!0},{to:"/checkin",icon:"i-heroicons-pencil-square",label:"Check-in",journalling:!0},{to:"/scribbles",icon:"i-heroicons-pencil",label:"Scribbles",journalling:!0},{to:"/voice",icon:"i-heroicons-microphone",label:"Voice",journalling:!0},{to:"/stats",icon:"i-heroicons-chart-bar",label:"Stats"}],r=S(()=>c.filter(t=>!(t.today&&!o.value.enableToday||t.week&&!o.value.enableWeek||t.health&&!o.value.enableHealth||t.journalling&&!o.value.enableJournalling||t.todos&&!o.value.enableTodos||t.bored&&!(o.value.enableTodos&&o.value.enableBored))));function d(t){return t==="/"?n.path==="/":n.path.startsWith(t)}return(t,f)=>{const w=B,A=W,v=D;return a(),y("div",Y,[b("header",{class:"border-b border-slate-800 px-4 pb-3 flex items-center justify-between",style:k({paddingTop:e(o).headerExtraPadding?"calc(1.25rem + env(safe-area-inset-top))":"calc(0.75rem + env(safe-area-inset-top))"})},[f[1]||(f[1]=F('<div class="flex items-center gap-2"><svg class="plant-logo w-6 h-[1.625rem]" viewBox="0 0 40 44" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M 8,40 C 12,37 28,37 32,40" stroke="currentColor" stroke-width="3" fill="none" stroke-linecap="round"></path><line x1="20" y1="40" x2="20" y2="24" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"></line><path d="M 20,24 C 11,23 4,29 8,34 C 11,37 19,30 20,24" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></path><path d="M 20,24 C 26,20 32,14 30,8 C 28,5 20,13 20,24" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="text-lg font-semibold tracking-tight">Habitat</span></div>',1)),b("div",J,[g(w,{to:"/settings",icon:"i-heroicons-cog-6-tooth",variant:"ghost",color:"neutral",size:"sm",class:m(d("/settings")?"text-primary-400":"")},null,8,["class"]),g(A)])],4),e(p)?(a(),u(v,{key:0,title:"Browser not supported",description:"Habitat requires the Origin Private File System (OPFS) API, which is not available in this browser. Please use a modern browser such as Chrome, Firefox, or Safari 17+.",color:"error",variant:"soft",icon:"i-heroicons-exclamation-triangle",class:"rounded-none border-0 border-b border-red-900/50"})):h("",!0),e(l)?(a(),u(v,{key:1,description:e(l),color:"error",variant:"soft",icon:"i-heroicons-exclamation-triangle",class:"rounded-none border-0 border-b border-red-900/50"},null,8,["description"])):h("",!0),e(i)?(a(),u(v,{key:2,title:"Storage may have been cleared",description:"Your browser appears to have cleared on-device storage. If data is missing, use Export in Settings regularly to back up.",color:"warning",variant:"soft",icon:"i-heroicons-exclamation-triangle","close-button":{icon:"i-heroicons-x-mark",variant:"ghost",color:"neutral",size:"sm"},class:"rounded-none border-0 border-b border-amber-900/50",onClose:f[0]||(f[0]=s=>i.value=!1)})):h("",!0),b("main",{class:"flex-1 p-4 pb-2",style:k(e(o).stickyNav?{paddingBottom:e(o).navExtraPadding?"calc(5.5rem + env(safe-area-inset-bottom))":"calc(4.5rem + env(safe-area-inset-bottom))"}:{})},[O(t.$slots,"default")],4),b("nav",{class:m(["border-t border-slate-800 py-1 flex justify-around overflow-x-auto [&::-webkit-scrollbar]:hidden [scrollbar-width:none]",e(o).stickyNav?"fixed bottom-0 inset-x-0 z-30 bg-slate-950":"safe-area-bottom"]),style:k(e(o).stickyNav?{paddingBottom:e(o).navExtraPadding?"calc(1.25rem + env(safe-area-inset-bottom))":"env(safe-area-inset-bottom)"}:void 0)},[(a(!0),y(V,null,z(e(r),s=>(a(),u(w,{key:s.to,to:s.to,icon:s.icon,color:d(s.to)?"primary":"neutral",variant:"ghost",ui:e(r).length>5?{base:"flex-shrink-0 h-auto py-2.5 px-2.5"}:{base:"flex-col gap-0.5 h-auto py-2 px-3 text-xs"}},{default:C(()=>[e(r).length<=5?(a(),y("span",R,L(s.label),1)):h("",!0)]),_:2},1032,["to","icon","color","ui"]))),128))],6)])}}});export{X as default};
