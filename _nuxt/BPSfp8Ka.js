import{x as X,O as us,P as cs,e as We,f as Ut,o as u,m as R,Q as Me,V as ps,R as fs,c as m,p as j,F,r as ue,S as vs,U as ms,W as Ot,w as C,X as Ce,i as a,s as xs,Y as ys,Z as at,$ as gs,a0 as Et,a1 as bs,a2 as Mt,a3 as hs,a4 as ks,a5 as ws,a6 as Ss,a as t,n as Z,b as f,l as Ee,d as w,t as z,a7 as _t,a8 as tt,a9 as _s,aa as Cs,ab as qs,ac as Is,y as A,L as Ht,ad as As,j as js,k as zs,q as Xe,H as et,G as Fe,A as Vs,ae as $s,z as ct}from"./C88IZ4eQ.js";import{L as Us,_ as Os}from"./ywH9vHHY.js";import{_ as Es}from"./Bp5a6D68.js";import{_ as Ms}from"./CtmOrbfs.js";import{_ as Hs}from"./D-F3uRNn.js";import{u as Ds}from"./FsJsiwfT.js";function Bs(l){return X(()=>us(l)?!!cs(l)?.closest("form"):!0)}var Ts=We({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(l){const s=l,{primitiveElement:n,currentElement:i}=fs(),o=X(()=>s.checked??s.value);return Ut(o,(r,c)=>{if(!i.value)return;const g=i.value,v=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(v,"value").set;if(p&&r!==c){const x=new Event("input",{bubbles:!0}),q=new Event("change",{bubbles:!0});p.call(g,r),g.dispatchEvent(x),g.dispatchEvent(q)}}),(r,c)=>(u(),R(ps,Me({ref_key:"primitiveElement",ref:n},{...s,...r.$attrs},{as:"input"}),null,16))}}),Ct=Ts,Rs=We({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(l){const s=l,n=X(()=>typeof s.value=="object"&&Array.isArray(s.value)&&s.value.length===0&&s.required),i=X(()=>typeof s.value=="string"||typeof s.value=="number"||typeof s.value=="boolean"||s.value===null||s.value===void 0?[{name:s.name,value:s.value}]:typeof s.value=="object"&&Array.isArray(s.value)?s.value.flatMap((o,r)=>typeof o=="object"?Object.entries(o).map(([c,g])=>({name:`${s.name}[${r}][${c}]`,value:g})):{name:`${s.name}[${r}]`,value:o}):s.value!==null&&typeof s.value=="object"&&!Array.isArray(s.value)?Object.entries(s.value).map(([o,r])=>({name:`${s.name}[${o}]`,value:r})):[]);return(o,r)=>(u(),m(F,null,[j(" We render single input if it's required "),n.value?(u(),R(Ct,Me({key:o.name},{...s,...o.$attrs},{name:o.name,value:o.value}),null,16,["name","value"])):(u(!0),m(F,{key:1},ue(i.value,c=>(u(),R(Ct,Me({key:c.name},{ref_for:!0},{...s,...o.$attrs},{name:c.name,value:c.value}),null,16,["name","value"]))),128))],2112))}}),Fs=Rs;const[Ps,Ns]=gs("SwitchRoot");var Ls=We({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(l,{emit:s}){const n=l,i=s,{disabled:o}=vs(n),r=ms(n,"modelValue",i,{defaultValue:n.defaultValue,passive:n.modelValue===void 0});function c(){o.value||(r.value=!r.value)}const{forwardRef:g,currentElement:v}=Ot(),b=Bs(v),p=X(()=>n.id&&v.value?document.querySelector(`[for="${n.id}"]`)?.innerText:void 0);return Ns({modelValue:r,toggleCheck:c,disabled:o}),(x,q)=>(u(),R(a(at),Me(x.$attrs,{id:x.id,ref:a(g),role:"switch",type:x.as==="button"?"button":void 0,value:x.value,"aria-label":x.$attrs["aria-label"]||p.value,"aria-checked":a(r),"aria-required":x.required,"data-state":a(r)?"checked":"unchecked","data-disabled":a(o)?"":void 0,"as-child":x.asChild,as:x.as,disabled:a(o),onClick:c,onKeydown:xs(ys(c,["prevent"]),["enter"])}),{default:C(()=>[Ce(x.$slots,"default",{modelValue:a(r)}),a(b)&&x.name?(u(),R(a(Fs),{key:0,type:"checkbox",name:x.name,disabled:a(o),required:x.required,value:x.value,checked:!!a(r)},null,8,["name","disabled","required","value","checked"])):j("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),Ws=Ls,Js=We({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(l){const s=Ps();return Ot(),(n,i)=>(u(),R(a(at),{"data-state":a(s).modelValue?.value?"checked":"unchecked","data-disabled":a(s).disabled.value?"":void 0,"as-child":n.asChild,as:n.as},{default:C(()=>[Ce(n.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"]))}}),Gs=Js;const Qs={slots:{root:"relative flex items-start",base:["inline-flex items-center shrink-0 rounded-full border-2 border-transparent focus-visible:outline-2 focus-visible:outline-offset-2 data-[state=unchecked]:bg-accented","transition-[background] duration-200"],container:"flex items-center",thumb:"group pointer-events-none rounded-full bg-default shadow-lg ring-0 transition-transform duration-200 data-[state=unchecked]:translate-x-0 data-[state=unchecked]:rtl:-translate-x-0 flex items-center justify-center",icon:["absolute shrink-0 group-data-[state=unchecked]:text-dimmed opacity-0 size-10/12","transition-[color,opacity] duration-200"],wrapper:"ms-2",label:"block font-medium text-default",description:"text-muted"},variants:{color:{primary:{base:"data-[state=checked]:bg-primary focus-visible:outline-primary",icon:"group-data-[state=checked]:text-primary"},secondary:{base:"data-[state=checked]:bg-secondary focus-visible:outline-secondary",icon:"group-data-[state=checked]:text-secondary"},success:{base:"data-[state=checked]:bg-success focus-visible:outline-success",icon:"group-data-[state=checked]:text-success"},info:{base:"data-[state=checked]:bg-info focus-visible:outline-info",icon:"group-data-[state=checked]:text-info"},warning:{base:"data-[state=checked]:bg-warning focus-visible:outline-warning",icon:"group-data-[state=checked]:text-warning"},error:{base:"data-[state=checked]:bg-error focus-visible:outline-error",icon:"group-data-[state=checked]:text-error"},neutral:{base:"data-[state=checked]:bg-inverted focus-visible:outline-inverted",icon:"group-data-[state=checked]:text-highlighted"}},size:{xs:{base:"w-7",container:"h-4",thumb:"size-3 data-[state=checked]:translate-x-3 data-[state=checked]:rtl:-translate-x-3",wrapper:"text-xs"},sm:{base:"w-8",container:"h-4",thumb:"size-3.5 data-[state=checked]:translate-x-3.5 data-[state=checked]:rtl:-translate-x-3.5",wrapper:"text-xs"},md:{base:"w-9",container:"h-5",thumb:"size-4 data-[state=checked]:translate-x-4 data-[state=checked]:rtl:-translate-x-4",wrapper:"text-sm"},lg:{base:"w-10",container:"h-5",thumb:"size-4.5 data-[state=checked]:translate-x-4.5 data-[state=checked]:rtl:-translate-x-4.5",wrapper:"text-sm"},xl:{base:"w-11",container:"h-6",thumb:"size-5 data-[state=checked]:translate-x-5 data-[state=checked]:rtl:-translate-x-5",wrapper:"text-base"}},checked:{true:{icon:"group-data-[state=checked]:opacity-100"}},unchecked:{true:{icon:"group-data-[state=unchecked]:opacity-100"}},loading:{true:{icon:"animate-spin"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-error"}},disabled:{true:{root:"opacity-75",base:"cursor-not-allowed",label:"cursor-not-allowed",description:"cursor-not-allowed"}}},defaultVariants:{color:"primary",size:"md"}},Ks=Object.assign({inheritAttrs:!1},{__name:"USwitch",props:_t({as:{type:null,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1},checkedIcon:{type:null,required:!1},uncheckedIcon:{type:null,required:!1},label:{type:String,required:!1},description:{type:String,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},value:{type:String,required:!1},defaultValue:{type:Boolean,required:!1}},{modelValue:{type:Boolean,default:void 0},modelModifiers:{}}),emits:_t(["change"],["update:modelValue"]),setup(l,{emit:s}){const n=l,i=Et(),o=s,r=bs(l,"modelValue",{type:Boolean,default:void 0}),c=Mt(),g=hs(ks(n,"required","value","defaultValue")),{id:v,emitFormChange:b,emitFormInput:p,size:x,color:q,name:$,disabled:B,ariaAttrs:E}=ws(n),P=v.value??Ss(),T=X(()=>tt({extend:tt(Qs),...c.ui?.switch||{}})({size:x.value,color:q.value,required:n.required,loading:n.loading,disabled:B.value||n.loading}));function W(J){const H=new Event("change",{target:{value:J}});o("change",H),b(),p()}return(J,H)=>(u(),R(a(at),{as:l.as,"data-slot":"root",class:Z(T.value.root({class:[n.ui?.root,n.class]}))},{default:C(()=>[t("div",{"data-slot":"container",class:Z(T.value.container({class:n.ui?.container}))},[f(a(Ws),Me({id:a(P)},{...a(g),...J.$attrs,...a(E)},{modelValue:r.value,"onUpdate:modelValue":[H[0]||(H[0]=U=>r.value=U),W],name:a($),disabled:a(B)||l.loading,"data-slot":"base",class:T.value.base({class:n.ui?.base})}),{default:C(()=>[f(a(Gs),{"data-slot":"thumb",class:Z(T.value.thumb({class:n.ui?.thumb}))},{default:C(()=>[l.loading?(u(),R(Ee,{key:0,name:l.loadingIcon||a(c).ui.icons.loading,"data-slot":"icon",class:Z(T.value.icon({class:n.ui?.icon,checked:!0,unchecked:!0}))},null,8,["name","class"])):(u(),m(F,{key:1},[l.checkedIcon?(u(),R(Ee,{key:0,name:l.checkedIcon,"data-slot":"icon",class:Z(T.value.icon({class:n.ui?.icon,checked:!0}))},null,8,["name","class"])):j("",!0),l.uncheckedIcon?(u(),R(Ee,{key:1,name:l.uncheckedIcon,"data-slot":"icon",class:Z(T.value.icon({class:n.ui?.icon,unchecked:!0}))},null,8,["name","class"])):j("",!0)],64))]),_:1},8,["class"])]),_:1},16,["id","modelValue","name","disabled","class"])],2),l.label||i.label||l.description||i.description?(u(),m("div",{key:0,"data-slot":"wrapper",class:Z(T.value.wrapper({class:n.ui?.wrapper}))},[l.label||i.label?(u(),R(a(Us),{key:0,for:a(P),"data-slot":"label",class:Z(T.value.label({class:n.ui?.label}))},{default:C(()=>[Ce(J.$slots,"label",{label:l.label},()=>[w(z(l.label),1)])]),_:3},8,["for","class"])):j("",!0),l.description||i.description?(u(),m("p",{key:1,"data-slot":"description",class:Z(T.value.description({class:n.ui?.description}))},[Ce(J.$slots,"description",{description:l.description},()=>[w(z(l.description),1)])],2)):j("",!0)],2)):j("",!0)]),_:3},8,["as","class"]))}}),Ys={slots:{base:"font-medium inline-flex items-center",label:"truncate",leadingIcon:"shrink-0",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailingIcon:"shrink-0"},variants:{fieldGroup:{horizontal:"not-only:first:rounded-e-none not-only:last:rounded-s-none not-last:not-first:rounded-none focus-visible:z-[1]",vertical:"not-only:first:rounded-b-none not-only:last:rounded-t-none not-last:not-first:rounded-none focus-visible:z-[1]"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},variant:{solid:"",outline:"",soft:"",subtle:""},size:{xs:{base:"text-[8px]/3 px-1 py-0.5 gap-1 rounded-sm",leadingIcon:"size-3",leadingAvatarSize:"3xs",trailingIcon:"size-3"},sm:{base:"text-[10px]/3 px-1.5 py-1 gap-1 rounded-sm",leadingIcon:"size-3",leadingAvatarSize:"3xs",trailingIcon:"size-3"},md:{base:"text-xs px-2 py-1 gap-1 rounded-md",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},lg:{base:"text-sm px-2 py-1 gap-1.5 rounded-md",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"text-base px-2.5 py-1 gap-1.5 rounded-md",leadingIcon:"size-6",leadingAvatarSize:"2xs",trailingIcon:"size-6"}},square:{true:""}},compoundVariants:[{color:"primary",variant:"solid",class:"bg-primary text-inverted"},{color:"secondary",variant:"solid",class:"bg-secondary text-inverted"},{color:"success",variant:"solid",class:"bg-success text-inverted"},{color:"info",variant:"solid",class:"bg-info text-inverted"},{color:"warning",variant:"solid",class:"bg-warning text-inverted"},{color:"error",variant:"solid",class:"bg-error text-inverted"},{color:"primary",variant:"outline",class:"text-primary ring ring-inset ring-primary/50"},{color:"secondary",variant:"outline",class:"text-secondary ring ring-inset ring-secondary/50"},{color:"success",variant:"outline",class:"text-success ring ring-inset ring-success/50"},{color:"info",variant:"outline",class:"text-info ring ring-inset ring-info/50"},{color:"warning",variant:"outline",class:"text-warning ring ring-inset ring-warning/50"},{color:"error",variant:"outline",class:"text-error ring ring-inset ring-error/50"},{color:"primary",variant:"soft",class:"bg-primary/10 text-primary"},{color:"secondary",variant:"soft",class:"bg-secondary/10 text-secondary"},{color:"success",variant:"soft",class:"bg-success/10 text-success"},{color:"info",variant:"soft",class:"bg-info/10 text-info"},{color:"warning",variant:"soft",class:"bg-warning/10 text-warning"},{color:"error",variant:"soft",class:"bg-error/10 text-error"},{color:"primary",variant:"subtle",class:"bg-primary/10 text-primary ring ring-inset ring-primary/25"},{color:"secondary",variant:"subtle",class:"bg-secondary/10 text-secondary ring ring-inset ring-secondary/25"},{color:"success",variant:"subtle",class:"bg-success/10 text-success ring ring-inset ring-success/25"},{color:"info",variant:"subtle",class:"bg-info/10 text-info ring ring-inset ring-info/25"},{color:"warning",variant:"subtle",class:"bg-warning/10 text-warning ring ring-inset ring-warning/25"},{color:"error",variant:"subtle",class:"bg-error/10 text-error ring ring-inset ring-error/25"},{color:"neutral",variant:"solid",class:"text-inverted bg-inverted"},{color:"neutral",variant:"outline",class:"ring ring-inset ring-accented text-default bg-default"},{color:"neutral",variant:"soft",class:"text-default bg-elevated"},{color:"neutral",variant:"subtle",class:"ring ring-inset ring-accented text-default bg-elevated"},{size:"xs",square:!0,class:"p-0.5"},{size:"sm",square:!0,class:"p-1"},{size:"md",square:!0,class:"p-1"},{size:"lg",square:!0,class:"p-1"},{size:"xl",square:!0,class:"p-1"}],defaultVariants:{color:"primary",variant:"solid",size:"md"}},Zs={__name:"UBadge",props:{as:{type:null,required:!1,default:"span"},label:{type:[String,Number],required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},square:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:null,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:null,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:null,required:!1}},setup(l){const s=l,n=Et(),i=Mt(),{orientation:o,size:r}=_s(s),{isLeading:c,isTrailing:g,leadingIconName:v,trailingIconName:b}=Cs(s),p=X(()=>tt({extend:tt(Ys),...i.ui?.badge||{}})({color:s.color,variant:s.variant,size:r.value||s.size,square:s.square||!n.default&&!s.label,fieldGroup:o.value}));return(x,q)=>(u(),R(a(at),{as:l.as,"data-slot":"base",class:Z(p.value.base({class:[s.ui?.base,s.class]}))},{default:C(()=>[Ce(x.$slots,"leading",{ui:p.value},()=>[a(c)&&a(v)?(u(),R(Ee,{key:0,name:a(v),"data-slot":"leadingIcon",class:Z(p.value.leadingIcon({class:s.ui?.leadingIcon}))},null,8,["name","class"])):l.avatar?(u(),R(qs,Me({key:1,size:s.ui?.leadingAvatarSize||p.value.leadingAvatarSize()},l.avatar,{"data-slot":"leadingAvatar",class:p.value.leadingAvatar({class:s.ui?.leadingAvatar})}),null,16,["size","class"])):j("",!0)]),Ce(x.$slots,"default",{ui:p.value},()=>[l.label!==void 0&&l.label!==null?(u(),m("span",{key:0,"data-slot":"label",class:Z(p.value.label({class:s.ui?.label}))},z(l.label),3)):j("",!0)]),Ce(x.$slots,"trailing",{ui:p.value},()=>[a(g)&&a(b)?(u(),R(Ee,{key:0,name:a(b),"data-slot":"trailingIcon",class:Z(p.value.trailingIcon({class:s.ui?.trailingIcon}))},null,8,["name","class"])):j("",!0)])]),_:3},8,["as","class"]))}};var ee=Uint8Array,oe=Uint16Array,yt=Int32Array,gt=new ee([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bt=new ee([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qt=new ee([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Dt=function(l,s){for(var n=new oe(31),i=0;i<31;++i)n[i]=s+=1<<l[i-1];for(var o=new yt(n[30]),i=1;i<30;++i)for(var r=n[i];r<n[i+1];++r)o[r]=r-n[i]<<5|i;return{b:n,r:o}},Bt=Dt(gt,2),Xs=Bt.b,ft=Bt.r;Xs[28]=258,ft[258]=28;var ea=Dt(bt,0),It=ea.r,vt=new oe(32768);for(var D=0;D<32768;++D){var ke=(D&43690)>>1|(D&21845)<<1;ke=(ke&52428)>>2|(ke&13107)<<2,ke=(ke&61680)>>4|(ke&3855)<<4,vt[D]=((ke&65280)>>8|(ke&255)<<8)>>1}var Le=(function(l,s,n){for(var i=l.length,o=0,r=new oe(s);o<i;++o)l[o]&&++r[l[o]-1];var c=new oe(s);for(o=1;o<s;++o)c[o]=c[o-1]+r[o-1]<<1;var g;if(n){g=new oe(1<<s);var v=15-s;for(o=0;o<i;++o)if(l[o])for(var b=o<<4|l[o],p=s-l[o],x=c[l[o]-1]++<<p,q=x|(1<<p)-1;x<=q;++x)g[vt[x]>>v]=b}else for(g=new oe(i),o=0;o<i;++o)l[o]&&(g[o]=vt[c[l[o]-1]++]>>15-l[o]);return g}),qe=new ee(288);for(var D=0;D<144;++D)qe[D]=8;for(var D=144;D<256;++D)qe[D]=9;for(var D=256;D<280;++D)qe[D]=7;for(var D=280;D<288;++D)qe[D]=8;var st=new ee(32);for(var D=0;D<32;++D)st[D]=5;var ta=Le(qe,9,0),sa=Le(st,5,0),Tt=function(l){return(l+7)/8|0},Rt=function(l,s,n){return(n==null||n>l.length)&&(n=l.length),new ee(l.subarray(s,n))},aa=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],lt=function(l,s,n){var i=new Error(s||aa[l]);if(i.code=l,Error.captureStackTrace&&Error.captureStackTrace(i,lt),!n)throw i;return i},ve=function(l,s,n){n<<=s&7;var i=s/8|0;l[i]|=n,l[i+1]|=n>>8},Pe=function(l,s,n){n<<=s&7;var i=s/8|0;l[i]|=n,l[i+1]|=n>>8,l[i+2]|=n>>16},pt=function(l,s){for(var n=[],i=0;i<l.length;++i)l[i]&&n.push({s:i,f:l[i]});var o=n.length,r=n.slice();if(!o)return{t:Pt,l:0};if(o==1){var c=new ee(n[0].s+1);return c[n[0].s]=1,{t:c,l:1}}n.sort(function(U,K){return U.f-K.f}),n.push({s:-1,f:25001});var g=n[0],v=n[1],b=0,p=1,x=2;for(n[0]={s:-1,f:g.f+v.f,l:g,r:v};p!=o-1;)g=n[n[b].f<n[x].f?b++:x++],v=n[b!=p&&n[b].f<n[x].f?b++:x++],n[p++]={s:-1,f:g.f+v.f,l:g,r:v};for(var q=r[0].s,i=1;i<o;++i)r[i].s>q&&(q=r[i].s);var $=new oe(q+1),B=mt(n[p-1],$,0);if(B>s){var i=0,E=0,P=B-s,T=1<<P;for(r.sort(function(K,V){return $[V.s]-$[K.s]||K.f-V.f});i<o;++i){var W=r[i].s;if($[W]>s)E+=T-(1<<B-$[W]),$[W]=s;else break}for(E>>=P;E>0;){var J=r[i].s;$[J]<s?E-=1<<s-$[J]++-1:++i}for(;i>=0&&E;--i){var H=r[i].s;$[H]==s&&(--$[H],++E)}B=s}return{t:new ee($),l:B}},mt=function(l,s,n){return l.s==-1?Math.max(mt(l.l,s,n+1),mt(l.r,s,n+1)):s[l.s]=n},At=function(l){for(var s=l.length;s&&!l[--s];);for(var n=new oe(++s),i=0,o=l[0],r=1,c=function(v){n[i++]=v},g=1;g<=s;++g)if(l[g]==o&&g!=s)++r;else{if(!o&&r>2){for(;r>138;r-=138)c(32754);r>2&&(c(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(c(o),--r;r>6;r-=6)c(8304);r>2&&(c(r-3<<5|8208),r=0)}for(;r--;)c(o);r=1,o=l[g]}return{c:n.subarray(0,i),n:s}},Ne=function(l,s){for(var n=0,i=0;i<s.length;++i)n+=l[i]*s[i];return n},Ft=function(l,s,n){var i=n.length,o=Tt(s+2);l[o]=i&255,l[o+1]=i>>8,l[o+2]=l[o]^255,l[o+3]=l[o+1]^255;for(var r=0;r<i;++r)l[o+r+4]=n[r];return(o+4+i)*8},jt=function(l,s,n,i,o,r,c,g,v,b,p){ve(s,p++,n),++o[256];for(var x=pt(o,15),q=x.t,$=x.l,B=pt(r,15),E=B.t,P=B.l,T=At(q),W=T.c,J=T.n,H=At(E),U=H.c,K=H.n,V=new oe(19),S=0;S<W.length;++S)++V[W[S]&31];for(var S=0;S<U.length;++S)++V[U[S]&31];for(var _=pt(V,7),te=_.t,me=_.l,se=19;se>4&&!te[qt[se-1]];--se);var xe=b+5<<3,ne=Ne(o,qe)+Ne(r,st)+c,ie=Ne(o,q)+Ne(r,E)+c+14+3*se+Ne(V,te)+2*V[16]+3*V[17]+7*V[18];if(v>=0&&xe<=ne&&xe<=ie)return Ft(s,p,l.subarray(v,v+b));var ae,N,le,ce;if(ve(s,p,1+(ie<ne)),p+=2,ie<ne){ae=Le(q,$,0),N=q,le=Le(E,P,0),ce=E;var Ie=Le(te,me,0);ve(s,p,J-257),ve(s,p+5,K-1),ve(s,p+10,se-4),p+=14;for(var S=0;S<se;++S)ve(s,p+3*S,te[qt[S]]);p+=3*se;for(var re=[W,U],de=0;de<2;++de)for(var pe=re[de],S=0;S<pe.length;++S){var O=pe[S]&31;ve(s,p,Ie[O]),p+=te[O],O>15&&(ve(s,p,pe[S]>>5&127),p+=pe[S]>>12)}}else ae=ta,N=qe,le=sa,ce=st;for(var S=0;S<g;++S){var G=i[S];if(G>255){var O=G>>18&31;Pe(s,p,ae[O+257]),p+=N[O+257],O>7&&(ve(s,p,G>>23&31),p+=gt[O]);var ye=G&31;Pe(s,p,le[ye]),p+=ce[ye],ye>3&&(Pe(s,p,G>>5&8191),p+=bt[ye])}else Pe(s,p,ae[G]),p+=N[G]}return Pe(s,p,ae[256]),p+N[256]},la=new yt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Pt=new ee(0),na=function(l,s,n,i,o,r){var c=r.z||l.length,g=new ee(i+c+5*(1+Math.ceil(c/7e3))+o),v=g.subarray(i,g.length-o),b=r.l,p=(r.r||0)&7;if(s){p&&(v[0]=r.r>>3);for(var x=la[s-1],q=x>>13,$=x&8191,B=(1<<n)-1,E=r.p||new oe(32768),P=r.h||new oe(B+1),T=Math.ceil(n/3),W=2*T,J=function(De){return(l[De]^l[De+1]<<T^l[De+2]<<W)&B},H=new yt(25e3),U=new oe(288),K=new oe(32),V=0,S=0,_=r.i||0,te=0,me=r.w||0,se=0;_+2<c;++_){var xe=J(_),ne=_&32767,ie=P[xe];if(E[ne]=ie,P[xe]=ne,me<=_){var ae=c-_;if((V>7e3||te>24576)&&(ae>423||!b)){p=jt(l,v,0,H,U,K,S,te,se,_-se,p),te=V=S=0,se=_;for(var N=0;N<286;++N)U[N]=0;for(var N=0;N<30;++N)K[N]=0}var le=2,ce=0,Ie=$,re=ne-ie&32767;if(ae>2&&xe==J(_-re))for(var de=Math.min(q,ae)-1,pe=Math.min(32767,_),O=Math.min(258,ae);re<=pe&&--Ie&&ne!=ie;){if(l[_+le]==l[_+le-re]){for(var G=0;G<O&&l[_+G]==l[_+G-re];++G);if(G>le){if(le=G,ce=re,G>de)break;for(var ye=Math.min(re,G-2),Je=0,N=0;N<ye;++N){var He=_-re+N&32767,ge=E[He],Ae=He-ge&32767;Ae>Je&&(Je=Ae,ie=He)}}}ne=ie,ie=E[ne],re+=ne-ie&32767}if(ce){H[te++]=268435456|ft[le]<<18|It[ce];var L=ft[le]&31,Ge=It[ce]&31;S+=gt[L]+bt[Ge],++U[257+L],++K[Ge],me=_+le,++V}else H[te++]=l[_],++U[l[_]]}}for(_=Math.max(_,me);_<c;++_)H[te++]=l[_],++U[l[_]];p=jt(l,v,b,H,U,K,S,te,se,_-se,p),b||(r.r=p&7|v[p/8|0]<<3,p-=7,r.h=P,r.p=E,r.i=_,r.w=me)}else{for(var _=r.w||0;_<c+b;_+=65535){var je=_+65535;je>=c&&(v[p/8|0]=b,je=c),p=Ft(v,p+1,l.subarray(_,je))}r.i=c}return Rt(g,0,i+Tt(p)+o)},ia=(function(){for(var l=new Int32Array(256),s=0;s<256;++s){for(var n=s,i=9;--i;)n=(n&1&&-306674912)^n>>>1;l[s]=n}return l})(),oa=function(){var l=-1;return{p:function(s){for(var n=l,i=0;i<s.length;++i)n=ia[n&255^s[i]]^n>>>8;l=n},d:function(){return~l}}},ra=function(l,s,n,i,o){if(!o&&(o={l:1},s.dictionary)){var r=s.dictionary.subarray(-32768),c=new ee(r.length+l.length);c.set(r),c.set(l,r.length),l=c,o.w=r.length}return na(l,s.level==null?6:s.level,s.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(l.length)))*1.5):20:12+s.mem,n,i,o)},Nt=function(l,s){var n={};for(var i in l)n[i]=l[i];for(var i in s)n[i]=s[i];return n},Y=function(l,s,n){for(;n;++s)l[s]=n,n>>>=8};function da(l,s){return ra(l,s||{},0,0)}var Lt=function(l,s,n,i){for(var o in l){var r=l[o],c=s+o,g=i;Array.isArray(r)&&(g=Nt(i,r[1]),r=r[0]),r instanceof ee?n[c]=[r,g]:(n[c+="/"]=[new ee(0),g],Lt(r,c,n,i))}},zt=typeof TextEncoder<"u"&&new TextEncoder,ua=typeof TextDecoder<"u"&&new TextDecoder,ca=0;try{ua.decode(Pt,{stream:!0}),ca=1}catch{}function Vt(l,s){var n;if(zt)return zt.encode(l);for(var i=l.length,o=new ee(l.length+(l.length>>1)),r=0,c=function(b){o[r++]=b},n=0;n<i;++n){if(r+5>o.length){var g=new ee(r+8+(i-n<<1));g.set(o),o=g}var v=l.charCodeAt(n);v<128||s?c(v):v<2048?(c(192|v>>6),c(128|v&63)):v>55295&&v<57344?(v=65536+(v&1047552)|l.charCodeAt(++n)&1023,c(240|v>>18),c(128|v>>12&63),c(128|v>>6&63),c(128|v&63)):(c(224|v>>12),c(128|v>>6&63),c(128|v&63))}return Rt(o,0,r)}var xt=function(l){var s=0;if(l)for(var n in l){var i=l[n].length;i>65535&&lt(9),s+=i+4}return s},$t=function(l,s,n,i,o,r,c,g){var v=i.length,b=n.extra,p=g&&g.length,x=xt(b);Y(l,s,c!=null?33639248:67324752),s+=4,c!=null&&(l[s++]=20,l[s++]=n.os),l[s]=20,s+=2,l[s++]=n.flag<<1|(r<0&&8),l[s++]=o&&8,l[s++]=n.compression&255,l[s++]=n.compression>>8;var q=new Date(n.mtime==null?Date.now():n.mtime),$=q.getFullYear()-1980;if(($<0||$>119)&&lt(10),Y(l,s,$<<25|q.getMonth()+1<<21|q.getDate()<<16|q.getHours()<<11|q.getMinutes()<<5|q.getSeconds()>>1),s+=4,r!=-1&&(Y(l,s,n.crc),Y(l,s+4,r<0?-r-2:r),Y(l,s+8,n.size)),Y(l,s+12,v),Y(l,s+14,x),s+=16,c!=null&&(Y(l,s,p),Y(l,s+6,n.attrs),Y(l,s+10,c),s+=14),l.set(i,s),s+=v,x)for(var B in b){var E=b[B],P=E.length;Y(l,s,+B),Y(l,s+2,P),l.set(E,s+4),s+=4+P}return p&&(l.set(g,s),s+=p),s},pa=function(l,s,n,i,o){Y(l,s,101010256),Y(l,s+8,n),Y(l,s+10,n),Y(l,s+12,i),Y(l,s+16,o)};function fa(l,s){s||(s={});var n={},i=[];Lt(l,"",n,s);var o=0,r=0;for(var c in n){var g=n[c],v=g[0],b=g[1],p=b.level==0?0:8,x=Vt(c),q=x.length,$=b.comment,B=$&&Vt($),E=B&&B.length,P=xt(b.extra);q>65535&&lt(11);var T=p?da(v,b):v,W=T.length,J=oa();J.p(v),i.push(Nt(b,{size:v.length,crc:J.d(),c:T,f:x,m:B,u:q!=c.length||B&&$.length!=E,o,compression:p})),o+=30+q+P+W,r+=76+2*(q+P)+(E||0)+W}for(var H=new ee(r+22),U=o,K=r-o,V=0;V<i.length;++V){var x=i[V];$t(H,x.o,x,x.f,x.u,x.c.length);var S=30+x.f.length+xt(x.extra);H.set(x.c,x.o+S),$t(H,o,x,x.f,x.u,x.c.length,x.o,x.m),o+=16+S+(x.m?x.m.length:0)}return pa(H,o,i.length,K,U),H}function va(){const l=Is("install-prompt",()=>null),s=X(()=>Ht.isNativePlatform()||typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches),n=X(()=>!s.value&&l.value!==null),i=X(()=>{if(typeof navigator>"u")return!1;const v=navigator.userAgent,b=/iphone|ipad|ipod/i.test(v),p=/safari/i.test(v)&&!/chrome|crios|fxios|edgios|edg\//i.test(v);return b&&p&&!s.value}),o=X(()=>{if(typeof navigator>"u"||s.value||i.value)return!1;const v=navigator.userAgent;return/iphone|ipad|ipod/i.test(v)?!1:!(/chrome|chromium|crios/i.test(v)&&!/edge\/[0-9]/i.test(v)||/edg\//i.test(v)||/opr\//i.test(v))}),r=X(()=>!s.value&&!n.value&&!i.value&&!o.value),c=A(!1);async function g(){if(l.value){c.value=!0;try{await l.value.prompt();const{outcome:v}=await l.value.userChoice;v==="accepted"&&(l.value=null)}finally{c.value=!1}}}return{isInstalled:s,canInstall:n,isIosSafari:i,isUnsupportedBrowser:o,isChromiumNoPrompt:r,installing:c,install:g}}const ma={class:"space-y-6"},xa={class:"space-y-2"},ya={class:"flex items-center justify-between px-4 py-3.5"},ga={class:"flex items-center justify-between px-4 py-3.5"},ba={class:"flex items-center justify-between px-4 py-3.5"},ha={class:"flex items-center justify-between px-4 py-3"},ka={class:"flex items-center justify-between px-4 py-3"},wa={key:0,class:"flex items-center justify-between px-4 pb-3"},Sa={class:"flex items-center gap-2"},_a={class:"w-4 text-center text-sm font-medium tabular-nums"},Ca={class:"flex items-center justify-between px-4 py-3"},qa={class:"flex items-center justify-between px-4 py-3"},Ia={class:"flex items-center justify-between px-4 py-3"},Aa={class:"flex items-center justify-between px-4 py-3"},ja={class:"px-4 py-3 pb-4 space-y-2"},za={class:"flex gap-2"},Va={class:"space-y-2"},$a={class:"flex items-center justify-between px-4 py-3.5"},Ua={class:"flex items-center justify-between px-4 py-3.5"},Oa={key:0,class:"flex items-center justify-between px-4 py-3.5"},Ea={class:"flex items-center justify-between px-4 py-3.5"},Ma={class:"space-y-0.5"},Ha={class:"text-xs"},Da={key:0,class:"text-amber-400"},Ba={key:0,class:"text-green-400"},Ta={key:1,class:"text-red-400"},Ra={key:2,class:"text-slate-500"},Fa={class:"shrink-0"},Pa={key:1,class:"w-2 h-2 rounded-full bg-green-400 mx-2"},Na={key:1,class:"flex items-center justify-between px-4 py-3.5"},La={class:"space-y-0.5"},Wa={class:"text-xs text-green-400"},Ja={key:2,class:"flex items-center justify-between px-4 py-3.5"},Ga={key:3,class:"px-4 py-3.5 space-y-1"},Qa={class:"flex items-start gap-3"},Ka={class:"space-y-1"},Ya={class:"text-xs text-slate-400"},Za={key:4,class:"px-4 py-3.5"},Xa={class:"flex items-start gap-3"},el={key:5,class:"px-4 py-3.5 space-y-1"},tl={class:"flex items-start gap-3"},sl={key:6,class:"flex items-center justify-between px-4 py-3.5"},al={class:"space-y-2"},ll={class:"flex items-center justify-between px-4 py-3.5"},nl={class:"flex items-center justify-between px-4 py-3.5"},il={class:"flex items-center justify-between px-4 py-3.5"},ol={class:"flex items-center justify-between px-4 py-3.5"},rl={class:"space-y-2"},dl={class:"flex items-center justify-between px-4 py-3.5"},ul={class:"text-sm font-mono font-medium"},cl={class:"flex items-center justify-between px-4 py-3.5"},pl={class:"text-sm font-mono text-slate-300"},fl={key:0,class:"flex items-center justify-between px-4 py-3.5"},vl={class:"flex items-center justify-between px-4 py-3.5"},ml={class:"flex items-center justify-between px-4 py-3.5"},xl={class:"text-sm font-mono text-slate-300"},yl={class:"flex items-center gap-2 shrink-0"},gl={key:0,class:"border-t border-slate-800 px-4 py-3 space-y-2"},bl={key:0,class:"flex items-center gap-2 text-xs text-slate-500"},hl={class:"flex items-center gap-2 mb-3"},kl={class:"font-mono text-xs text-slate-200"},wl=["onClick"],Sl={class:"text-xs font-mono text-slate-300"},_l={key:0,class:"text-[10px] leading-relaxed font-mono text-slate-400 bg-slate-950 px-3 py-2 overflow-x-auto border-t border-slate-800"},Cl=["onClick"],ql={class:"min-w-0 text-left"},Il={class:"text-xs font-mono text-slate-400"},Al={class:"text-[10px] text-slate-600 ml-2"},jl={key:0,class:"text-[10px] leading-relaxed font-mono text-slate-400 bg-slate-950 px-3 py-2 overflow-x-auto border-t border-slate-800"},zl={class:"space-y-2"},Vl={class:"flex items-start justify-between px-4 py-3.5 gap-3"},$l={class:"space-y-0.5 min-w-0"},Ul={key:0,class:"mt-1.5"},Ol={key:0,class:"text-xs text-green-400 flex items-center gap-1"},El={key:1,class:"space-y-0.5"},Ml={class:"flex items-center gap-2 shrink-0"},Hl={key:0,class:"text-xs text-slate-500"},Dl={key:0,class:"border-t border-slate-800 px-4 py-3"},Bl={key:0,class:"flex items-center gap-2 text-xs text-slate-500"},Tl={key:1,class:"text-xs text-slate-500"},Rl={key:2,class:"space-y-1.5"},Fl={class:"text-[11px] font-mono text-slate-300 truncate"},Pl={class:"text-[11px] font-mono text-slate-500 shrink-0"},Nl={class:"flex items-center justify-between px-4 py-3.5"},Ll={class:"px-4 py-3.5 space-y-2"},Wl={class:"flex items-center justify-between"},Jl={class:"space-y-1"},Gl={class:"flex justify-between text-xs text-slate-400"},Ql={class:"h-1.5 rounded-full bg-slate-800 overflow-hidden"},Kl={class:"flex items-center justify-between gap-2"},Yl={class:"flex items-center gap-1.5 text-xs"},Zl={class:"space-y-2"},Xl={class:"flex items-center justify-between px-4 py-3.5"},en={class:"flex items-center justify-between px-4 py-3.5"},tn={class:"flex items-center justify-between px-4 py-3.5"},sn={class:"p-5 space-y-4"},an={class:"flex items-center justify-between"},ln={class:"flex items-center gap-2.5 cursor-pointer"},nn=["checked","indeterminate"],on={class:"space-y-3"},rn={class:"text-xs font-semibold uppercase tracking-wider text-slate-500"},dn={class:"border border-slate-800 rounded-xl divide-y divide-slate-800 overflow-hidden"},un=["onUpdate:modelValue"],cn={class:"text-sm text-slate-300"},pn={key:0,class:"space-y-1"},fn={class:"flex justify-end gap-2 pt-1"},vn={key:0,class:"p-5 space-y-4"},mn={class:"flex items-start gap-3"},xn={class:"w-10 h-10 rounded-full bg-red-500/10 flex items-center justify-center flex-shrink-0"},yn={class:"space-y-1"},gn={class:"text-sm text-slate-400"},bn={class:"flex justify-end"},hn={key:1,class:"p-5 space-y-4"},kn={class:"flex items-start gap-3"},wn={class:"w-10 h-10 rounded-full bg-green-500/10 flex items-center justify-center flex-shrink-0"},Sn={class:"flex justify-end"},_n={key:2,class:"p-5 space-y-4"},Cn={class:"flex items-start gap-3"},qn={class:"w-10 h-10 rounded-full bg-primary-500/10 flex items-center justify-center flex-shrink-0"},In={class:"border border-slate-800 rounded-xl p-3 space-y-1"},An={class:"text-xs text-slate-500 mb-2"},jn={key:0,class:"flex items-center justify-between text-xs"},zn={class:"text-slate-400"},Vn={class:"font-mono text-slate-300"},$n={class:"flex justify-end gap-2 pt-1"},Un={class:"p-5 space-y-4"},On={class:"flex items-start gap-3"},En={class:"w-10 h-10 rounded-full bg-red-500/10 flex items-center justify-center flex-shrink-0"},Mn={class:"space-y-1 border border-slate-800 rounded-xl divide-y divide-slate-800 overflow-hidden"},Hn=["onUpdate:modelValue"],Dn={class:"min-w-0"},Bn={class:"text-sm font-medium text-slate-200 leading-snug"},Tn={class:"text-xs text-slate-500 leading-snug"},Rn={class:"flex justify-end gap-2 pt-1"},Fn={key:0,class:"p-5 space-y-4"},Pn={class:"flex items-start gap-3"},Nn={class:"w-10 h-10 rounded-full bg-green-500/10 flex items-center justify-center flex-shrink-0"},Ln={key:1,class:"p-5 space-y-4"},Wn={class:"flex items-start gap-3"},Jn={class:"w-10 h-10 rounded-full bg-red-500/10 flex items-center justify-center flex-shrink-0"},Gn={class:"flex justify-end gap-2 pt-1"},Qn={class:"p-5 space-y-5"},Kn={class:"space-y-3"},Yn={class:"flex items-center gap-3 cursor-pointer"},Zn={key:0,class:"ml-7"},Xn={class:"space-y-3"},ei={class:"flex items-center gap-3 cursor-pointer"},ti={key:0,class:"ml-7 space-y-2"},si=["onClick"],ai={class:"flex justify-end gap-2 pt-1"},ui=We({__name:"settings",setup(l){const s=Vs(),n=$s(),{settings:i,set:o}=Ds(),r=[{label:"Habits",items:[{key:"habits",label:"Habits"},{key:"completions",label:"Completions",parent:"habits"},{key:"habit_logs",label:"Habit logs",parent:"habits"},{key:"habit_schedules",label:"Habit schedules",parent:"habits"},{key:"reminders",label:"Habit reminders",parent:"habits"}]},{label:"Check-ins",items:[{key:"checkin_templates",label:"Templates"},{key:"checkin_questions",label:"Questions",parent:"checkin_templates"},{key:"checkin_responses",label:"Responses",parent:"checkin_questions"},{key:"checkin_reminders",label:"Reminders",parent:"checkin_templates"}]},{label:"Other",items:[{key:"scribbles",label:"Scribbles"},{key:"checkin_entries",label:"Journal entries"}]}];function c(){return{habits:!0,completions:!0,habit_logs:!0,habit_schedules:!0,reminders:!0,checkin_templates:!0,checkin_questions:!0,checkin_responses:!0,checkin_reminders:!0,scribbles:!0,checkin_entries:!0}}const g=A(!1),v=A(!1),b=ct(c()),p=A([]),x=Object.keys(c()),q=X(()=>x.every(y=>b[y])),$=X(()=>x.every(y=>!b[y]));function B(){const y=!q.value;for(const e of x)b[e]=y}function E(){Object.assign(b,c()),p.value=[],g.value=!0}function P(){return[["completions","habits","Completions","Habits"],["habit_logs","habits","Habit logs","Habits"],["habit_schedules","habits","Habit schedules","Habits"],["reminders","habits","Habit reminders","Habits"],["checkin_questions","checkin_templates","Questions","Check-in templates"],["checkin_responses","checkin_questions","Responses","Check-in questions"],["checkin_reminders","checkin_templates","Check-in reminders","Check-in templates"]].filter(([e,h])=>b[e]&&!b[h]).map(([,,e,h])=>`${e} require ${h}`)}async function T(){if(s.isAvailable&&(p.value=P(),!(p.value.length>0))){v.value=!0;try{const y=await s.exportJsonData({...b}),e=JSON.stringify(y,null,2),h=URL.createObjectURL(new Blob([e],{type:"application/json"}));try{const M=document.createElement("a");M.href=h,M.download=`habitat-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(M),M.click(),document.body.removeChild(M)}finally{URL.revokeObjectURL(h)}g.value=!1}finally{v.value=!1}}}const W=A(!1);async function J(){if(s.isAvailable){W.value=!0;try{const y=await s.exportDb(),e=URL.createObjectURL(new Blob([y],{type:"application/x-sqlite3"}));try{const h=document.createElement("a");h.href=e,h.download=`habitat-${new Date().toISOString().slice(0,10)}.sqlite3`,document.body.appendChild(h),h.click(),document.body.removeChild(h)}finally{URL.revokeObjectURL(e)}}finally{W.value=!1}}}const H=A(null),U=A(!1),K=A(!1),V=A(null),S=A(null),_=A(!1);function te(){V.value=null,S.value=null,_.value=!1,H.value?.click()}async function me(y){const e=y.target.files?.[0];if(e){y.target.value="";try{const h=JSON.parse(await e.text());if(typeof h!="object"||h===null){S.value="Invalid file.",U.value=!0;return}const M=h.version;if(typeof M!="number"){S.value="Missing version field — not a Habitat export.",U.value=!0;return}if(M!==1){S.value=`Unsupported version ${M}. This app supports version 1.`,U.value=!0;return}V.value=h,U.value=!0}catch{S.value="Could not parse file as JSON.",U.value=!0}}}function se(){window.location.reload()}async function xe(){if(!(!V.value||!s.isAvailable)){K.value=!0;try{await s.importJson(V.value),_.value=!0,V.value=null}finally{K.value=!1}}}function ne(){return new Promise((y,e)=>{const h=indexedDB.open("habitat",1);h.onupgradeneeded=()=>h.result.createObjectStore("voice_notes",{keyPath:"id"}),h.onsuccess=()=>y(h.result),h.onerror=()=>e(h.error)})}function ie(y){return new Promise((e,h)=>{const M=y.transaction("voice_notes","readonly").objectStore("voice_notes").getAll();M.onsuccess=()=>e(M.result),M.onerror=()=>h(M.error)})}const ae=A(!1);async function N(){ae.value=!0;try{const y=await ne(),e=await ie(y);if(e.length===0)return;const h={};for(const k of e){const Se=k.mimeType.split("/")[1]?.split(";")[0]??"audio",_e=k.created_at.slice(0,19).replace(/[:.]/g,"-");h[`${_e}.${Se}`]=new Uint8Array(await k.blob.arrayBuffer())}const M=fa(h),I=URL.createObjectURL(new Blob([M.buffer],{type:"application/zip"}));try{const k=document.createElement("a");k.href=I,k.download=`habitat-voice-${new Date().toISOString().slice(0,10)}.zip`,document.body.appendChild(k),k.click(),document.body.removeChild(k)}finally{URL.revokeObjectURL(I)}}finally{ae.value=!1}}function le(){return new Promise(y=>{const e=indexedDB.deleteDatabase("habitat");e.onsuccess=()=>y(),e.onerror=()=>y(),e.onblocked=()=>y()})}function ce(){for(const y of Object.keys(localStorage))y.startsWith("checkin-")&&localStorage.removeItem(y)}const Ie=A(!1);async function re(y){localStorage.removeItem("habitat-has-data"),await s.nukeOpfs(),await le(),ce(),y?window.location.reload():Ie.value=!0}const de=A(!1),pe=A(!1),O=ct({enableSteps:!0,stepGoal:1e4,enableMeals:!0,meals:[{name:"Breakfast",calories:600},{name:"Lunch",calories:600},{name:"Dinner",calories:600}]});function G(){O.meals.push({name:"",calories:600})}function ye(y){O.meals.splice(y,1)}async function Je(y){o("enableHealth",y),y&&s.isAvailable&&((await s.getHabits()).some(h=>h.tags.includes("habitat-health"))||(de.value=!0))}async function He(){if(s.isAvailable){pe.value=!0;try{const y={description:"",frequency:"daily",annotations:{},paused_until:null};if(O.enableSteps&&await s.createHabit({...y,name:"Steps",type:"NUMERIC",target_value:O.stepGoal,color:"#ef4444",icon:"i-heroicons-fire",tags:["habitat-health","habitat-steps"]}),O.enableMeals)for(const e of O.meals)e.name.trim()&&await s.createHabit({...y,name:e.name.trim(),type:"LIMIT",target_value:e.calories,color:"#f59e0b",icon:"i-heroicons-sparkles",tags:["habitat-health","habitat-meals"]});de.value=!1}finally{pe.value=!1}}}const ge=A(!1),Ae=A(!1),L=ct({habits:!0,checkinEntries:!0,checkins:!0,scribbles:!0,voiceNotes:!0,appliedDefaults:!1}),Ge=[{key:"habits",label:"Habits & completions",description:"All habits, logs, and completion history"},{key:"checkinEntries",label:"Check-in entries",description:"Daily check-in answers stored in the DB"},{key:"checkins",label:"Check-in templates & responses",description:"All templates, questions, and recorded answers"},{key:"scribbles",label:"Scribbles",description:"All free-form notes"},{key:"voiceNotes",label:"Voice recordings",description:"IndexedDB audio data"},{key:"appliedDefaults",label:"Applied defaults",description:"Re-enables seeding of default check-in templates"}],je=X(()=>!(L.habits||L.checkinEntries||L.checkins||L.scribbles||L.voiceNotes||L.appliedDefaults));async function De(){if(!(!s.isAvailable||je.value)){Ae.value=!0;try{const y=[];L.habits&&y.push(s.deleteAllHabits()),L.checkinEntries&&y.push(s.deleteAllCheckinEntries()),L.checkins&&y.push(s.deleteAllCheckinData()),L.scribbles&&y.push(s.deleteAllScribbles()),L.appliedDefaults&&y.push(s.clearAppliedDefaults()),await Promise.all(y),L.checkinEntries&&ce(),L.voiceNotes&&await le(),L.habits&&localStorage.removeItem("habitat-has-data"),ge.value=!1}finally{Ae.value=!1}}}const ze=A(!1),Qe=A(!1);async function ht(y){if(s.isAvailable){Qe.value=!0;try{await re(y)}catch{ze.value=!1}finally{Qe.value=!1}}}const we=A(null),nt=A(!1);async function Wt(){if(s.isAvailable){nt.value=!0,we.value=null;try{we.value=await s.integrityCheck()}finally{nt.value=!1}}}const Jt=X(()=>we.value!==null&&we.value.length===1&&we.value[0]==="ok"),Be=A(!1),fe=A(null),it=A(!1),be=A(null);async function Gt(){if(s.isAvailable){it.value=!0;try{fe.value=await s.getDbInfo()}finally{it.value=!1}}}function Qt(){Be.value=!Be.value,Be.value&&!fe.value&&Gt()}const Te=A(!1),Ve=A([]),ot=A(!1);async function kt(y,e=""){const h=[];for await(const[M,I]of y.entries()){const k=e?`${e}/${M}`:M;if(I.kind==="directory")h.push(...await kt(I,k));else{const Se=await I.getFile();h.push({path:k,size:Se.size})}}return h}async function wt(){ot.value=!0;try{const y=await navigator.storage.getDirectory();Ve.value=await kt(y)}finally{ot.value=!1}}function Kt(){Te.value=!Te.value,Te.value&&wt()}function rt(y){return y<1024?`${y} B`:y<1024*1024?`${(y/1024).toFixed(1)} KB`:`${(y/(1024*1024)).toFixed(2)} MB`}const dt=A(!1);async function Yt(){dt.value=!0;try{if("serviceWorker"in navigator){const y=await navigator.serviceWorker.getRegistrations();await Promise.all(y.map(e=>e.unregister()))}if("caches"in window){const y=await caches.keys();await Promise.all(y.map(e=>caches.delete(e)))}window.location.reload()}catch{dt.value=!1}}const{isInstalled:Zt,canInstall:Xt,isIosSafari:Ke,isUnsupportedBrowser:es,isChromiumNoPrompt:ts,installing:ss,install:as}=va(),ls=Ht.isNativePlatform(),{permission:$e,requestPermission:ns,sendTestNotification:is}=As();async function os(){await ns()}const Ue=A(null),he=A(null);async function St(){"storage"in navigator&&("estimate"in navigator.storage&&(Ue.value=await navigator.storage.estimate()),"persisted"in navigator.storage&&(he.value=await navigator.storage.persisted()))}async function rs(){"storage"in navigator&&"persist"in navigator.storage&&(he.value=await navigator.storage.persist())}const Ye=A(!1),Re=A(!1),Ze=A(!1);return Ut(Re,y=>{y&&St()}),(y,e)=>{const h=Ks,M=Es,I=js,k=Ee,Se=Zs,_e=Ms,ut=Hs,ds=Os;return u(),m("div",ma,[e[132]||(e[132]=t("header",null,[t("p",{class:"text-sm text-slate-500"},"Preferences"),t("h2",{class:"text-2xl font-bold"},"Settings")],-1)),t("section",xa,[e[54]||(e[54]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-slate-500 px-1"},"Display",-1)),f(M,{ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:C(()=>[t("div",ya,[e[38]||(e[38]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"24-hour time"),t("p",{class:"text-xs text-slate-500"},"Show times as 17:34 instead of 5:34 PM.")],-1)),f(h,{"model-value":a(i).use24HourTime,"onUpdate:modelValue":e[0]||(e[0]=d=>a(o)("use24HourTime",d))},null,8,["model-value"])]),t("div",ga,[e[39]||(e[39]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Sticky bottom bar"),t("p",{class:"text-xs text-slate-500"},"Keep the nav bar fixed at the bottom when scrolling.")],-1)),f(h,{"model-value":a(i).stickyNav,"onUpdate:modelValue":e[1]||(e[1]=d=>a(o)("stickyNav",d))},null,8,["model-value"])]),t("div",ba,[e[40]||(e[40]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Extra bottom padding"),t("p",{class:"text-xs text-slate-500"},"Add space below the nav for Android gesture buttons.")],-1)),f(h,{"model-value":a(i).navExtraPadding,"onUpdate:modelValue":e[2]||(e[2]=d=>a(o)("navExtraPadding",d))},null,8,["model-value"])]),e[50]||(e[50]=t("div",{class:"px-4 pt-3 pb-1"},[t("p",{class:"text-[10px] font-semibold uppercase tracking-wider text-slate-600"},"Navigation")],-1)),t("div",ha,[e[41]||(e[41]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Today tab"),t("p",{class:"text-xs text-slate-500"},"Show daily progress and log habits for today.")],-1)),f(h,{"model-value":a(i).enableToday,"onUpdate:modelValue":e[3]||(e[3]=d=>a(o)("enableToday",d))},null,8,["model-value"])]),t("div",null,[t("div",ka,[e[42]||(e[42]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Week view"),t("p",{class:"text-xs text-slate-500"},"Quick-fill view for logging multiple days at once.")],-1)),f(h,{"model-value":a(i).enableWeek,"onUpdate:modelValue":e[4]||(e[4]=d=>a(o)("enableWeek",d))},null,8,["model-value"])]),a(i).enableWeek?(u(),m("div",wa,[e[43]||(e[43]=t("p",{class:"text-sm text-slate-400"},"Days to show",-1)),t("div",Sa,[t("button",{class:"w-7 h-7 rounded-lg bg-slate-800 border border-slate-700 text-slate-300 flex items-center justify-center text-sm",onClick:e[5]||(e[5]=d=>a(o)("weekDays",Math.max(3,(a(i).weekDays||3)-1)))},"−"),t("span",_a,z(a(i).weekDays||3),1),t("button",{class:"w-7 h-7 rounded-lg bg-slate-800 border border-slate-700 text-slate-300 flex items-center justify-center text-sm",onClick:e[6]||(e[6]=d=>a(o)("weekDays",Math.min(7,(a(i).weekDays||3)+1)))},"+")])])):j("",!0)]),e[51]||(e[51]=t("div",{class:"px-4 pt-3 pb-1"},[t("p",{class:"text-[10px] font-semibold uppercase tracking-wider text-slate-600"},"Habits page")],-1)),t("div",Ca,[e[44]||(e[44]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Show tags"),t("p",{class:"text-xs text-slate-500"},"Display habit tags in the habits list.")],-1)),f(h,{"model-value":a(i).showTagsOnHabits,"onUpdate:modelValue":e[7]||(e[7]=d=>a(o)("showTagsOnHabits",d))},null,8,["model-value"])]),t("div",qa,[e[45]||(e[45]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Show annotations"),t("p",{class:"text-xs text-slate-500"},"Display key:value metadata in the habits list.")],-1)),f(h,{"model-value":a(i).showAnnotationsOnHabits,"onUpdate:modelValue":e[8]||(e[8]=d=>a(o)("showAnnotationsOnHabits",d))},null,8,["model-value"])]),e[52]||(e[52]=t("div",{class:"px-4 pt-3 pb-1"},[t("p",{class:"text-[10px] font-semibold uppercase tracking-wider text-slate-600"},"Today page")],-1)),t("div",Ia,[e[46]||(e[46]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Show tags"),t("p",{class:"text-xs text-slate-500"},"Display habit tags in today's list.")],-1)),f(h,{"model-value":a(i).showTagsOnToday,"onUpdate:modelValue":e[9]||(e[9]=d=>a(o)("showTagsOnToday",d))},null,8,["model-value"])]),t("div",Aa,[e[47]||(e[47]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Show annotations"),t("p",{class:"text-xs text-slate-500"},"Display key:value metadata in today's list.")],-1)),f(h,{"model-value":a(i).showAnnotationsOnToday,"onUpdate:modelValue":e[10]||(e[10]=d=>a(o)("showAnnotationsOnToday",d))},null,8,["model-value"])]),e[53]||(e[53]=t("div",{class:"px-4 pt-3 pb-1"},[t("p",{class:"text-[10px] font-semibold uppercase tracking-wider text-slate-600"},"Log entries")],-1)),t("div",ja,[e[48]||(e[48]=t("p",{class:"text-sm font-medium"},"Input mode",-1)),e[49]||(e[49]=t("p",{class:"text-xs text-slate-500 mb-2"},"How numeric values are applied when logging a habit.",-1)),t("div",za,[t("button",{class:Z(["flex-1 py-2 px-3 rounded-xl text-xs font-medium border transition-colors",a(i).logInputMode==="increment"?"bg-primary-500/15 border-primary-500/40 text-primary-300":"bg-slate-800 border-slate-700 text-slate-400"]),onClick:e[11]||(e[11]=d=>a(o)("logInputMode","increment"))}," Add to total ",2),t("button",{class:Z(["flex-1 py-2 px-3 rounded-xl text-xs font-medium border transition-colors",a(i).logInputMode==="absolute"?"bg-primary-500/15 border-primary-500/40 text-primary-300":"bg-slate-800 border-slate-700 text-slate-400"]),onClick:e[12]||(e[12]=d=>a(o)("logInputMode","absolute"))}," Set total ",2)])])]),_:1})]),t("section",Va,[e[74]||(e[74]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-slate-500 px-1"},"Features",-1)),f(M,{ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:C(()=>[t("div",$a,[e[55]||(e[55]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Enable Journalling"),t("p",{class:"text-xs text-slate-500"},"Show Check-in, Scribbles, and Voice in the navigation.")],-1)),f(h,{"model-value":a(i).enableJournalling,"onUpdate:modelValue":e[13]||(e[13]=d=>a(o)("enableJournalling",d))},null,8,["model-value"])]),t("div",Ua,[e[56]||(e[56]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Enable Health"),t("p",{class:"text-xs text-slate-500"},"Track daily steps and meal calories.")],-1)),f(h,{"model-value":a(i).enableHealth,"onUpdate:modelValue":Je},null,8,["model-value"])]),a(i).enableJournalling?(u(),m("div",Oa,[e[57]||(e[57]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Save transcriptions"),t("p",{class:"text-xs text-slate-500"},[w("After recording, offer to save the speech-to-text transcript as a Scribble tagged "),t("code",{class:"text-slate-400"},"habitat-transcribed"),w(".")])],-1)),f(h,{"model-value":a(i).saveTranscribedNotes,"onUpdate:modelValue":e[14]||(e[14]=d=>a(o)("saveTranscribedNotes",d))},null,8,["model-value"])])):j("",!0),t("div",Ea,[t("div",Ma,[e[58]||(e[58]=t("p",{class:"text-sm font-medium"},"Notifications",-1)),t("p",Ha,[a(Ke)?(u(),m("span",Da,"Install the app first — iOS only allows notifications in installed PWAs")):(u(),m(F,{key:1},[a($e)==="granted"?(u(),m("span",Ba,"Enabled — add reminders on individual habit pages")):a($e)==="denied"?(u(),m("span",Ta,"Blocked — allow in browser/OS settings to enable")):(u(),m("span",Ra,"Not enabled — grant permission to receive reminders"))],64))])]),t("div",Fa,[a($e)==="default"&&!a(Ke)?(u(),R(I,{key:0,size:"sm",variant:"soft",color:"neutral",icon:"i-heroicons-bell",onClick:os},{default:C(()=>[...e[59]||(e[59]=[w(" Enable ",-1)])]),_:1})):a($e)==="granted"?(u(),m("div",Pa)):a($e)==="denied"?(u(),R(k,{key:2,name:"i-heroicons-bell-slash",class:"w-5 h-5 text-red-400 mx-1"})):a(Ke)?(u(),R(k,{key:3,name:"i-heroicons-bell-slash",class:"w-5 h-5 text-amber-400 mx-1"})):j("",!0)])]),a(Zt)?(u(),m("div",Na,[t("div",La,[e[60]||(e[60]=t("p",{class:"text-sm font-medium"},"Habitat is installed",-1)),t("p",Wa,z(a(ls)?"Running as a native app":"Running as a standalone app"),1)]),e[61]||(e[61]=t("div",{class:"w-2 h-2 rounded-full bg-green-400 mx-2 shrink-0"},null,-1))])):a(Xt)?(u(),m("div",Ja,[e[63]||(e[63]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Install Habitat"),t("p",{class:"text-xs text-slate-500"},"Add to your home screen for offline access and notifications")],-1)),f(I,{size:"sm",variant:"soft",color:"primary",icon:"i-heroicons-arrow-down-tray",loading:a(ss),class:"shrink-0",onClick:a(as)},{default:C(()=>[...e[62]||(e[62]=[w(" Install ",-1)])]),_:1},8,["loading","onClick"])])):a(Ke)?(u(),m("div",Ga,[t("div",Qa,[f(k,{name:"i-heroicons-device-phone-mobile",class:"w-5 h-5 text-slate-400 shrink-0 mt-0.5"}),t("div",Ka,[e[70]||(e[70]=t("p",{class:"text-sm font-medium"},"Install on iOS",-1)),t("p",Ya,[e[64]||(e[64]=w(" Tap the ",-1)),e[65]||(e[65]=t("span",{class:"font-semibold text-slate-300"},"Share",-1)),e[66]||(e[66]=w(" button ",-1)),f(k,{name:"i-heroicons-arrow-up-on-square",class:"inline w-3.5 h-3.5 align-text-bottom"}),e[67]||(e[67]=w(" then choose ",-1)),e[68]||(e[68]=t("span",{class:"font-semibold text-slate-300"},"Add to Home Screen",-1)),e[69]||(e[69]=w(". ",-1))])])])])):a(es)?(u(),m("div",Za,[t("div",Xa,[f(k,{name:"i-heroicons-exclamation-circle",class:"w-5 h-5 text-amber-400 shrink-0 mt-0.5"}),e[71]||(e[71]=t("div",{class:"space-y-1"},[t("p",{class:"text-sm font-medium"},"Use Chrome, Edge, Brave, or Opera"),t("p",{class:"text-xs text-slate-500"},"Required for OPFS storage, home screen install, and background notifications.")],-1))])])):a(ts)?(u(),m("div",el,[t("div",tl,[f(k,{name:"i-heroicons-arrow-down-tray",class:"w-5 h-5 text-slate-400 shrink-0 mt-0.5"}),e[72]||(e[72]=t("div",{class:"space-y-1"},[t("p",{class:"text-sm font-medium"},"Install Habitat"),t("p",{class:"text-xs text-slate-400"},[w(" Tap the "),t("span",{class:"font-semibold text-slate-300"},"⋮ menu"),w(" in your browser, then choose "),t("span",{class:"font-semibold text-slate-300"},"Install app"),w(" or "),t("span",{class:"font-semibold text-slate-300"},"Add to Home Screen"),w(". ")])],-1))])])):(u(),m("div",sl,[...e[73]||(e[73]=[t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Install Habitat"),t("p",{class:"text-xs text-slate-500"},"Open in Chrome or Edge to install as a standalone app")],-1)])]))]),_:1})]),t("section",al,[e[79]||(e[79]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-slate-500 px-1"},"Data",-1)),f(M,{ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:C(()=>[t("div",ll,[e[75]||(e[75]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Export data"),t("p",{class:"text-xs text-slate-500"},"Download selected data as a versioned JSON file.")],-1)),f(I,{icon:"i-heroicons-arrow-down-tray",variant:"ghost",color:"neutral",size:"sm",disabled:!a(s).isAvailable,onClick:E},null,8,["disabled"])]),t("div",nl,[e[76]||(e[76]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Import data"),t("p",{class:"text-xs text-slate-500"},"Merge from a Habitat JSON export. Existing records are kept.")],-1)),t("input",{ref_key:"importInput",ref:H,type:"file",accept:".json",class:"hidden",onChange:me},null,544),f(I,{icon:"i-heroicons-arrow-up-tray",variant:"ghost",color:"neutral",size:"sm",disabled:!a(s).isAvailable,onClick:te},null,8,["disabled"])]),t("div",il,[e[77]||(e[77]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Export SQLite"),t("p",{class:"text-xs text-slate-500"},[w("Download the raw "),t("span",{class:"font-mono"},".sqlite3"),w(" database file.")])],-1)),f(I,{icon:"i-heroicons-circle-stack",variant:"ghost",color:"neutral",size:"sm",loading:a(W),disabled:!a(s).isAvailable,onClick:J},null,8,["loading","disabled"])]),t("div",ol,[e[78]||(e[78]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Export voice notes"),t("p",{class:"text-xs text-slate-500"},[w("Download all voice recordings as a "),t("span",{class:"font-mono"},".zip"),w(" archive.")])],-1)),f(I,{icon:"i-heroicons-musical-note",variant:"ghost",color:"neutral",size:"sm",loading:a(ae),onClick:N},null,8,["loading"])])]),_:1})]),t("section",rl,[t("button",{class:"w-full flex items-center justify-between px-1 py-0.5",onClick:e[15]||(e[15]=d=>Ye.value=!a(Ye))},[e[80]||(e[80]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-slate-500"},"About",-1)),f(k,{name:a(Ye)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",class:"w-3.5 h-3.5 text-slate-600"},null,8,["name"])]),a(Ye)?(u(),R(M,{key:0,ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:C(()=>[e[90]||(e[90]=t("div",{class:"flex items-center justify-between px-4 py-3.5"},[t("p",{class:"text-sm text-slate-400"},"App"),t("p",{class:"text-sm font-medium"},"Habitat")],-1)),t("div",dl,[e[81]||(e[81]=t("p",{class:"text-sm text-slate-400"},"Version",-1)),t("p",ul,z(a(n).public.appVersion||"—"),1)]),t("div",cl,[e[82]||(e[82]=t("p",{class:"text-sm text-slate-400"},"Commit",-1)),t("p",pl,z(a(n).public.commitSha||"—"),1)]),a(n).public.gitTag.length>0?(u(),m("div",fl,[e[83]||(e[83]=t("p",{class:"text-sm text-slate-400"},"Tag",-1)),f(Se,{label:a(n).public.gitTag,variant:"subtle",color:"primary",size:"sm",class:"rounded-full font-mono"},null,8,["label"])])):j("",!0),t("div",vl,[e[84]||(e[84]=t("p",{class:"text-sm text-slate-400"},"Build",-1)),f(Se,{label:a(n).public.buildTarget,variant:"subtle",color:"neutral",size:"sm",class:"rounded-full font-mono"},null,8,["label"])]),t("div",ml,[e[85]||(e[85]=t("p",{class:"text-sm text-slate-400"},"Built",-1)),t("p",xl,z(a(n).public.buildTime?new Date(a(n).public.buildTime).toLocaleString():"—"),1)]),e[91]||(e[91]=t("div",{class:"flex items-center justify-between px-4 py-3.5"},[t("p",{class:"text-sm text-slate-400"},"Storage"),t("p",{class:"text-sm font-medium"},"On-device (OPFS)")],-1)),t("div",null,[t("button",{class:"w-full flex items-center justify-between px-4 py-3.5 text-left",onClick:Qt},[e[86]||(e[86]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm text-slate-400"},"Database schema")],-1)),t("div",yl,[a(fe)?(u(),R(Se,{key:0,label:`v${a(fe).userVersion}`,variant:"subtle",color:"neutral",size:"sm",class:"font-mono rounded-full"},null,8,["label"])):j("",!0),f(k,{name:a(Be)?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-4 h-4 text-slate-500"},null,8,["name"])])]),a(Be)?(u(),m("div",gl,[a(it)?(u(),m("div",bl,[f(k,{name:"i-heroicons-arrow-path",class:"w-3.5 h-3.5 animate-spin"}),e[87]||(e[87]=w(" Loading… ",-1))])):a(fe)?(u(),m(F,{key:1},[t("div",hl,[e[88]||(e[88]=t("span",{class:"text-xs text-slate-500"},"Schema version:",-1)),t("span",kl,z(a(fe).userVersion),1)]),(u(!0),m(F,null,ue(a(fe).tables,d=>(u(),m("div",{key:d.name,class:"rounded-lg border border-slate-800 overflow-hidden"},[t("button",{class:"w-full flex items-center justify-between px-3 py-2 text-left hover:bg-slate-800/40 transition-colors",onClick:Q=>be.value=a(be)===d.name?null:d.name},[t("span",Sl,z(d.name),1),f(k,{name:a(be)===d.name?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-3.5 h-3.5 text-slate-600"},null,8,["name"])],8,wl),a(be)===d.name?(u(),m("pre",_l,z(d.sql),1)):j("",!0)]))),128)),a(fe).indices.length>0?(u(),m(F,{key:0},[e[89]||(e[89]=t("p",{class:"text-[10px] font-semibold uppercase tracking-wider text-slate-600 pt-1"},"Indices",-1)),(u(!0),m(F,null,ue(a(fe).indices,d=>(u(),m("div",{key:d.name,class:"rounded-lg border border-slate-800 overflow-hidden"},[t("button",{class:"w-full flex items-center justify-between px-3 py-2 text-left hover:bg-slate-800/40 transition-colors",onClick:Q=>be.value=a(be)===d.name?null:d.name},[t("div",ql,[t("span",Il,z(d.name),1),t("span",Al,"on "+z(d.tbl_name),1)]),f(k,{name:a(be)===d.name?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-3.5 h-3.5 text-slate-600 shrink-0"},null,8,["name"])],8,Cl),a(be)===d.name?(u(),m("pre",jl,z(d.sql),1)):j("",!0)]))),128))],64)):j("",!0)],64)):j("",!0)])):j("",!0)])]),_:1})):j("",!0)]),t("section",zl,[t("button",{class:"w-full flex items-center justify-between px-1 py-0.5",onClick:e[16]||(e[16]=d=>Re.value=!a(Re))},[e[92]||(e[92]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-slate-500"},"Diagnostics",-1)),f(k,{name:a(Re)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",class:"w-3.5 h-3.5 text-slate-600"},null,8,["name"])]),a(Re)?(u(),R(M,{key:0,ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:C(()=>[t("div",Vl,[t("div",$l,[e[94]||(e[94]=t("p",{class:"text-sm font-medium"},"Integrity check",-1)),e[95]||(e[95]=t("p",{class:"text-xs text-slate-500"},[w("Runs SQLite "),t("span",{class:"font-mono"},"PRAGMA integrity_check")],-1)),a(we)!==null?(u(),m("div",Ul,[a(Jt)?(u(),m("p",Ol,[f(k,{name:"i-heroicons-check-circle",class:"w-3.5 h-3.5 shrink-0"}),e[93]||(e[93]=w(" ok ",-1))])):(u(),m("ul",El,[(u(!0),m(F,null,ue(a(we),(d,Q)=>(u(),m("li",{key:Q,class:"text-xs text-red-400 font-mono break-all"},z(d),1))),128))]))])):j("",!0)]),f(I,{size:"sm",variant:"ghost",color:"neutral",loading:a(nt),disabled:!a(s).isAvailable,icon:"i-heroicons-shield-check",class:"shrink-0",onClick:Wt},null,8,["loading","disabled"])]),t("div",null,[t("button",{class:"w-full flex items-center justify-between px-4 py-3.5 text-left",onClick:Kt},[e[96]||(e[96]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"OPFS files"),t("p",{class:"text-xs text-slate-500"},"All files in the origin private file system")],-1)),t("div",Ml,[a(Ve).length>0?(u(),m("span",Hl,z(a(Ve).length)+" file"+z(a(Ve).length!==1?"s":""),1)):j("",!0),f(k,{name:a(Te)?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-4 h-4 text-slate-500"},null,8,["name"])])]),a(Te)?(u(),m("div",Dl,[a(ot)?(u(),m("div",Bl,[f(k,{name:"i-heroicons-arrow-path",class:"w-3.5 h-3.5 animate-spin"}),e[97]||(e[97]=w(" Scanning… ",-1))])):a(Ve).length===0?(u(),m("div",Tl,"No files found.")):(u(),m("ul",Rl,[(u(!0),m(F,null,ue(a(Ve),d=>(u(),m("li",{key:d.path,class:"flex items-center justify-between gap-4"},[t("span",Fl,z(d.path),1),t("span",Pl,z(rt(d.size)),1)]))),128))])),t("button",{class:"mt-3 text-xs text-slate-600 hover:text-slate-400 flex items-center gap-1 transition-colors",onClick:wt},[f(k,{name:"i-heroicons-arrow-path",class:"w-3 h-3"}),e[98]||(e[98]=w(" Refresh ",-1))])])):j("",!0)]),t("div",Nl,[e[99]||(e[99]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Test notification"),t("p",{class:"text-xs text-slate-500"},"Fire a sample notification to verify delivery.")],-1)),f(I,{size:"sm",variant:"ghost",color:"neutral",icon:"i-heroicons-bell",disabled:a($e)!=="granted",onClick:a(is)},null,8,["disabled","onClick"])]),t("div",Ll,[t("div",Wl,[e[100]||(e[100]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Storage"),t("p",{class:"text-xs text-slate-500"},"Browser quota and current usage.")],-1)),f(I,{size:"sm",variant:"ghost",color:"neutral",icon:"i-heroicons-arrow-path",onClick:St})]),a(Ue)?(u(),m(F,{key:0},[t("div",Jl,[t("div",Gl,[t("span",null,z(rt(a(Ue).usage??0))+" used",1),t("span",null,z(rt(a(Ue).quota??0))+" quota",1)]),t("div",Ql,[t("div",{class:"h-full rounded-full bg-primary-500 transition-all",style:zs({width:`${Math.min(100,(a(Ue).usage??0)/(a(Ue).quota??1)*100).toFixed(1)}%`})},null,4)])]),t("div",Kl,[t("div",Yl,[f(k,{name:a(he)?"i-heroicons-lock-closed":"i-heroicons-lock-open",class:Z(["w-3.5 h-3.5",a(he)?"text-green-400":"text-amber-400"])},null,8,["name","class"]),t("span",{class:Z(a(he)?"text-green-400":"text-amber-400")},z(a(he)===null?"Checking…":a(he)?"Persistent storage":"Storage not persisted"),3)]),a(he)===!1?(u(),R(I,{key:0,size:"xs",variant:"soft",color:"primary",onClick:rs},{default:C(()=>[...e[101]||(e[101]=[w(" Request ",-1)])]),_:1})):j("",!0)])],64)):j("",!0)])]),_:1})):j("",!0)]),t("section",Zl,[t("button",{class:"w-full flex items-center justify-between px-1 py-0.5",onClick:e[17]||(e[17]=d=>Ze.value=!a(Ze))},[e[102]||(e[102]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-red-900/70"},"🐉 Here be dragons",-1)),f(k,{name:a(Ze)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",class:"w-3.5 h-3.5 text-red-900/50"},null,8,["name"])]),a(Ze)?(u(),R(M,{key:0,ui:{root:"rounded-2xl ring-1 ring-red-900/30",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:C(()=>[t("div",Xl,[e[103]||(e[103]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Force reload"),t("p",{class:"text-xs text-slate-500"},"Unregister service worker, clear JS/CSS caches, and reload. OPFS data is preserved.")],-1)),f(I,{size:"sm",variant:"ghost",color:"neutral",icon:"i-heroicons-arrow-path",loading:a(dt),class:"shrink-0",onClick:Yt},null,8,["loading"])]),t("div",en,[e[104]||(e[104]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium text-red-400"},"Clear app data"),t("p",{class:"text-xs text-slate-500"},"Selectively delete habits, check-ins, scribbles, or voice notes.")],-1)),f(I,{icon:"i-heroicons-trash",variant:"ghost",color:"error",size:"sm",disabled:!a(s).isAvailable,onClick:e[18]||(e[18]=d=>ge.value=!0)},null,8,["disabled"])]),t("div",tn,[e[105]||(e[105]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium text-red-400"},"Clear OPFS storage"),t("p",{class:"text-xs text-slate-500"},"Wipe all on-device file system storage including the database.")],-1)),f(I,{icon:"i-heroicons-fire",variant:"ghost",color:"error",size:"sm",disabled:!a(s).isAvailable,onClick:e[19]||(e[19]=d=>ze.value=!0)},null,8,["disabled"])])]),_:1})):j("",!0)]),f(_e,{open:a(g),"onUpdate:open":e[22]||(e[22]=d=>Fe(g)?g.value=d:null)},{content:C(()=>[t("div",sn,[t("div",an,[e[106]||(e[106]=t("h3",{class:"font-semibold text-slate-100"},"Export data",-1)),f(I,{icon:"i-heroicons-x-mark",variant:"ghost",color:"neutral",size:"xs",onClick:e[20]||(e[20]=d=>g.value=!1)})]),t("label",ln,[t("input",{type:"checkbox",class:"accent-primary-500",checked:a(q),indeterminate:!a(q)&&!a($),onChange:B},null,40,nn),e[107]||(e[107]=t("span",{class:"text-sm text-slate-300 font-medium"},"Select all",-1))]),t("div",on,[(u(),m(F,null,ue(r,d=>t("div",{key:d.label,class:"space-y-1.5"},[t("p",rn,z(d.label),1),t("div",dn,[(u(!0),m(F,null,ue(d.items,Q=>(u(),m("label",{key:Q.key,class:"flex items-center gap-3 px-3.5 py-2.5 cursor-pointer hover:bg-slate-800/40 transition-colors"},[Xe(t("input",{"onUpdate:modelValue":Oe=>a(b)[Q.key]=Oe,type:"checkbox",class:"accent-primary-500 shrink-0"},null,8,un),[[et,a(b)[Q.key]]]),t("span",cn,z(Q.label),1)]))),128))])])),64))]),a(p).length>0?(u(),m("ul",pn,[(u(!0),m(F,null,ue(a(p),d=>(u(),m("li",{key:d,class:"text-xs text-red-400 flex items-center gap-1.5"},[f(k,{name:"i-heroicons-exclamation-circle",class:"w-3.5 h-3.5 shrink-0"}),w(" "+z(d),1)]))),128))])):j("",!0),t("div",fn,[f(I,{variant:"ghost",color:"neutral",size:"sm",onClick:e[21]||(e[21]=d=>g.value=!1)},{default:C(()=>[...e[108]||(e[108]=[w("Cancel",-1)])]),_:1}),f(I,{size:"sm",icon:"i-heroicons-arrow-down-tray",loading:a(v),disabled:a($),onClick:T},{default:C(()=>[...e[109]||(e[109]=[w(" Download ",-1)])]),_:1},8,["loading","disabled"])])])]),_:1},8,["open"]),f(_e,{open:a(U),"onUpdate:open":e[26]||(e[26]=d=>Fe(U)?U.value=d:null)},{content:C(()=>[a(S)?(u(),m("div",vn,[t("div",mn,[t("div",xn,[f(k,{name:"i-heroicons-exclamation-circle",class:"w-5 h-5 text-red-400"})]),t("div",yn,[e[110]||(e[110]=t("p",{class:"font-semibold"},"Cannot import",-1)),t("p",gn,z(a(S)),1)])]),t("div",bn,[f(I,{variant:"ghost",color:"neutral",onClick:e[23]||(e[23]=d=>U.value=!1)},{default:C(()=>[...e[111]||(e[111]=[w("Close",-1)])]),_:1})])])):a(_)?(u(),m("div",hn,[t("div",kn,[t("div",wn,[f(k,{name:"i-heroicons-check-circle",class:"w-5 h-5 text-green-400"})]),e[112]||(e[112]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold"},"Import complete"),t("p",{class:"text-sm text-slate-400"},"Records merged. Reload to see all updates.")],-1))]),t("div",Sn,[f(I,{onClick:e[24]||(e[24]=()=>{U.value=!1,se()})},{default:C(()=>[...e[113]||(e[113]=[w("Reload",-1)])]),_:1})])])):a(V)?(u(),m("div",_n,[t("div",Cn,[t("div",qn,[f(k,{name:"i-heroicons-arrow-up-tray",class:"w-5 h-5 text-primary-400"})]),e[114]||(e[114]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold"},"Import data?"),t("p",{class:"text-sm text-slate-400"},"New records will be added; existing IDs are skipped.")],-1))]),t("div",In,[t("p",An," Version "+z(a(V).version)+" export from "+z(new Date(a(V).exported_at).toLocaleDateString()),1),(u(),m(F,null,ue(r,d=>(u(),m(F,{key:d.label},[(u(!0),m(F,null,ue(d.items,Q=>(u(),m(F,{key:Q.key},[(a(V)[Q.key]??[]).length>0?(u(),m("div",jn,[t("span",zn,z(Q.label),1),t("span",Vn,z((a(V)[Q.key]??[]).length),1)])):j("",!0)],64))),128))],64))),64))]),t("div",$n,[f(I,{variant:"ghost",color:"neutral",onClick:e[25]||(e[25]=d=>U.value=!1)},{default:C(()=>[...e[115]||(e[115]=[w("Cancel",-1)])]),_:1}),f(I,{loading:a(K),onClick:xe},{default:C(()=>[...e[116]||(e[116]=[w("Import",-1)])]),_:1},8,["loading"])])])):j("",!0)]),_:1},8,["open"]),f(_e,{open:a(ge),"onUpdate:open":e[28]||(e[28]=d=>Fe(ge)?ge.value=d:null)},{content:C(()=>[t("div",Un,[t("div",On,[t("div",En,[f(k,{name:"i-heroicons-exclamation-triangle",class:"w-5 h-5 text-red-400"})]),e[117]||(e[117]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold"},"Clear app data?"),t("p",{class:"text-sm text-slate-400"},"Select what to delete. This cannot be undone.")],-1))]),t("div",Mn,[(u(),m(F,null,ue(Ge,d=>t("label",{key:d.key,class:"flex items-start gap-3 px-3.5 py-3 cursor-pointer hover:bg-slate-800/40 transition-colors"},[Xe(t("input",{"onUpdate:modelValue":Q=>a(L)[d.key]=Q,type:"checkbox",class:"mt-0.5 accent-red-500 shrink-0"},null,8,Hn),[[et,a(L)[d.key]]]),t("div",Dn,[t("p",Bn,z(d.label),1),t("p",Tn,z(d.description),1)])])),64))]),t("div",Rn,[f(I,{variant:"ghost",color:"neutral",onClick:e[27]||(e[27]=d=>ge.value=!1)},{default:C(()=>[...e[118]||(e[118]=[w("Cancel",-1)])]),_:1}),f(I,{color:"error",loading:a(Ae),disabled:a(je),onClick:De},{default:C(()=>[...e[119]||(e[119]=[w(" Delete selected ",-1)])]),_:1},8,["loading","disabled"])])])]),_:1},8,["open"]),f(_e,{open:a(ze),"onUpdate:open":e[32]||(e[32]=d=>Fe(ze)?ze.value=d:null)},{content:C(()=>[a(Ie)?(u(),m("div",Fn,[t("div",Pn,[t("div",Nn,[f(k,{name:"i-heroicons-check-circle",class:"w-5 h-5 text-green-400"})]),e[120]||(e[120]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold"},"All data wiped"),t("p",{class:"text-sm text-slate-400"},"Storage has been cleared. You can safely close this tab.")],-1))])])):(u(),m("div",Ln,[t("div",Wn,[t("div",Jn,[f(k,{name:"i-heroicons-fire",class:"w-5 h-5 text-red-400"})]),e[121]||(e[121]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold"},"Wipe OPFS storage?"),t("p",{class:"text-sm text-slate-400"}," Removes every file in the browser's origin private file system — including the SQLite database. Voice recordings and check-in entries will also be cleared. ")],-1))]),t("div",Gn,[f(I,{variant:"ghost",color:"neutral",onClick:e[29]||(e[29]=d=>ze.value=!1)},{default:C(()=>[...e[122]||(e[122]=[w("Cancel",-1)])]),_:1}),f(I,{color:"error",variant:"ghost",loading:a(Qe),onClick:e[30]||(e[30]=d=>ht(!1))},{default:C(()=>[...e[123]||(e[123]=[w("Wipe only",-1)])]),_:1},8,["loading"]),f(I,{color:"error",loading:a(Qe),onClick:e[31]||(e[31]=d=>ht(!0))},{default:C(()=>[...e[124]||(e[124]=[w("Wipe & reload",-1)])]),_:1},8,["loading"])])]))]),_:1},8,["open"]),f(_e,{open:a(de),"onUpdate:open":e[37]||(e[37]=d=>Fe(de)?de.value=d:null)},{content:C(()=>[t("div",Qn,[e[131]||(e[131]=t("div",null,[t("h3",{class:"text-lg font-semibold"},"Set up Health Tracking"),t("p",{class:"text-sm text-slate-400 mt-0.5"},"Choose what you'd like to track. Habits are created in your habit list.")],-1)),t("div",Kn,[t("label",Yn,[Xe(t("input",{"onUpdate:modelValue":e[33]||(e[33]=d=>a(O).enableSteps=d),type:"checkbox",class:"rounded"},null,512),[[et,a(O).enableSteps]]),e[125]||(e[125]=t("div",null,[t("p",{class:"text-sm font-medium"},"Track Steps"),t("p",{class:"text-xs text-slate-500"},"Creates a daily NUMERIC habit with your step goal.")],-1))]),a(O).enableSteps?(u(),m("div",Zn,[f(ds,{label:"Daily step goal"},{default:C(()=>[f(ut,{modelValue:a(O).stepGoal,"onUpdate:modelValue":e[34]||(e[34]=d=>a(O).stepGoal=d),modelModifiers:{number:!0},type:"number",min:"1000",step:"500",class:"w-40"},null,8,["modelValue"])]),_:1})])):j("",!0)]),t("div",Xn,[t("label",ei,[Xe(t("input",{"onUpdate:modelValue":e[35]||(e[35]=d=>a(O).enableMeals=d),type:"checkbox",class:"rounded"},null,512),[[et,a(O).enableMeals]]),e[126]||(e[126]=t("div",null,[t("p",{class:"text-sm font-medium"},"Track Meals"),t("p",{class:"text-xs text-slate-500"},"Creates LIMIT habits for calorie tracking per meal.")],-1))]),a(O).enableMeals?(u(),m("div",ti,[(u(!0),m(F,null,ue(a(O).meals,(d,Q)=>(u(),m("div",{key:Q,class:"flex items-center gap-2"},[f(ut,{modelValue:d.name,"onUpdate:modelValue":Oe=>d.name=Oe,placeholder:"Meal name",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),f(ut,{modelValue:d.calories,"onUpdate:modelValue":Oe=>d.calories=Oe,modelModifiers:{number:!0},type:"number",min:"0",step:"50",class:"w-24"},null,8,["modelValue","onUpdate:modelValue"]),e[127]||(e[127]=t("span",{class:"text-xs text-slate-500 shrink-0"},"kcal",-1)),t("button",{class:"text-slate-700 hover:text-red-400 transition-colors shrink-0",onClick:Oe=>ye(Q)},[f(k,{name:"i-heroicons-x-mark",class:"w-4 h-4"})],8,si)]))),128)),t("button",{class:"text-xs text-slate-500 hover:text-slate-400 flex items-center gap-1 mt-1",onClick:G},[f(k,{name:"i-heroicons-plus",class:"w-3 h-3"}),e[128]||(e[128]=w(" Add meal ",-1))])])):j("",!0)]),t("div",ai,[f(I,{variant:"ghost",color:"neutral",onClick:e[36]||(e[36]=d=>de.value=!1)},{default:C(()=>[...e[129]||(e[129]=[w("Skip",-1)])]),_:1}),f(I,{color:"primary",disabled:!a(O).enableSteps&&!a(O).enableMeals,loading:a(pe),onClick:He},{default:C(()=>[...e[130]||(e[130]=[w(" Create Habits ",-1)])]),_:1},8,["disabled","loading"])])])]),_:1},8,["open"])])}}});export{ui as default};
