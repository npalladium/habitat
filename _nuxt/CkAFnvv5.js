import{Z as k,aK as j,Q as I,ab as M,aU as N,o as r,m as d,w as C,b as g,l as w,i as e,n as m,W as P,j as B,x as S,e as T,L as $,aV as V,c as y,a as b,h as F,p as h,U as O,k as q,F as U,r as z,t as E}from"./xAnKZML8.js";import{_ as L}from"./CLtfX1ZV.js";import{u as D}from"./Bd4hLxuj.js";const H=()=>k("color-mode").value,W=Object.assign({inheritAttrs:!1},{__name:"UColorModeButton",props:{color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"ghost"},label:{type:String,required:!1},activeColor:{type:null,required:!1},activeVariant:{type:null,required:!1},size:{type:null,required:!1},square:{type:Boolean,required:!1},block:{type:Boolean,required:!1},loadingAuto:{type:Boolean,required:!1},onClick:{type:[Function,Array],required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:null,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:null,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1},as:{type:null,required:!1},type:{type:null,required:!1},disabled:{type:Boolean,required:!1},exactActiveClass:{type:String,required:!1},viewTransition:{type:Boolean,required:!1}},setup(x){const n=x,{t:l}=j(),i=H(),p=I(),t=M(N(n,"icon")),c=S({get(){return i.value==="dark"},set(a){i.preference=a?"dark":"light"}});return(a,u)=>(r(),d(B,P({...e(t),"aria-label":c.value?e(l)("colorMode.switchToLight"):e(l)("colorMode.switchToDark"),...a.$attrs},{onClick:u[0]||(u[0]=o=>c.value=!c.value)}),{leading:C(({ui:o})=>[g(w,{class:m(o.leadingIcon({class:[n.ui?.leadingIcon,"hidden dark:inline-block"]})),name:e(p).ui.icons.dark},null,8,["class","name"]),g(w,{class:m(o.leadingIcon({class:[n.ui?.leadingIcon,"dark:hidden"]})),name:e(p).ui.icons.light},null,8,["class","name"])]),_:1},16))}}),J={class:"min-h-screen bg-slate-950 text-slate-100 flex flex-col"},K={class:"border-b border-slate-800 px-4 py-3 flex items-center justify-between"},Q={class:"flex items-center gap-1"},R={key:0},X=T({__name:"default",setup(x){const n=$(),{$dbError:l}=V(),i=k("eviction-detected",()=>!1),p=k("opfs-unsupported",()=>!1),{settings:t}=D(),c=[{to:"/",icon:"i-heroicons-home",label:"Today",today:!0},{to:"/week",icon:"i-heroicons-calendar-days",label:"Week",week:!0},{to:"/habits",icon:"i-heroicons-list-bullet",label:"Habits"},{to:"/health",icon:"i-heroicons-heart",label:"Health",health:!0},{to:"/todos",icon:"i-heroicons-check-circle",label:"TODOs",todos:!0},{to:"/bored",icon:"i-heroicons-face-smile",label:"Bored",bored:!0},{to:"/checkin",icon:"i-heroicons-pencil-square",label:"Check-in",journalling:!0},{to:"/scribbles",icon:"i-heroicons-pencil",label:"Scribbles",journalling:!0},{to:"/voice",icon:"i-heroicons-microphone",label:"Voice",journalling:!0},{to:"/stats",icon:"i-heroicons-chart-bar",label:"Stats"}],a=S(()=>c.filter(o=>!(o.today&&!t.value.enableToday||o.week&&!t.value.enableWeek||o.health&&!t.value.enableHealth||o.journalling&&!t.value.enableJournalling||o.todos&&!t.value.enableTodos||o.bored&&!(t.value.enableTodos&&t.value.enableBored))));function u(o){return o==="/"?n.path==="/":n.path.startsWith(o)}return(o,f)=>{const _=B,A=W,v=L;return r(),y("div",J,[b("header",K,[f[1]||(f[1]=F('<div class="flex items-center gap-2"><svg class="plant-logo w-6 h-[1.625rem]" viewBox="0 0 40 44" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M 8,40 C 12,37 28,37 32,40" stroke="currentColor" stroke-width="3" fill="none" stroke-linecap="round"></path><line x1="20" y1="40" x2="20" y2="24" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"></line><path d="M 20,24 C 11,23 4,29 8,34 C 11,37 19,30 20,24" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></path><path d="M 20,24 C 26,20 32,14 30,8 C 28,5 20,13 20,24" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="text-lg font-semibold tracking-tight">Habitat</span></div>',1)),b("div",Q,[g(_,{to:"/settings",icon:"i-heroicons-cog-6-tooth",variant:"ghost",color:"neutral",size:"sm",class:m(u("/settings")?"text-primary-400":"")},null,8,["class"]),g(A)])]),e(p)?(r(),d(v,{key:0,title:"Browser not supported",description:"Habitat requires the Origin Private File System (OPFS) API, which is not available in this browser. Please use a modern browser such as Chrome, Firefox, or Safari 17+.",color:"error",variant:"soft",icon:"i-heroicons-exclamation-triangle",class:"rounded-none border-0 border-b border-red-900/50"})):h("",!0),e(l)?(r(),d(v,{key:1,description:e(l),color:"error",variant:"soft",icon:"i-heroicons-exclamation-triangle",class:"rounded-none border-0 border-b border-red-900/50"},null,8,["description"])):h("",!0),e(i)?(r(),d(v,{key:2,title:"Storage may have been cleared",description:"Your browser appears to have cleared on-device storage. If data is missing, use Export in Settings regularly to back up.",color:"warning",variant:"soft",icon:"i-heroicons-exclamation-triangle","close-button":{icon:"i-heroicons-x-mark",variant:"ghost",color:"neutral",size:"sm"},class:"rounded-none border-0 border-b border-amber-900/50",onClose:f[0]||(f[0]=s=>i.value=!1)})):h("",!0),b("main",{class:"flex-1 p-4 pb-2",style:q(e(t).stickyNav?{paddingBottom:e(t).navExtraPadding?"calc(5.5rem + env(safe-area-inset-bottom))":"calc(4.5rem + env(safe-area-inset-bottom))"}:{})},[O(o.$slots,"default")],4),b("nav",{class:m(["border-t border-slate-800 py-1 flex justify-around overflow-x-auto [&::-webkit-scrollbar]:hidden [scrollbar-width:none]",e(t).stickyNav?"fixed bottom-0 inset-x-0 z-30 bg-slate-950":"safe-area-bottom"]),style:q(e(t).stickyNav?{paddingBottom:e(t).navExtraPadding?"calc(1.25rem + env(safe-area-inset-bottom))":"env(safe-area-inset-bottom)"}:void 0)},[(r(!0),y(U,null,z(e(a),s=>(r(),d(_,{key:s.to,to:s.to,icon:s.icon,color:u(s.to)?"primary":"neutral",variant:"ghost",ui:e(a).length>5?{base:"flex-shrink-0 h-auto py-2.5 px-2.5"}:{base:"flex-col gap-0.5 h-auto py-2 px-3 text-xs"}},{default:C(()=>[e(a).length<=5?(r(),y("span",R,E(s.label),1)):h("",!0)]),_:2},1032,["to","icon","color","ui"]))),128))],6)])}}});export{X as default};
