import{x as se,O as os,P as rs,e as We,f as Ut,o as u,m as R,Q as Me,V as ds,R as us,c as x,p as j,F,r as ue,S as cs,U as ps,W as Ot,w as C,X as Ce,i as a,s as fs,Y as vs,Z as at,$ as ms,a0 as Et,a1 as xs,a2 as Mt,a3 as ys,a4 as gs,a5 as bs,a6 as hs,a as t,n as Z,b as f,l as Ee,d as _,t as z,a7 as _t,a8 as tt,a9 as ks,aa as ws,ab as Ss,ac as _s,y as A,ad as Cs,j as qs,k as Is,q as Xe,H as et,G as Fe,A as As,ae as js,z as ct}from"./Bg-kuHgk.js";import{L as zs,_ as Vs}from"./C6En2XaX.js";import{_ as $s}from"./CYE96v_c.js";import{_ as Us}from"./D0we00fU.js";import{_ as Os}from"./CK8bjoe6.js";import{u as Es}from"./THW777jJ.js";function Ms(l){return se(()=>os(l)?!!rs(l)?.closest("form"):!0)}var Ds=We({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(l){const s=l,{primitiveElement:n,currentElement:i}=us(),o=se(()=>s.checked??s.value);return Ut(o,(r,c)=>{if(!i.value)return;const v=i.value,y=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(y,"value").set;if(p&&r!==c){const m=new Event("input",{bubbles:!0}),q=new Event("change",{bubbles:!0});p.call(v,r),v.dispatchEvent(m),v.dispatchEvent(q)}}),(r,c)=>(u(),R(ds,Me({ref_key:"primitiveElement",ref:n},{...s,...r.$attrs},{as:"input"}),null,16))}}),Ct=Ds,Hs=We({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(l){const s=l,n=se(()=>typeof s.value=="object"&&Array.isArray(s.value)&&s.value.length===0&&s.required),i=se(()=>typeof s.value=="string"||typeof s.value=="number"||typeof s.value=="boolean"||s.value===null||s.value===void 0?[{name:s.name,value:s.value}]:typeof s.value=="object"&&Array.isArray(s.value)?s.value.flatMap((o,r)=>typeof o=="object"?Object.entries(o).map(([c,v])=>({name:`${s.name}[${r}][${c}]`,value:v})):{name:`${s.name}[${r}]`,value:o}):s.value!==null&&typeof s.value=="object"&&!Array.isArray(s.value)?Object.entries(s.value).map(([o,r])=>({name:`${s.name}[${o}]`,value:r})):[]);return(o,r)=>(u(),x(F,null,[j(" We render single input if it's required "),n.value?(u(),R(Ct,Me({key:o.name},{...s,...o.$attrs},{name:o.name,value:o.value}),null,16,["name","value"])):(u(!0),x(F,{key:1},ue(i.value,c=>(u(),R(Ct,Me({key:c.name},{ref_for:!0},{...s,...o.$attrs},{name:c.name,value:c.value}),null,16,["name","value"]))),128))],2112))}}),Bs=Hs;const[Ts,Rs]=ms("SwitchRoot");var Fs=We({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(l,{emit:s}){const n=l,i=s,{disabled:o}=cs(n),r=ps(n,"modelValue",i,{defaultValue:n.defaultValue,passive:n.modelValue===void 0});function c(){o.value||(r.value=!r.value)}const{forwardRef:v,currentElement:y}=Ot(),b=Ms(y),p=se(()=>n.id&&y.value?document.querySelector(`[for="${n.id}"]`)?.innerText:void 0);return Rs({modelValue:r,toggleCheck:c,disabled:o}),(m,q)=>(u(),R(a(at),Me(m.$attrs,{id:m.id,ref:a(v),role:"switch",type:m.as==="button"?"button":void 0,value:m.value,"aria-label":m.$attrs["aria-label"]||p.value,"aria-checked":a(r),"aria-required":m.required,"data-state":a(r)?"checked":"unchecked","data-disabled":a(o)?"":void 0,"as-child":m.asChild,as:m.as,disabled:a(o),onClick:c,onKeydown:fs(vs(c,["prevent"]),["enter"])}),{default:C(()=>[Ce(m.$slots,"default",{modelValue:a(r)}),a(b)&&m.name?(u(),R(a(Bs),{key:0,type:"checkbox",name:m.name,disabled:a(o),required:m.required,value:m.value,checked:!!a(r)},null,8,["name","disabled","required","value","checked"])):j("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),Ps=Fs,Ns=We({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(l){const s=Ts();return Ot(),(n,i)=>(u(),R(a(at),{"data-state":a(s).modelValue?.value?"checked":"unchecked","data-disabled":a(s).disabled.value?"":void 0,"as-child":n.asChild,as:n.as},{default:C(()=>[Ce(n.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"]))}}),Ls=Ns;const Ws={slots:{root:"relative flex items-start",base:["inline-flex items-center shrink-0 rounded-full border-2 border-transparent focus-visible:outline-2 focus-visible:outline-offset-2 data-[state=unchecked]:bg-accented","transition-[background] duration-200"],container:"flex items-center",thumb:"group pointer-events-none rounded-full bg-default shadow-lg ring-0 transition-transform duration-200 data-[state=unchecked]:translate-x-0 data-[state=unchecked]:rtl:-translate-x-0 flex items-center justify-center",icon:["absolute shrink-0 group-data-[state=unchecked]:text-dimmed opacity-0 size-10/12","transition-[color,opacity] duration-200"],wrapper:"ms-2",label:"block font-medium text-default",description:"text-muted"},variants:{color:{primary:{base:"data-[state=checked]:bg-primary focus-visible:outline-primary",icon:"group-data-[state=checked]:text-primary"},secondary:{base:"data-[state=checked]:bg-secondary focus-visible:outline-secondary",icon:"group-data-[state=checked]:text-secondary"},success:{base:"data-[state=checked]:bg-success focus-visible:outline-success",icon:"group-data-[state=checked]:text-success"},info:{base:"data-[state=checked]:bg-info focus-visible:outline-info",icon:"group-data-[state=checked]:text-info"},warning:{base:"data-[state=checked]:bg-warning focus-visible:outline-warning",icon:"group-data-[state=checked]:text-warning"},error:{base:"data-[state=checked]:bg-error focus-visible:outline-error",icon:"group-data-[state=checked]:text-error"},neutral:{base:"data-[state=checked]:bg-inverted focus-visible:outline-inverted",icon:"group-data-[state=checked]:text-highlighted"}},size:{xs:{base:"w-7",container:"h-4",thumb:"size-3 data-[state=checked]:translate-x-3 data-[state=checked]:rtl:-translate-x-3",wrapper:"text-xs"},sm:{base:"w-8",container:"h-4",thumb:"size-3.5 data-[state=checked]:translate-x-3.5 data-[state=checked]:rtl:-translate-x-3.5",wrapper:"text-xs"},md:{base:"w-9",container:"h-5",thumb:"size-4 data-[state=checked]:translate-x-4 data-[state=checked]:rtl:-translate-x-4",wrapper:"text-sm"},lg:{base:"w-10",container:"h-5",thumb:"size-4.5 data-[state=checked]:translate-x-4.5 data-[state=checked]:rtl:-translate-x-4.5",wrapper:"text-sm"},xl:{base:"w-11",container:"h-6",thumb:"size-5 data-[state=checked]:translate-x-5 data-[state=checked]:rtl:-translate-x-5",wrapper:"text-base"}},checked:{true:{icon:"group-data-[state=checked]:opacity-100"}},unchecked:{true:{icon:"group-data-[state=unchecked]:opacity-100"}},loading:{true:{icon:"animate-spin"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-error"}},disabled:{true:{root:"opacity-75",base:"cursor-not-allowed",label:"cursor-not-allowed",description:"cursor-not-allowed"}}},defaultVariants:{color:"primary",size:"md"}},Js=Object.assign({inheritAttrs:!1},{__name:"USwitch",props:_t({as:{type:null,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1},checkedIcon:{type:null,required:!1},uncheckedIcon:{type:null,required:!1},label:{type:String,required:!1},description:{type:String,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},value:{type:String,required:!1},defaultValue:{type:Boolean,required:!1}},{modelValue:{type:Boolean,default:void 0},modelModifiers:{}}),emits:_t(["change"],["update:modelValue"]),setup(l,{emit:s}){const n=l,i=Et(),o=s,r=xs(l,"modelValue",{type:Boolean,default:void 0}),c=Mt(),v=ys(gs(n,"required","value","defaultValue")),{id:y,emitFormChange:b,emitFormInput:p,size:m,color:q,name:$,disabled:B,ariaAttrs:E}=bs(n),P=y.value??hs(),T=se(()=>tt({extend:tt(Ws),...c.ui?.switch||{}})({size:m.value,color:q.value,required:n.required,loading:n.loading,disabled:B.value||n.loading}));function W(J){const D=new Event("change",{target:{value:J}});o("change",D),b(),p()}return(J,D)=>(u(),R(a(at),{as:l.as,"data-slot":"root",class:Z(T.value.root({class:[n.ui?.root,n.class]}))},{default:C(()=>[t("div",{"data-slot":"container",class:Z(T.value.container({class:n.ui?.container}))},[f(a(Ps),Me({id:a(P)},{...a(v),...J.$attrs,...a(E)},{modelValue:r.value,"onUpdate:modelValue":[D[0]||(D[0]=U=>r.value=U),W],name:a($),disabled:a(B)||l.loading,"data-slot":"base",class:T.value.base({class:n.ui?.base})}),{default:C(()=>[f(a(Ls),{"data-slot":"thumb",class:Z(T.value.thumb({class:n.ui?.thumb}))},{default:C(()=>[l.loading?(u(),R(Ee,{key:0,name:l.loadingIcon||a(c).ui.icons.loading,"data-slot":"icon",class:Z(T.value.icon({class:n.ui?.icon,checked:!0,unchecked:!0}))},null,8,["name","class"])):(u(),x(F,{key:1},[l.checkedIcon?(u(),R(Ee,{key:0,name:l.checkedIcon,"data-slot":"icon",class:Z(T.value.icon({class:n.ui?.icon,checked:!0}))},null,8,["name","class"])):j("",!0),l.uncheckedIcon?(u(),R(Ee,{key:1,name:l.uncheckedIcon,"data-slot":"icon",class:Z(T.value.icon({class:n.ui?.icon,unchecked:!0}))},null,8,["name","class"])):j("",!0)],64))]),_:1},8,["class"])]),_:1},16,["id","modelValue","name","disabled","class"])],2),l.label||i.label||l.description||i.description?(u(),x("div",{key:0,"data-slot":"wrapper",class:Z(T.value.wrapper({class:n.ui?.wrapper}))},[l.label||i.label?(u(),R(a(zs),{key:0,for:a(P),"data-slot":"label",class:Z(T.value.label({class:n.ui?.label}))},{default:C(()=>[Ce(J.$slots,"label",{label:l.label},()=>[_(z(l.label),1)])]),_:3},8,["for","class"])):j("",!0),l.description||i.description?(u(),x("p",{key:1,"data-slot":"description",class:Z(T.value.description({class:n.ui?.description}))},[Ce(J.$slots,"description",{description:l.description},()=>[_(z(l.description),1)])],2)):j("",!0)],2)):j("",!0)]),_:3},8,["as","class"]))}}),Gs={slots:{base:"font-medium inline-flex items-center",label:"truncate",leadingIcon:"shrink-0",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailingIcon:"shrink-0"},variants:{fieldGroup:{horizontal:"not-only:first:rounded-e-none not-only:last:rounded-s-none not-last:not-first:rounded-none focus-visible:z-[1]",vertical:"not-only:first:rounded-b-none not-only:last:rounded-t-none not-last:not-first:rounded-none focus-visible:z-[1]"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},variant:{solid:"",outline:"",soft:"",subtle:""},size:{xs:{base:"text-[8px]/3 px-1 py-0.5 gap-1 rounded-sm",leadingIcon:"size-3",leadingAvatarSize:"3xs",trailingIcon:"size-3"},sm:{base:"text-[10px]/3 px-1.5 py-1 gap-1 rounded-sm",leadingIcon:"size-3",leadingAvatarSize:"3xs",trailingIcon:"size-3"},md:{base:"text-xs px-2 py-1 gap-1 rounded-md",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},lg:{base:"text-sm px-2 py-1 gap-1.5 rounded-md",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"text-base px-2.5 py-1 gap-1.5 rounded-md",leadingIcon:"size-6",leadingAvatarSize:"2xs",trailingIcon:"size-6"}},square:{true:""}},compoundVariants:[{color:"primary",variant:"solid",class:"bg-primary text-inverted"},{color:"secondary",variant:"solid",class:"bg-secondary text-inverted"},{color:"success",variant:"solid",class:"bg-success text-inverted"},{color:"info",variant:"solid",class:"bg-info text-inverted"},{color:"warning",variant:"solid",class:"bg-warning text-inverted"},{color:"error",variant:"solid",class:"bg-error text-inverted"},{color:"primary",variant:"outline",class:"text-primary ring ring-inset ring-primary/50"},{color:"secondary",variant:"outline",class:"text-secondary ring ring-inset ring-secondary/50"},{color:"success",variant:"outline",class:"text-success ring ring-inset ring-success/50"},{color:"info",variant:"outline",class:"text-info ring ring-inset ring-info/50"},{color:"warning",variant:"outline",class:"text-warning ring ring-inset ring-warning/50"},{color:"error",variant:"outline",class:"text-error ring ring-inset ring-error/50"},{color:"primary",variant:"soft",class:"bg-primary/10 text-primary"},{color:"secondary",variant:"soft",class:"bg-secondary/10 text-secondary"},{color:"success",variant:"soft",class:"bg-success/10 text-success"},{color:"info",variant:"soft",class:"bg-info/10 text-info"},{color:"warning",variant:"soft",class:"bg-warning/10 text-warning"},{color:"error",variant:"soft",class:"bg-error/10 text-error"},{color:"primary",variant:"subtle",class:"bg-primary/10 text-primary ring ring-inset ring-primary/25"},{color:"secondary",variant:"subtle",class:"bg-secondary/10 text-secondary ring ring-inset ring-secondary/25"},{color:"success",variant:"subtle",class:"bg-success/10 text-success ring ring-inset ring-success/25"},{color:"info",variant:"subtle",class:"bg-info/10 text-info ring ring-inset ring-info/25"},{color:"warning",variant:"subtle",class:"bg-warning/10 text-warning ring ring-inset ring-warning/25"},{color:"error",variant:"subtle",class:"bg-error/10 text-error ring ring-inset ring-error/25"},{color:"neutral",variant:"solid",class:"text-inverted bg-inverted"},{color:"neutral",variant:"outline",class:"ring ring-inset ring-accented text-default bg-default"},{color:"neutral",variant:"soft",class:"text-default bg-elevated"},{color:"neutral",variant:"subtle",class:"ring ring-inset ring-accented text-default bg-elevated"},{size:"xs",square:!0,class:"p-0.5"},{size:"sm",square:!0,class:"p-1"},{size:"md",square:!0,class:"p-1"},{size:"lg",square:!0,class:"p-1"},{size:"xl",square:!0,class:"p-1"}],defaultVariants:{color:"primary",variant:"solid",size:"md"}},Qs={__name:"UBadge",props:{as:{type:null,required:!1,default:"span"},label:{type:[String,Number],required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},square:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:null,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:null,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:null,required:!1}},setup(l){const s=l,n=Et(),i=Mt(),{orientation:o,size:r}=ks(s),{isLeading:c,isTrailing:v,leadingIconName:y,trailingIconName:b}=ws(s),p=se(()=>tt({extend:tt(Gs),...i.ui?.badge||{}})({color:s.color,variant:s.variant,size:r.value||s.size,square:s.square||!n.default&&!s.label,fieldGroup:o.value}));return(m,q)=>(u(),R(a(at),{as:l.as,"data-slot":"base",class:Z(p.value.base({class:[s.ui?.base,s.class]}))},{default:C(()=>[Ce(m.$slots,"leading",{ui:p.value},()=>[a(c)&&a(y)?(u(),R(Ee,{key:0,name:a(y),"data-slot":"leadingIcon",class:Z(p.value.leadingIcon({class:s.ui?.leadingIcon}))},null,8,["name","class"])):l.avatar?(u(),R(Ss,Me({key:1,size:s.ui?.leadingAvatarSize||p.value.leadingAvatarSize()},l.avatar,{"data-slot":"leadingAvatar",class:p.value.leadingAvatar({class:s.ui?.leadingAvatar})}),null,16,["size","class"])):j("",!0)]),Ce(m.$slots,"default",{ui:p.value},()=>[l.label!==void 0&&l.label!==null?(u(),x("span",{key:0,"data-slot":"label",class:Z(p.value.label({class:s.ui?.label}))},z(l.label),3)):j("",!0)]),Ce(m.$slots,"trailing",{ui:p.value},()=>[a(v)&&a(b)?(u(),R(Ee,{key:0,name:a(b),"data-slot":"trailingIcon",class:Z(p.value.trailingIcon({class:s.ui?.trailingIcon}))},null,8,["name","class"])):j("",!0)])]),_:3},8,["as","class"]))}};var X=Uint8Array,oe=Uint16Array,yt=Int32Array,gt=new X([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bt=new X([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qt=new X([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Dt=function(l,s){for(var n=new oe(31),i=0;i<31;++i)n[i]=s+=1<<l[i-1];for(var o=new yt(n[30]),i=1;i<30;++i)for(var r=n[i];r<n[i+1];++r)o[r]=r-n[i]<<5|i;return{b:n,r:o}},Ht=Dt(gt,2),Ks=Ht.b,ft=Ht.r;Ks[28]=258,ft[258]=28;var Ys=Dt(bt,0),It=Ys.r,vt=new oe(32768);for(var H=0;H<32768;++H){var ke=(H&43690)>>1|(H&21845)<<1;ke=(ke&52428)>>2|(ke&13107)<<2,ke=(ke&61680)>>4|(ke&3855)<<4,vt[H]=((ke&65280)>>8|(ke&255)<<8)>>1}var Le=(function(l,s,n){for(var i=l.length,o=0,r=new oe(s);o<i;++o)l[o]&&++r[l[o]-1];var c=new oe(s);for(o=1;o<s;++o)c[o]=c[o-1]+r[o-1]<<1;var v;if(n){v=new oe(1<<s);var y=15-s;for(o=0;o<i;++o)if(l[o])for(var b=o<<4|l[o],p=s-l[o],m=c[l[o]-1]++<<p,q=m|(1<<p)-1;m<=q;++m)v[vt[m]>>y]=b}else for(v=new oe(i),o=0;o<i;++o)l[o]&&(v[o]=vt[c[l[o]-1]++]>>15-l[o]);return v}),qe=new X(288);for(var H=0;H<144;++H)qe[H]=8;for(var H=144;H<256;++H)qe[H]=9;for(var H=256;H<280;++H)qe[H]=7;for(var H=280;H<288;++H)qe[H]=8;var st=new X(32);for(var H=0;H<32;++H)st[H]=5;var Zs=Le(qe,9,0),Xs=Le(st,5,0),Bt=function(l){return(l+7)/8|0},Tt=function(l,s,n){return(n==null||n>l.length)&&(n=l.length),new X(l.subarray(s,n))},ea=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],lt=function(l,s,n){var i=new Error(s||ea[l]);if(i.code=l,Error.captureStackTrace&&Error.captureStackTrace(i,lt),!n)throw i;return i},ve=function(l,s,n){n<<=s&7;var i=s/8|0;l[i]|=n,l[i+1]|=n>>8},Pe=function(l,s,n){n<<=s&7;var i=s/8|0;l[i]|=n,l[i+1]|=n>>8,l[i+2]|=n>>16},pt=function(l,s){for(var n=[],i=0;i<l.length;++i)l[i]&&n.push({s:i,f:l[i]});var o=n.length,r=n.slice();if(!o)return{t:Ft,l:0};if(o==1){var c=new X(n[0].s+1);return c[n[0].s]=1,{t:c,l:1}}n.sort(function(U,K){return U.f-K.f}),n.push({s:-1,f:25001});var v=n[0],y=n[1],b=0,p=1,m=2;for(n[0]={s:-1,f:v.f+y.f,l:v,r:y};p!=o-1;)v=n[n[b].f<n[m].f?b++:m++],y=n[b!=p&&n[b].f<n[m].f?b++:m++],n[p++]={s:-1,f:v.f+y.f,l:v,r:y};for(var q=r[0].s,i=1;i<o;++i)r[i].s>q&&(q=r[i].s);var $=new oe(q+1),B=mt(n[p-1],$,0);if(B>s){var i=0,E=0,P=B-s,T=1<<P;for(r.sort(function(K,V){return $[V.s]-$[K.s]||K.f-V.f});i<o;++i){var W=r[i].s;if($[W]>s)E+=T-(1<<B-$[W]),$[W]=s;else break}for(E>>=P;E>0;){var J=r[i].s;$[J]<s?E-=1<<s-$[J]++-1:++i}for(;i>=0&&E;--i){var D=r[i].s;$[D]==s&&(--$[D],++E)}B=s}return{t:new X($),l:B}},mt=function(l,s,n){return l.s==-1?Math.max(mt(l.l,s,n+1),mt(l.r,s,n+1)):s[l.s]=n},At=function(l){for(var s=l.length;s&&!l[--s];);for(var n=new oe(++s),i=0,o=l[0],r=1,c=function(y){n[i++]=y},v=1;v<=s;++v)if(l[v]==o&&v!=s)++r;else{if(!o&&r>2){for(;r>138;r-=138)c(32754);r>2&&(c(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(c(o),--r;r>6;r-=6)c(8304);r>2&&(c(r-3<<5|8208),r=0)}for(;r--;)c(o);r=1,o=l[v]}return{c:n.subarray(0,i),n:s}},Ne=function(l,s){for(var n=0,i=0;i<s.length;++i)n+=l[i]*s[i];return n},Rt=function(l,s,n){var i=n.length,o=Bt(s+2);l[o]=i&255,l[o+1]=i>>8,l[o+2]=l[o]^255,l[o+3]=l[o+1]^255;for(var r=0;r<i;++r)l[o+r+4]=n[r];return(o+4+i)*8},jt=function(l,s,n,i,o,r,c,v,y,b,p){ve(s,p++,n),++o[256];for(var m=pt(o,15),q=m.t,$=m.l,B=pt(r,15),E=B.t,P=B.l,T=At(q),W=T.c,J=T.n,D=At(E),U=D.c,K=D.n,V=new oe(19),w=0;w<W.length;++w)++V[W[w]&31];for(var w=0;w<U.length;++w)++V[U[w]&31];for(var S=pt(V,7),ee=S.t,me=S.l,te=19;te>4&&!ee[qt[te-1]];--te);var xe=b+5<<3,ne=Ne(o,qe)+Ne(r,st)+c,ie=Ne(o,q)+Ne(r,E)+c+14+3*te+Ne(V,ee)+2*V[16]+3*V[17]+7*V[18];if(y>=0&&xe<=ne&&xe<=ie)return Rt(s,p,l.subarray(y,y+b));var ae,N,le,ce;if(ve(s,p,1+(ie<ne)),p+=2,ie<ne){ae=Le(q,$,0),N=q,le=Le(E,P,0),ce=E;var Ie=Le(ee,me,0);ve(s,p,J-257),ve(s,p+5,K-1),ve(s,p+10,te-4),p+=14;for(var w=0;w<te;++w)ve(s,p+3*w,ee[qt[w]]);p+=3*te;for(var re=[W,U],de=0;de<2;++de)for(var pe=re[de],w=0;w<pe.length;++w){var O=pe[w]&31;ve(s,p,Ie[O]),p+=ee[O],O>15&&(ve(s,p,pe[w]>>5&127),p+=pe[w]>>12)}}else ae=Zs,N=qe,le=Xs,ce=st;for(var w=0;w<v;++w){var G=i[w];if(G>255){var O=G>>18&31;Pe(s,p,ae[O+257]),p+=N[O+257],O>7&&(ve(s,p,G>>23&31),p+=gt[O]);var ye=G&31;Pe(s,p,le[ye]),p+=ce[ye],ye>3&&(Pe(s,p,G>>5&8191),p+=bt[ye])}else Pe(s,p,ae[G]),p+=N[G]}return Pe(s,p,ae[256]),p+N[256]},ta=new yt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ft=new X(0),sa=function(l,s,n,i,o,r){var c=r.z||l.length,v=new X(i+c+5*(1+Math.ceil(c/7e3))+o),y=v.subarray(i,v.length-o),b=r.l,p=(r.r||0)&7;if(s){p&&(y[0]=r.r>>3);for(var m=ta[s-1],q=m>>13,$=m&8191,B=(1<<n)-1,E=r.p||new oe(32768),P=r.h||new oe(B+1),T=Math.ceil(n/3),W=2*T,J=function(He){return(l[He]^l[He+1]<<T^l[He+2]<<W)&B},D=new yt(25e3),U=new oe(288),K=new oe(32),V=0,w=0,S=r.i||0,ee=0,me=r.w||0,te=0;S+2<c;++S){var xe=J(S),ne=S&32767,ie=P[xe];if(E[ne]=ie,P[xe]=ne,me<=S){var ae=c-S;if((V>7e3||ee>24576)&&(ae>423||!b)){p=jt(l,y,0,D,U,K,w,ee,te,S-te,p),ee=V=w=0,te=S;for(var N=0;N<286;++N)U[N]=0;for(var N=0;N<30;++N)K[N]=0}var le=2,ce=0,Ie=$,re=ne-ie&32767;if(ae>2&&xe==J(S-re))for(var de=Math.min(q,ae)-1,pe=Math.min(32767,S),O=Math.min(258,ae);re<=pe&&--Ie&&ne!=ie;){if(l[S+le]==l[S+le-re]){for(var G=0;G<O&&l[S+G]==l[S+G-re];++G);if(G>le){if(le=G,ce=re,G>de)break;for(var ye=Math.min(re,G-2),Je=0,N=0;N<ye;++N){var De=S-re+N&32767,ge=E[De],Ae=De-ge&32767;Ae>Je&&(Je=Ae,ie=De)}}}ne=ie,ie=E[ne],re+=ne-ie&32767}if(ce){D[ee++]=268435456|ft[le]<<18|It[ce];var L=ft[le]&31,Ge=It[ce]&31;w+=gt[L]+bt[Ge],++U[257+L],++K[Ge],me=S+le,++V}else D[ee++]=l[S],++U[l[S]]}}for(S=Math.max(S,me);S<c;++S)D[ee++]=l[S],++U[l[S]];p=jt(l,y,b,D,U,K,w,ee,te,S-te,p),b||(r.r=p&7|y[p/8|0]<<3,p-=7,r.h=P,r.p=E,r.i=S,r.w=me)}else{for(var S=r.w||0;S<c+b;S+=65535){var je=S+65535;je>=c&&(y[p/8|0]=b,je=c),p=Rt(y,p+1,l.subarray(S,je))}r.i=c}return Tt(v,0,i+Bt(p)+o)},aa=(function(){for(var l=new Int32Array(256),s=0;s<256;++s){for(var n=s,i=9;--i;)n=(n&1&&-306674912)^n>>>1;l[s]=n}return l})(),la=function(){var l=-1;return{p:function(s){for(var n=l,i=0;i<s.length;++i)n=aa[n&255^s[i]]^n>>>8;l=n},d:function(){return~l}}},na=function(l,s,n,i,o){if(!o&&(o={l:1},s.dictionary)){var r=s.dictionary.subarray(-32768),c=new X(r.length+l.length);c.set(r),c.set(l,r.length),l=c,o.w=r.length}return sa(l,s.level==null?6:s.level,s.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(l.length)))*1.5):20:12+s.mem,n,i,o)},Pt=function(l,s){var n={};for(var i in l)n[i]=l[i];for(var i in s)n[i]=s[i];return n},Y=function(l,s,n){for(;n;++s)l[s]=n,n>>>=8};function ia(l,s){return na(l,s||{},0,0)}var Nt=function(l,s,n,i){for(var o in l){var r=l[o],c=s+o,v=i;Array.isArray(r)&&(v=Pt(i,r[1]),r=r[0]),r instanceof X?n[c]=[r,v]:(n[c+="/"]=[new X(0),v],Nt(r,c,n,i))}},zt=typeof TextEncoder<"u"&&new TextEncoder,oa=typeof TextDecoder<"u"&&new TextDecoder,ra=0;try{oa.decode(Ft,{stream:!0}),ra=1}catch{}function Vt(l,s){var n;if(zt)return zt.encode(l);for(var i=l.length,o=new X(l.length+(l.length>>1)),r=0,c=function(b){o[r++]=b},n=0;n<i;++n){if(r+5>o.length){var v=new X(r+8+(i-n<<1));v.set(o),o=v}var y=l.charCodeAt(n);y<128||s?c(y):y<2048?(c(192|y>>6),c(128|y&63)):y>55295&&y<57344?(y=65536+(y&1047552)|l.charCodeAt(++n)&1023,c(240|y>>18),c(128|y>>12&63),c(128|y>>6&63),c(128|y&63)):(c(224|y>>12),c(128|y>>6&63),c(128|y&63))}return Tt(o,0,r)}var xt=function(l){var s=0;if(l)for(var n in l){var i=l[n].length;i>65535&&lt(9),s+=i+4}return s},$t=function(l,s,n,i,o,r,c,v){var y=i.length,b=n.extra,p=v&&v.length,m=xt(b);Y(l,s,c!=null?33639248:67324752),s+=4,c!=null&&(l[s++]=20,l[s++]=n.os),l[s]=20,s+=2,l[s++]=n.flag<<1|(r<0&&8),l[s++]=o&&8,l[s++]=n.compression&255,l[s++]=n.compression>>8;var q=new Date(n.mtime==null?Date.now():n.mtime),$=q.getFullYear()-1980;if(($<0||$>119)&&lt(10),Y(l,s,$<<25|q.getMonth()+1<<21|q.getDate()<<16|q.getHours()<<11|q.getMinutes()<<5|q.getSeconds()>>1),s+=4,r!=-1&&(Y(l,s,n.crc),Y(l,s+4,r<0?-r-2:r),Y(l,s+8,n.size)),Y(l,s+12,y),Y(l,s+14,m),s+=16,c!=null&&(Y(l,s,p),Y(l,s+6,n.attrs),Y(l,s+10,c),s+=14),l.set(i,s),s+=y,m)for(var B in b){var E=b[B],P=E.length;Y(l,s,+B),Y(l,s+2,P),l.set(E,s+4),s+=4+P}return p&&(l.set(v,s),s+=p),s},da=function(l,s,n,i,o){Y(l,s,101010256),Y(l,s+8,n),Y(l,s+10,n),Y(l,s+12,i),Y(l,s+16,o)};function ua(l,s){s||(s={});var n={},i=[];Nt(l,"",n,s);var o=0,r=0;for(var c in n){var v=n[c],y=v[0],b=v[1],p=b.level==0?0:8,m=Vt(c),q=m.length,$=b.comment,B=$&&Vt($),E=B&&B.length,P=xt(b.extra);q>65535&&lt(11);var T=p?ia(y,b):y,W=T.length,J=la();J.p(y),i.push(Pt(b,{size:y.length,crc:J.d(),c:T,f:m,m:B,u:q!=c.length||B&&$.length!=E,o,compression:p})),o+=30+q+P+W,r+=76+2*(q+P)+(E||0)+W}for(var D=new X(r+22),U=o,K=r-o,V=0;V<i.length;++V){var m=i[V];$t(D,m.o,m,m.f,m.u,m.c.length);var w=30+m.f.length+xt(m.extra);D.set(m.c,m.o+w),$t(D,o,m,m.f,m.u,m.c.length,m.o,m.m),o+=16+w+(m.m?m.m.length:0)}return da(D,o,i.length,K,U),D}function ca(){const l=_s("install-prompt",()=>null),s=se(()=>typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches),n=se(()=>!s.value&&l.value!==null),i=se(()=>{if(typeof navigator>"u")return!1;const v=navigator.userAgent,y=/iphone|ipad|ipod/i.test(v),b=/safari/i.test(v)&&!/chrome|crios|fxios|edgios|edg\//i.test(v);return y&&b&&!s.value}),o=se(()=>{if(typeof navigator>"u"||s.value||i.value)return!1;const v=navigator.userAgent;return/iphone|ipad|ipod/i.test(v)?!1:!(/chrome|chromium|crios/i.test(v)&&!/edge\/[0-9]/i.test(v)||/edg\//i.test(v)||/opr\//i.test(v))}),r=A(!1);async function c(){if(l.value){r.value=!0;try{await l.value.prompt();const{outcome:v}=await l.value.userChoice;v==="accepted"&&(l.value=null)}finally{r.value=!1}}}return{isInstalled:s,canInstall:n,isIosSafari:i,isUnsupportedBrowser:o,installing:r,install:c}}const pa={class:"space-y-6"},fa={class:"space-y-2"},va={class:"flex items-center justify-between px-4 py-3.5"},ma={class:"flex items-center justify-between px-4 py-3.5"},xa={class:"flex items-center justify-between px-4 py-3.5"},ya={class:"flex items-center justify-between px-4 py-3"},ga={class:"flex items-center justify-between px-4 py-3"},ba={key:0,class:"flex items-center justify-between px-4 pb-3"},ha={class:"flex items-center gap-2"},ka={class:"w-4 text-center text-sm font-medium tabular-nums"},wa={class:"flex items-center justify-between px-4 py-3"},Sa={class:"flex items-center justify-between px-4 py-3"},_a={class:"flex items-center justify-between px-4 py-3"},Ca={class:"flex items-center justify-between px-4 py-3"},qa={class:"px-4 py-3 pb-4 space-y-2"},Ia={class:"flex gap-2"},Aa={class:"space-y-2"},ja={class:"flex items-center justify-between px-4 py-3.5"},za={class:"flex items-center justify-between px-4 py-3.5"},Va={key:0,class:"flex items-center justify-between px-4 py-3.5"},$a={class:"flex items-center justify-between px-4 py-3.5"},Ua={class:"space-y-0.5"},Oa={class:"text-xs"},Ea={key:0,class:"text-amber-400"},Ma={key:0,class:"text-green-400"},Da={key:1,class:"text-red-400"},Ha={key:2,class:"text-slate-500"},Ba={class:"shrink-0"},Ta={key:1,class:"w-2 h-2 rounded-full bg-green-400 mx-2"},Ra={key:1,class:"flex items-center justify-between px-4 py-3.5"},Fa={key:2,class:"flex items-center justify-between px-4 py-3.5"},Pa={key:3,class:"px-4 py-3.5 space-y-1"},Na={class:"flex items-start gap-3"},La={class:"space-y-1"},Wa={class:"text-xs text-slate-400"},Ja={key:4,class:"px-4 py-3.5"},Ga={class:"flex items-start gap-3"},Qa={key:5,class:"flex items-center justify-between px-4 py-3.5"},Ka={class:"space-y-2"},Ya={class:"flex items-center justify-between px-4 py-3.5"},Za={class:"flex items-center justify-between px-4 py-3.5"},Xa={class:"flex items-center justify-between px-4 py-3.5"},el={class:"flex items-center justify-between px-4 py-3.5"},tl={class:"space-y-2"},sl={class:"flex items-center justify-between px-4 py-3.5"},al={class:"text-sm font-mono font-medium"},ll={class:"flex items-center justify-between px-4 py-3.5"},nl={class:"text-sm font-mono text-slate-300"},il={key:0,class:"flex items-center justify-between px-4 py-3.5"},ol={class:"flex items-center justify-between px-4 py-3.5"},rl={class:"flex items-center gap-2 shrink-0"},dl={key:0,class:"border-t border-slate-800 px-4 py-3 space-y-2"},ul={key:0,class:"flex items-center gap-2 text-xs text-slate-500"},cl={class:"flex items-center gap-2 mb-3"},pl={class:"font-mono text-xs text-slate-200"},fl=["onClick"],vl={class:"text-xs font-mono text-slate-300"},ml={key:0,class:"text-[10px] leading-relaxed font-mono text-slate-400 bg-slate-950 px-3 py-2 overflow-x-auto border-t border-slate-800"},xl=["onClick"],yl={class:"min-w-0 text-left"},gl={class:"text-xs font-mono text-slate-400"},bl={class:"text-[10px] text-slate-600 ml-2"},hl={key:0,class:"text-[10px] leading-relaxed font-mono text-slate-400 bg-slate-950 px-3 py-2 overflow-x-auto border-t border-slate-800"},kl={class:"space-y-2"},wl={class:"flex items-start justify-between px-4 py-3.5 gap-3"},Sl={class:"space-y-0.5 min-w-0"},_l={key:0,class:"mt-1.5"},Cl={key:0,class:"text-xs text-green-400 flex items-center gap-1"},ql={key:1,class:"space-y-0.5"},Il={class:"flex items-center gap-2 shrink-0"},Al={key:0,class:"text-xs text-slate-500"},jl={key:0,class:"border-t border-slate-800 px-4 py-3"},zl={key:0,class:"flex items-center gap-2 text-xs text-slate-500"},Vl={key:1,class:"text-xs text-slate-500"},$l={key:2,class:"space-y-1.5"},Ul={class:"text-[11px] font-mono text-slate-300 truncate"},Ol={class:"text-[11px] font-mono text-slate-500 shrink-0"},El={class:"flex items-center justify-between px-4 py-3.5"},Ml={class:"px-4 py-3.5 space-y-2"},Dl={class:"flex items-center justify-between"},Hl={class:"space-y-1"},Bl={class:"flex justify-between text-xs text-slate-400"},Tl={class:"h-1.5 rounded-full bg-slate-800 overflow-hidden"},Rl={class:"flex items-center justify-between gap-2"},Fl={class:"flex items-center gap-1.5 text-xs"},Pl={class:"space-y-2"},Nl={class:"flex items-center justify-between px-4 py-3.5"},Ll={class:"flex items-center justify-between px-4 py-3.5"},Wl={class:"flex items-center justify-between px-4 py-3.5"},Jl={class:"p-5 space-y-4"},Gl={class:"flex items-center justify-between"},Ql={class:"flex items-center gap-2.5 cursor-pointer"},Kl=["checked","indeterminate"],Yl={class:"space-y-3"},Zl={class:"text-xs font-semibold uppercase tracking-wider text-slate-500"},Xl={class:"border border-slate-800 rounded-xl divide-y divide-slate-800 overflow-hidden"},en=["onUpdate:modelValue"],tn={class:"text-sm text-slate-300"},sn={key:0,class:"space-y-1"},an={class:"flex justify-end gap-2 pt-1"},ln={key:0,class:"p-5 space-y-4"},nn={class:"flex items-start gap-3"},on={class:"w-10 h-10 rounded-full bg-red-500/10 flex items-center justify-center flex-shrink-0"},rn={class:"space-y-1"},dn={class:"text-sm text-slate-400"},un={class:"flex justify-end"},cn={key:1,class:"p-5 space-y-4"},pn={class:"flex items-start gap-3"},fn={class:"w-10 h-10 rounded-full bg-green-500/10 flex items-center justify-center flex-shrink-0"},vn={class:"flex justify-end"},mn={key:2,class:"p-5 space-y-4"},xn={class:"flex items-start gap-3"},yn={class:"w-10 h-10 rounded-full bg-primary-500/10 flex items-center justify-center flex-shrink-0"},gn={class:"border border-slate-800 rounded-xl p-3 space-y-1"},bn={class:"text-xs text-slate-500 mb-2"},hn={key:0,class:"flex items-center justify-between text-xs"},kn={class:"text-slate-400"},wn={class:"font-mono text-slate-300"},Sn={class:"flex justify-end gap-2 pt-1"},_n={class:"p-5 space-y-4"},Cn={class:"flex items-start gap-3"},qn={class:"w-10 h-10 rounded-full bg-red-500/10 flex items-center justify-center flex-shrink-0"},In={class:"space-y-1 border border-slate-800 rounded-xl divide-y divide-slate-800 overflow-hidden"},An=["onUpdate:modelValue"],jn={class:"min-w-0"},zn={class:"text-sm font-medium text-slate-200 leading-snug"},Vn={class:"text-xs text-slate-500 leading-snug"},$n={class:"flex justify-end gap-2 pt-1"},Un={key:0,class:"p-5 space-y-4"},On={class:"flex items-start gap-3"},En={class:"w-10 h-10 rounded-full bg-green-500/10 flex items-center justify-center flex-shrink-0"},Mn={key:1,class:"p-5 space-y-4"},Dn={class:"flex items-start gap-3"},Hn={class:"w-10 h-10 rounded-full bg-red-500/10 flex items-center justify-center flex-shrink-0"},Bn={class:"flex justify-end gap-2 pt-1"},Tn={class:"p-5 space-y-5"},Rn={class:"space-y-3"},Fn={class:"flex items-center gap-3 cursor-pointer"},Pn={key:0,class:"ml-7"},Nn={class:"space-y-3"},Ln={class:"flex items-center gap-3 cursor-pointer"},Wn={key:0,class:"ml-7 space-y-2"},Jn=["onClick"],Gn={class:"flex justify-end gap-2 pt-1"},ti=We({__name:"settings",setup(l){const s=As(),n=js(),{settings:i,set:o}=Es(),r=[{label:"Habits",items:[{key:"habits",label:"Habits"},{key:"completions",label:"Completions",parent:"habits"},{key:"habit_logs",label:"Habit logs",parent:"habits"},{key:"habit_schedules",label:"Habit schedules",parent:"habits"},{key:"reminders",label:"Habit reminders",parent:"habits"}]},{label:"Check-ins",items:[{key:"checkin_templates",label:"Templates"},{key:"checkin_questions",label:"Questions",parent:"checkin_templates"},{key:"checkin_responses",label:"Responses",parent:"checkin_questions"},{key:"checkin_reminders",label:"Reminders",parent:"checkin_templates"}]},{label:"Other",items:[{key:"scribbles",label:"Scribbles"},{key:"checkin_entries",label:"Journal entries"}]}];function c(){return{habits:!0,completions:!0,habit_logs:!0,habit_schedules:!0,reminders:!0,checkin_templates:!0,checkin_questions:!0,checkin_responses:!0,checkin_reminders:!0,scribbles:!0,checkin_entries:!0}}const v=A(!1),y=A(!1),b=ct(c()),p=A([]),m=Object.keys(c()),q=se(()=>m.every(g=>b[g])),$=se(()=>m.every(g=>!b[g]));function B(){const g=!q.value;for(const e of m)b[e]=g}function E(){Object.assign(b,c()),p.value=[],v.value=!0}function P(){return[["completions","habits","Completions","Habits"],["habit_logs","habits","Habit logs","Habits"],["habit_schedules","habits","Habit schedules","Habits"],["reminders","habits","Habit reminders","Habits"],["checkin_questions","checkin_templates","Questions","Check-in templates"],["checkin_responses","checkin_questions","Responses","Check-in questions"],["checkin_reminders","checkin_templates","Check-in reminders","Check-in templates"]].filter(([e,h])=>b[e]&&!b[h]).map(([,,e,h])=>`${e} require ${h}`)}async function T(){if(s.isAvailable&&(p.value=P(),!(p.value.length>0))){y.value=!0;try{const g=await s.exportJsonData({...b}),e=JSON.stringify(g,null,2),h=URL.createObjectURL(new Blob([e],{type:"application/json"}));try{const M=document.createElement("a");M.href=h,M.download=`habitat-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(M),M.click(),document.body.removeChild(M)}finally{URL.revokeObjectURL(h)}v.value=!1}finally{y.value=!1}}}const W=A(!1);async function J(){if(s.isAvailable){W.value=!0;try{const g=await s.exportDb(),e=URL.createObjectURL(new Blob([g],{type:"application/x-sqlite3"}));try{const h=document.createElement("a");h.href=e,h.download=`habitat-${new Date().toISOString().slice(0,10)}.sqlite3`,document.body.appendChild(h),h.click(),document.body.removeChild(h)}finally{URL.revokeObjectURL(e)}}finally{W.value=!1}}}const D=A(null),U=A(!1),K=A(!1),V=A(null),w=A(null),S=A(!1);function ee(){V.value=null,w.value=null,S.value=!1,D.value?.click()}async function me(g){const e=g.target.files?.[0];if(e){g.target.value="";try{const h=JSON.parse(await e.text());if(typeof h!="object"||h===null){w.value="Invalid file.",U.value=!0;return}const M=h.version;if(typeof M!="number"){w.value="Missing version field — not a Habitat export.",U.value=!0;return}if(M!==1){w.value=`Unsupported version ${M}. This app supports version 1.`,U.value=!0;return}V.value=h,U.value=!0}catch{w.value="Could not parse file as JSON.",U.value=!0}}}function te(){window.location.reload()}async function xe(){if(!(!V.value||!s.isAvailable)){K.value=!0;try{await s.importJson(V.value),S.value=!0,V.value=null}finally{K.value=!1}}}function ne(){return new Promise((g,e)=>{const h=indexedDB.open("habitat",1);h.onupgradeneeded=()=>h.result.createObjectStore("voice_notes",{keyPath:"id"}),h.onsuccess=()=>g(h.result),h.onerror=()=>e(h.error)})}function ie(g){return new Promise((e,h)=>{const M=g.transaction("voice_notes","readonly").objectStore("voice_notes").getAll();M.onsuccess=()=>e(M.result),M.onerror=()=>h(M.error)})}const ae=A(!1);async function N(){ae.value=!0;try{const g=await ne(),e=await ie(g);if(e.length===0)return;const h={};for(const k of e){const Se=k.mimeType.split("/")[1]?.split(";")[0]??"audio",_e=k.created_at.slice(0,19).replace(/[:.]/g,"-");h[`${_e}.${Se}`]=new Uint8Array(await k.blob.arrayBuffer())}const M=ua(h),I=URL.createObjectURL(new Blob([M.buffer],{type:"application/zip"}));try{const k=document.createElement("a");k.href=I,k.download=`habitat-voice-${new Date().toISOString().slice(0,10)}.zip`,document.body.appendChild(k),k.click(),document.body.removeChild(k)}finally{URL.revokeObjectURL(I)}}finally{ae.value=!1}}function le(){return new Promise(g=>{const e=indexedDB.deleteDatabase("habitat");e.onsuccess=()=>g(),e.onerror=()=>g(),e.onblocked=()=>g()})}function ce(){for(const g of Object.keys(localStorage))g.startsWith("checkin-")&&localStorage.removeItem(g)}const Ie=A(!1);async function re(g){localStorage.removeItem("habitat-has-data"),await s.nukeOpfs(),await le(),ce(),g?window.location.reload():Ie.value=!0}const de=A(!1),pe=A(!1),O=ct({enableSteps:!0,stepGoal:1e4,enableMeals:!0,meals:[{name:"Breakfast",calories:600},{name:"Lunch",calories:600},{name:"Dinner",calories:600}]});function G(){O.meals.push({name:"",calories:600})}function ye(g){O.meals.splice(g,1)}async function Je(g){o("enableHealth",g),g&&s.isAvailable&&((await s.getHabits()).some(h=>h.tags.includes("habitat-health"))||(de.value=!0))}async function De(){if(s.isAvailable){pe.value=!0;try{const g={description:"",frequency:"daily",annotations:{},paused_until:null};if(O.enableSteps&&await s.createHabit({...g,name:"Steps",type:"NUMERIC",target_value:O.stepGoal,color:"#ef4444",icon:"i-heroicons-fire",tags:["habitat-health","habitat-steps"]}),O.enableMeals)for(const e of O.meals)e.name.trim()&&await s.createHabit({...g,name:e.name.trim(),type:"LIMIT",target_value:e.calories,color:"#f59e0b",icon:"i-heroicons-sparkles",tags:["habitat-health","habitat-meals"]});de.value=!1}finally{pe.value=!1}}}const ge=A(!1),Ae=A(!1),L=ct({habits:!0,checkinEntries:!0,checkins:!0,scribbles:!0,voiceNotes:!0,appliedDefaults:!1}),Ge=[{key:"habits",label:"Habits & completions",description:"All habits, logs, and completion history"},{key:"checkinEntries",label:"Check-in entries",description:"Daily check-in answers stored in the DB"},{key:"checkins",label:"Check-in templates & responses",description:"All templates, questions, and recorded answers"},{key:"scribbles",label:"Scribbles",description:"All free-form notes"},{key:"voiceNotes",label:"Voice recordings",description:"IndexedDB audio data"},{key:"appliedDefaults",label:"Applied defaults",description:"Re-enables seeding of default check-in templates"}],je=se(()=>!(L.habits||L.checkinEntries||L.checkins||L.scribbles||L.voiceNotes||L.appliedDefaults));async function He(){if(!(!s.isAvailable||je.value)){Ae.value=!0;try{const g=[];L.habits&&g.push(s.deleteAllHabits()),L.checkinEntries&&g.push(s.deleteAllCheckinEntries()),L.checkins&&g.push(s.deleteAllCheckinData()),L.scribbles&&g.push(s.deleteAllScribbles()),L.appliedDefaults&&g.push(s.clearAppliedDefaults()),await Promise.all(g),L.checkinEntries&&ce(),L.voiceNotes&&await le(),L.habits&&localStorage.removeItem("habitat-has-data"),ge.value=!1}finally{Ae.value=!1}}}const ze=A(!1),Qe=A(!1);async function ht(g){if(s.isAvailable){Qe.value=!0;try{await re(g)}catch{ze.value=!1}finally{Qe.value=!1}}}const we=A(null),nt=A(!1);async function Lt(){if(s.isAvailable){nt.value=!0,we.value=null;try{we.value=await s.integrityCheck()}finally{nt.value=!1}}}const Wt=se(()=>we.value!==null&&we.value.length===1&&we.value[0]==="ok"),Be=A(!1),fe=A(null),it=A(!1),be=A(null);async function Jt(){if(s.isAvailable){it.value=!0;try{fe.value=await s.getDbInfo()}finally{it.value=!1}}}function Gt(){Be.value=!Be.value,Be.value&&!fe.value&&Jt()}const Te=A(!1),Ve=A([]),ot=A(!1);async function kt(g,e=""){const h=[];for await(const[M,I]of g.entries()){const k=e?`${e}/${M}`:M;if(I.kind==="directory")h.push(...await kt(I,k));else{const Se=await I.getFile();h.push({path:k,size:Se.size})}}return h}async function wt(){ot.value=!0;try{const g=await navigator.storage.getDirectory();Ve.value=await kt(g)}finally{ot.value=!1}}function Qt(){Te.value=!Te.value,Te.value&&wt()}function rt(g){return g<1024?`${g} B`:g<1024*1024?`${(g/1024).toFixed(1)} KB`:`${(g/(1024*1024)).toFixed(2)} MB`}const dt=A(!1);async function Kt(){dt.value=!0;try{if("serviceWorker"in navigator){const g=await navigator.serviceWorker.getRegistrations();await Promise.all(g.map(e=>e.unregister()))}if("caches"in window){const g=await caches.keys();await Promise.all(g.map(e=>caches.delete(e)))}window.location.reload()}catch{dt.value=!1}}const{isInstalled:Yt,canInstall:Zt,isIosSafari:Ke,isUnsupportedBrowser:Xt,installing:es,install:ts}=ca(),{permission:$e,requestPermission:ss,sendTestNotification:as}=Cs();async function ls(){await ss()}const Ue=A(null),he=A(null);async function St(){"storage"in navigator&&("estimate"in navigator.storage&&(Ue.value=await navigator.storage.estimate()),"persisted"in navigator.storage&&(he.value=await navigator.storage.persisted()))}async function ns(){"storage"in navigator&&"persist"in navigator.storage&&(he.value=await navigator.storage.persist())}const Ye=A(!1),Re=A(!1),Ze=A(!1);return Ut(Re,g=>{g&&St()}),(g,e)=>{const h=Js,M=$s,I=qs,k=Ee,Se=Qs,_e=Us,ut=Os,is=Vs;return u(),x("div",pa,[e[129]||(e[129]=t("header",null,[t("p",{class:"text-sm text-slate-500"},"Preferences"),t("h2",{class:"text-2xl font-bold"},"Settings")],-1)),t("section",fa,[e[54]||(e[54]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-slate-500 px-1"},"Display",-1)),f(M,{ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:C(()=>[t("div",va,[e[38]||(e[38]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"24-hour time"),t("p",{class:"text-xs text-slate-500"},"Show times as 17:34 instead of 5:34 PM.")],-1)),f(h,{"model-value":a(i).use24HourTime,"onUpdate:modelValue":e[0]||(e[0]=d=>a(o)("use24HourTime",d))},null,8,["model-value"])]),t("div",ma,[e[39]||(e[39]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Sticky bottom bar"),t("p",{class:"text-xs text-slate-500"},"Keep the nav bar fixed at the bottom when scrolling.")],-1)),f(h,{"model-value":a(i).stickyNav,"onUpdate:modelValue":e[1]||(e[1]=d=>a(o)("stickyNav",d))},null,8,["model-value"])]),t("div",xa,[e[40]||(e[40]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Extra bottom padding"),t("p",{class:"text-xs text-slate-500"},"Add space below the nav for Android gesture buttons.")],-1)),f(h,{"model-value":a(i).navExtraPadding,"onUpdate:modelValue":e[2]||(e[2]=d=>a(o)("navExtraPadding",d))},null,8,["model-value"])]),e[50]||(e[50]=t("div",{class:"px-4 pt-3 pb-1"},[t("p",{class:"text-[10px] font-semibold uppercase tracking-wider text-slate-600"},"Navigation")],-1)),t("div",ya,[e[41]||(e[41]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Today tab"),t("p",{class:"text-xs text-slate-500"},"Show daily progress and log habits for today.")],-1)),f(h,{"model-value":a(i).enableToday,"onUpdate:modelValue":e[3]||(e[3]=d=>a(o)("enableToday",d))},null,8,["model-value"])]),t("div",null,[t("div",ga,[e[42]||(e[42]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Week view"),t("p",{class:"text-xs text-slate-500"},"Quick-fill view for logging multiple days at once.")],-1)),f(h,{"model-value":a(i).enableWeek,"onUpdate:modelValue":e[4]||(e[4]=d=>a(o)("enableWeek",d))},null,8,["model-value"])]),a(i).enableWeek?(u(),x("div",ba,[e[43]||(e[43]=t("p",{class:"text-sm text-slate-400"},"Days to show",-1)),t("div",ha,[t("button",{class:"w-7 h-7 rounded-lg bg-slate-800 border border-slate-700 text-slate-300 flex items-center justify-center text-sm",onClick:e[5]||(e[5]=d=>a(o)("weekDays",Math.max(3,(a(i).weekDays||3)-1)))},"−"),t("span",ka,z(a(i).weekDays||3),1),t("button",{class:"w-7 h-7 rounded-lg bg-slate-800 border border-slate-700 text-slate-300 flex items-center justify-center text-sm",onClick:e[6]||(e[6]=d=>a(o)("weekDays",Math.min(7,(a(i).weekDays||3)+1)))},"+")])])):j("",!0)]),e[51]||(e[51]=t("div",{class:"px-4 pt-3 pb-1"},[t("p",{class:"text-[10px] font-semibold uppercase tracking-wider text-slate-600"},"Habits page")],-1)),t("div",wa,[e[44]||(e[44]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Show tags"),t("p",{class:"text-xs text-slate-500"},"Display habit tags in the habits list.")],-1)),f(h,{"model-value":a(i).showTagsOnHabits,"onUpdate:modelValue":e[7]||(e[7]=d=>a(o)("showTagsOnHabits",d))},null,8,["model-value"])]),t("div",Sa,[e[45]||(e[45]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Show annotations"),t("p",{class:"text-xs text-slate-500"},"Display key:value metadata in the habits list.")],-1)),f(h,{"model-value":a(i).showAnnotationsOnHabits,"onUpdate:modelValue":e[8]||(e[8]=d=>a(o)("showAnnotationsOnHabits",d))},null,8,["model-value"])]),e[52]||(e[52]=t("div",{class:"px-4 pt-3 pb-1"},[t("p",{class:"text-[10px] font-semibold uppercase tracking-wider text-slate-600"},"Today page")],-1)),t("div",_a,[e[46]||(e[46]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Show tags"),t("p",{class:"text-xs text-slate-500"},"Display habit tags in today's list.")],-1)),f(h,{"model-value":a(i).showTagsOnToday,"onUpdate:modelValue":e[9]||(e[9]=d=>a(o)("showTagsOnToday",d))},null,8,["model-value"])]),t("div",Ca,[e[47]||(e[47]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Show annotations"),t("p",{class:"text-xs text-slate-500"},"Display key:value metadata in today's list.")],-1)),f(h,{"model-value":a(i).showAnnotationsOnToday,"onUpdate:modelValue":e[10]||(e[10]=d=>a(o)("showAnnotationsOnToday",d))},null,8,["model-value"])]),e[53]||(e[53]=t("div",{class:"px-4 pt-3 pb-1"},[t("p",{class:"text-[10px] font-semibold uppercase tracking-wider text-slate-600"},"Log entries")],-1)),t("div",qa,[e[48]||(e[48]=t("p",{class:"text-sm font-medium"},"Input mode",-1)),e[49]||(e[49]=t("p",{class:"text-xs text-slate-500 mb-2"},"How numeric values are applied when logging a habit.",-1)),t("div",Ia,[t("button",{class:Z(["flex-1 py-2 px-3 rounded-xl text-xs font-medium border transition-colors",a(i).logInputMode==="increment"?"bg-primary-500/15 border-primary-500/40 text-primary-300":"bg-slate-800 border-slate-700 text-slate-400"]),onClick:e[11]||(e[11]=d=>a(o)("logInputMode","increment"))}," Add to total ",2),t("button",{class:Z(["flex-1 py-2 px-3 rounded-xl text-xs font-medium border transition-colors",a(i).logInputMode==="absolute"?"bg-primary-500/15 border-primary-500/40 text-primary-300":"bg-slate-800 border-slate-700 text-slate-400"]),onClick:e[12]||(e[12]=d=>a(o)("logInputMode","absolute"))}," Set total ",2)])])]),_:1})]),t("section",Aa,[e[72]||(e[72]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-slate-500 px-1"},"Features",-1)),f(M,{ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:C(()=>[t("div",ja,[e[55]||(e[55]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Enable Journalling"),t("p",{class:"text-xs text-slate-500"},"Show Check-in, Scribbles, and Voice in the navigation.")],-1)),f(h,{"model-value":a(i).enableJournalling,"onUpdate:modelValue":e[13]||(e[13]=d=>a(o)("enableJournalling",d))},null,8,["model-value"])]),t("div",za,[e[56]||(e[56]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Enable Health"),t("p",{class:"text-xs text-slate-500"},"Track daily steps and meal calories.")],-1)),f(h,{"model-value":a(i).enableHealth,"onUpdate:modelValue":Je},null,8,["model-value"])]),a(i).enableJournalling?(u(),x("div",Va,[e[57]||(e[57]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Save transcriptions"),t("p",{class:"text-xs text-slate-500"},[_("After recording, offer to save the speech-to-text transcript as a Scribble tagged "),t("code",{class:"text-slate-400"},"habitat-transcribed"),_(".")])],-1)),f(h,{"model-value":a(i).saveTranscribedNotes,"onUpdate:modelValue":e[14]||(e[14]=d=>a(o)("saveTranscribedNotes",d))},null,8,["model-value"])])):j("",!0),t("div",$a,[t("div",Ua,[e[58]||(e[58]=t("p",{class:"text-sm font-medium"},"Notifications",-1)),t("p",Oa,[a(Ke)?(u(),x("span",Ea,"Install the app first — iOS only allows notifications in installed PWAs")):(u(),x(F,{key:1},[a($e)==="granted"?(u(),x("span",Ma,"Enabled — add reminders on individual habit pages")):a($e)==="denied"?(u(),x("span",Da,"Blocked — allow in browser/OS settings to enable")):(u(),x("span",Ha,"Not enabled — grant permission to receive reminders"))],64))])]),t("div",Ba,[a($e)==="default"&&!a(Ke)?(u(),R(I,{key:0,size:"sm",variant:"soft",color:"neutral",icon:"i-heroicons-bell",onClick:ls},{default:C(()=>[...e[59]||(e[59]=[_(" Enable ",-1)])]),_:1})):a($e)==="granted"?(u(),x("div",Ta)):a($e)==="denied"?(u(),R(k,{key:2,name:"i-heroicons-bell-slash",class:"w-5 h-5 text-red-400 mx-1"})):a(Ke)?(u(),R(k,{key:3,name:"i-heroicons-bell-slash",class:"w-5 h-5 text-amber-400 mx-1"})):j("",!0)])]),a(Yt)?(u(),x("div",Ra,[...e[60]||(e[60]=[t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Habitat is installed"),t("p",{class:"text-xs text-green-400"},"Running as a standalone app")],-1),t("div",{class:"w-2 h-2 rounded-full bg-green-400 mx-2 shrink-0"},null,-1)])])):a(Zt)?(u(),x("div",Fa,[e[62]||(e[62]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Install Habitat"),t("p",{class:"text-xs text-slate-500"},"Add to your home screen for offline access and notifications")],-1)),f(I,{size:"sm",variant:"soft",color:"primary",icon:"i-heroicons-arrow-down-tray",loading:a(es),class:"shrink-0",onClick:a(ts)},{default:C(()=>[...e[61]||(e[61]=[_(" Install ",-1)])]),_:1},8,["loading","onClick"])])):a(Ke)?(u(),x("div",Pa,[t("div",Na,[f(k,{name:"i-heroicons-device-phone-mobile",class:"w-5 h-5 text-slate-400 shrink-0 mt-0.5"}),t("div",La,[e[69]||(e[69]=t("p",{class:"text-sm font-medium"},"Install on iOS",-1)),t("p",Wa,[e[63]||(e[63]=_(" Tap the ",-1)),e[64]||(e[64]=t("span",{class:"font-semibold text-slate-300"},"Share",-1)),e[65]||(e[65]=_(" button ",-1)),f(k,{name:"i-heroicons-arrow-up-on-square",class:"inline w-3.5 h-3.5 align-text-bottom"}),e[66]||(e[66]=_(" then choose ",-1)),e[67]||(e[67]=t("span",{class:"font-semibold text-slate-300"},"Add to Home Screen",-1)),e[68]||(e[68]=_(". ",-1))])])])])):a(Xt)?(u(),x("div",Ja,[t("div",Ga,[f(k,{name:"i-heroicons-exclamation-circle",class:"w-5 h-5 text-amber-400 shrink-0 mt-0.5"}),e[70]||(e[70]=t("div",{class:"space-y-1"},[t("p",{class:"text-sm font-medium"},"Use Chrome, Edge, Brave, or Opera"),t("p",{class:"text-xs text-slate-500"},"Required for OPFS storage, home screen install, and background notifications.")],-1))])])):(u(),x("div",Qa,[...e[71]||(e[71]=[t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Install Habitat"),t("p",{class:"text-xs text-slate-500"},"Open in Chrome or Edge to install as a standalone app")],-1)])]))]),_:1})]),t("section",Ka,[e[77]||(e[77]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-slate-500 px-1"},"Data",-1)),f(M,{ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:C(()=>[t("div",Ya,[e[73]||(e[73]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Export data"),t("p",{class:"text-xs text-slate-500"},"Download selected data as a versioned JSON file.")],-1)),f(I,{icon:"i-heroicons-arrow-down-tray",variant:"ghost",color:"neutral",size:"sm",disabled:!a(s).isAvailable,onClick:E},null,8,["disabled"])]),t("div",Za,[e[74]||(e[74]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Import data"),t("p",{class:"text-xs text-slate-500"},"Merge from a Habitat JSON export. Existing records are kept.")],-1)),t("input",{ref_key:"importInput",ref:D,type:"file",accept:".json",class:"hidden",onChange:me},null,544),f(I,{icon:"i-heroicons-arrow-up-tray",variant:"ghost",color:"neutral",size:"sm",disabled:!a(s).isAvailable,onClick:ee},null,8,["disabled"])]),t("div",Xa,[e[75]||(e[75]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Export SQLite"),t("p",{class:"text-xs text-slate-500"},[_("Download the raw "),t("span",{class:"font-mono"},".sqlite3"),_(" database file.")])],-1)),f(I,{icon:"i-heroicons-circle-stack",variant:"ghost",color:"neutral",size:"sm",loading:a(W),disabled:!a(s).isAvailable,onClick:J},null,8,["loading","disabled"])]),t("div",el,[e[76]||(e[76]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Export voice notes"),t("p",{class:"text-xs text-slate-500"},[_("Download all voice recordings as a "),t("span",{class:"font-mono"},".zip"),_(" archive.")])],-1)),f(I,{icon:"i-heroicons-musical-note",variant:"ghost",color:"neutral",size:"sm",loading:a(ae),onClick:N},null,8,["loading"])])]),_:1})]),t("section",tl,[t("button",{class:"w-full flex items-center justify-between px-1 py-0.5",onClick:e[15]||(e[15]=d=>Ye.value=!a(Ye))},[e[78]||(e[78]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-slate-500"},"About",-1)),f(k,{name:a(Ye)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",class:"w-3.5 h-3.5 text-slate-600"},null,8,["name"])]),a(Ye)?(u(),R(M,{key:0,ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:C(()=>[e[87]||(e[87]=t("div",{class:"flex items-center justify-between px-4 py-3.5"},[t("p",{class:"text-sm text-slate-400"},"App"),t("p",{class:"text-sm font-medium"},"Habitat")],-1)),t("div",sl,[e[79]||(e[79]=t("p",{class:"text-sm text-slate-400"},"Version",-1)),t("p",al,z(a(n).public.appVersion||"—"),1)]),t("div",ll,[e[80]||(e[80]=t("p",{class:"text-sm text-slate-400"},"Commit",-1)),t("p",nl,z(a(n).public.commitSha||"—"),1)]),a(n).public.gitTag.length>0?(u(),x("div",il,[e[81]||(e[81]=t("p",{class:"text-sm text-slate-400"},"Tag",-1)),f(Se,{label:a(n).public.gitTag,variant:"subtle",color:"primary",size:"sm",class:"rounded-full font-mono"},null,8,["label"])])):j("",!0),t("div",ol,[e[82]||(e[82]=t("p",{class:"text-sm text-slate-400"},"Build",-1)),f(Se,{label:a(n).public.buildTarget,variant:"subtle",color:"neutral",size:"sm",class:"rounded-full font-mono"},null,8,["label"])]),e[88]||(e[88]=t("div",{class:"flex items-center justify-between px-4 py-3.5"},[t("p",{class:"text-sm text-slate-400"},"Storage"),t("p",{class:"text-sm font-medium"},"On-device (OPFS)")],-1)),t("div",null,[t("button",{class:"w-full flex items-center justify-between px-4 py-3.5 text-left",onClick:Gt},[e[83]||(e[83]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm text-slate-400"},"Database schema")],-1)),t("div",rl,[a(fe)?(u(),R(Se,{key:0,label:`v${a(fe).userVersion}`,variant:"subtle",color:"neutral",size:"sm",class:"font-mono rounded-full"},null,8,["label"])):j("",!0),f(k,{name:a(Be)?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-4 h-4 text-slate-500"},null,8,["name"])])]),a(Be)?(u(),x("div",dl,[a(it)?(u(),x("div",ul,[f(k,{name:"i-heroicons-arrow-path",class:"w-3.5 h-3.5 animate-spin"}),e[84]||(e[84]=_(" Loading… ",-1))])):a(fe)?(u(),x(F,{key:1},[t("div",cl,[e[85]||(e[85]=t("span",{class:"text-xs text-slate-500"},"Schema version:",-1)),t("span",pl,z(a(fe).userVersion),1)]),(u(!0),x(F,null,ue(a(fe).tables,d=>(u(),x("div",{key:d.name,class:"rounded-lg border border-slate-800 overflow-hidden"},[t("button",{class:"w-full flex items-center justify-between px-3 py-2 text-left hover:bg-slate-800/40 transition-colors",onClick:Q=>be.value=a(be)===d.name?null:d.name},[t("span",vl,z(d.name),1),f(k,{name:a(be)===d.name?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-3.5 h-3.5 text-slate-600"},null,8,["name"])],8,fl),a(be)===d.name?(u(),x("pre",ml,z(d.sql),1)):j("",!0)]))),128)),a(fe).indices.length>0?(u(),x(F,{key:0},[e[86]||(e[86]=t("p",{class:"text-[10px] font-semibold uppercase tracking-wider text-slate-600 pt-1"},"Indices",-1)),(u(!0),x(F,null,ue(a(fe).indices,d=>(u(),x("div",{key:d.name,class:"rounded-lg border border-slate-800 overflow-hidden"},[t("button",{class:"w-full flex items-center justify-between px-3 py-2 text-left hover:bg-slate-800/40 transition-colors",onClick:Q=>be.value=a(be)===d.name?null:d.name},[t("div",yl,[t("span",gl,z(d.name),1),t("span",bl,"on "+z(d.tbl_name),1)]),f(k,{name:a(be)===d.name?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-3.5 h-3.5 text-slate-600 shrink-0"},null,8,["name"])],8,xl),a(be)===d.name?(u(),x("pre",hl,z(d.sql),1)):j("",!0)]))),128))],64)):j("",!0)],64)):j("",!0)])):j("",!0)])]),_:1})):j("",!0)]),t("section",kl,[t("button",{class:"w-full flex items-center justify-between px-1 py-0.5",onClick:e[16]||(e[16]=d=>Re.value=!a(Re))},[e[89]||(e[89]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-slate-500"},"Diagnostics",-1)),f(k,{name:a(Re)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",class:"w-3.5 h-3.5 text-slate-600"},null,8,["name"])]),a(Re)?(u(),R(M,{key:0,ui:{root:"rounded-2xl",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:C(()=>[t("div",wl,[t("div",Sl,[e[91]||(e[91]=t("p",{class:"text-sm font-medium"},"Integrity check",-1)),e[92]||(e[92]=t("p",{class:"text-xs text-slate-500"},[_("Runs SQLite "),t("span",{class:"font-mono"},"PRAGMA integrity_check")],-1)),a(we)!==null?(u(),x("div",_l,[a(Wt)?(u(),x("p",Cl,[f(k,{name:"i-heroicons-check-circle",class:"w-3.5 h-3.5 shrink-0"}),e[90]||(e[90]=_(" ok ",-1))])):(u(),x("ul",ql,[(u(!0),x(F,null,ue(a(we),(d,Q)=>(u(),x("li",{key:Q,class:"text-xs text-red-400 font-mono break-all"},z(d),1))),128))]))])):j("",!0)]),f(I,{size:"sm",variant:"ghost",color:"neutral",loading:a(nt),disabled:!a(s).isAvailable,icon:"i-heroicons-shield-check",class:"shrink-0",onClick:Lt},null,8,["loading","disabled"])]),t("div",null,[t("button",{class:"w-full flex items-center justify-between px-4 py-3.5 text-left",onClick:Qt},[e[93]||(e[93]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"OPFS files"),t("p",{class:"text-xs text-slate-500"},"All files in the origin private file system")],-1)),t("div",Il,[a(Ve).length>0?(u(),x("span",Al,z(a(Ve).length)+" file"+z(a(Ve).length!==1?"s":""),1)):j("",!0),f(k,{name:a(Te)?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-4 h-4 text-slate-500"},null,8,["name"])])]),a(Te)?(u(),x("div",jl,[a(ot)?(u(),x("div",zl,[f(k,{name:"i-heroicons-arrow-path",class:"w-3.5 h-3.5 animate-spin"}),e[94]||(e[94]=_(" Scanning… ",-1))])):a(Ve).length===0?(u(),x("div",Vl,"No files found.")):(u(),x("ul",$l,[(u(!0),x(F,null,ue(a(Ve),d=>(u(),x("li",{key:d.path,class:"flex items-center justify-between gap-4"},[t("span",Ul,z(d.path),1),t("span",Ol,z(rt(d.size)),1)]))),128))])),t("button",{class:"mt-3 text-xs text-slate-600 hover:text-slate-400 flex items-center gap-1 transition-colors",onClick:wt},[f(k,{name:"i-heroicons-arrow-path",class:"w-3 h-3"}),e[95]||(e[95]=_(" Refresh ",-1))])])):j("",!0)]),t("div",El,[e[96]||(e[96]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Test notification"),t("p",{class:"text-xs text-slate-500"},"Fire a sample notification to verify delivery.")],-1)),f(I,{size:"sm",variant:"ghost",color:"neutral",icon:"i-heroicons-bell",disabled:a($e)!=="granted",onClick:a(as)},null,8,["disabled","onClick"])]),t("div",Ml,[t("div",Dl,[e[97]||(e[97]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Storage"),t("p",{class:"text-xs text-slate-500"},"Browser quota and current usage.")],-1)),f(I,{size:"sm",variant:"ghost",color:"neutral",icon:"i-heroicons-arrow-path",onClick:St})]),a(Ue)?(u(),x(F,{key:0},[t("div",Hl,[t("div",Bl,[t("span",null,z(rt(a(Ue).usage??0))+" used",1),t("span",null,z(rt(a(Ue).quota??0))+" quota",1)]),t("div",Tl,[t("div",{class:"h-full rounded-full bg-primary-500 transition-all",style:Is({width:`${Math.min(100,(a(Ue).usage??0)/(a(Ue).quota??1)*100).toFixed(1)}%`})},null,4)])]),t("div",Rl,[t("div",Fl,[f(k,{name:a(he)?"i-heroicons-lock-closed":"i-heroicons-lock-open",class:Z(["w-3.5 h-3.5",a(he)?"text-green-400":"text-amber-400"])},null,8,["name","class"]),t("span",{class:Z(a(he)?"text-green-400":"text-amber-400")},z(a(he)===null?"Checking…":a(he)?"Persistent storage":"Storage not persisted"),3)]),a(he)===!1?(u(),R(I,{key:0,size:"xs",variant:"soft",color:"primary",onClick:ns},{default:C(()=>[...e[98]||(e[98]=[_(" Request ",-1)])]),_:1})):j("",!0)])],64)):j("",!0)])]),_:1})):j("",!0)]),t("section",Pl,[t("button",{class:"w-full flex items-center justify-between px-1 py-0.5",onClick:e[17]||(e[17]=d=>Ze.value=!a(Ze))},[e[99]||(e[99]=t("p",{class:"text-xs font-semibold uppercase tracking-wider text-red-900/70"},"🐉 Here be dragons",-1)),f(k,{name:a(Ze)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",class:"w-3.5 h-3.5 text-red-900/50"},null,8,["name"])]),a(Ze)?(u(),R(M,{key:0,ui:{root:"rounded-2xl ring-1 ring-red-900/30",body:"p-0 sm:p-0 divide-y divide-slate-800"}},{default:C(()=>[t("div",Nl,[e[100]||(e[100]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium"},"Force reload"),t("p",{class:"text-xs text-slate-500"},"Unregister service worker, clear JS/CSS caches, and reload. OPFS data is preserved.")],-1)),f(I,{size:"sm",variant:"ghost",color:"neutral",icon:"i-heroicons-arrow-path",loading:a(dt),class:"shrink-0",onClick:Kt},null,8,["loading"])]),t("div",Ll,[e[101]||(e[101]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium text-red-400"},"Clear app data"),t("p",{class:"text-xs text-slate-500"},"Selectively delete habits, check-ins, scribbles, or voice notes.")],-1)),f(I,{icon:"i-heroicons-trash",variant:"ghost",color:"error",size:"sm",disabled:!a(s).isAvailable,onClick:e[18]||(e[18]=d=>ge.value=!0)},null,8,["disabled"])]),t("div",Wl,[e[102]||(e[102]=t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm font-medium text-red-400"},"Clear OPFS storage"),t("p",{class:"text-xs text-slate-500"},"Wipe all on-device file system storage including the database.")],-1)),f(I,{icon:"i-heroicons-fire",variant:"ghost",color:"error",size:"sm",disabled:!a(s).isAvailable,onClick:e[19]||(e[19]=d=>ze.value=!0)},null,8,["disabled"])])]),_:1})):j("",!0)]),f(_e,{open:a(v),"onUpdate:open":e[22]||(e[22]=d=>Fe(v)?v.value=d:null)},{content:C(()=>[t("div",Jl,[t("div",Gl,[e[103]||(e[103]=t("h3",{class:"font-semibold text-slate-100"},"Export data",-1)),f(I,{icon:"i-heroicons-x-mark",variant:"ghost",color:"neutral",size:"xs",onClick:e[20]||(e[20]=d=>v.value=!1)})]),t("label",Ql,[t("input",{type:"checkbox",class:"accent-primary-500",checked:a(q),indeterminate:!a(q)&&!a($),onChange:B},null,40,Kl),e[104]||(e[104]=t("span",{class:"text-sm text-slate-300 font-medium"},"Select all",-1))]),t("div",Yl,[(u(),x(F,null,ue(r,d=>t("div",{key:d.label,class:"space-y-1.5"},[t("p",Zl,z(d.label),1),t("div",Xl,[(u(!0),x(F,null,ue(d.items,Q=>(u(),x("label",{key:Q.key,class:"flex items-center gap-3 px-3.5 py-2.5 cursor-pointer hover:bg-slate-800/40 transition-colors"},[Xe(t("input",{"onUpdate:modelValue":Oe=>a(b)[Q.key]=Oe,type:"checkbox",class:"accent-primary-500 shrink-0"},null,8,en),[[et,a(b)[Q.key]]]),t("span",tn,z(Q.label),1)]))),128))])])),64))]),a(p).length>0?(u(),x("ul",sn,[(u(!0),x(F,null,ue(a(p),d=>(u(),x("li",{key:d,class:"text-xs text-red-400 flex items-center gap-1.5"},[f(k,{name:"i-heroicons-exclamation-circle",class:"w-3.5 h-3.5 shrink-0"}),_(" "+z(d),1)]))),128))])):j("",!0),t("div",an,[f(I,{variant:"ghost",color:"neutral",size:"sm",onClick:e[21]||(e[21]=d=>v.value=!1)},{default:C(()=>[...e[105]||(e[105]=[_("Cancel",-1)])]),_:1}),f(I,{size:"sm",icon:"i-heroicons-arrow-down-tray",loading:a(y),disabled:a($),onClick:T},{default:C(()=>[...e[106]||(e[106]=[_(" Download ",-1)])]),_:1},8,["loading","disabled"])])])]),_:1},8,["open"]),f(_e,{open:a(U),"onUpdate:open":e[26]||(e[26]=d=>Fe(U)?U.value=d:null)},{content:C(()=>[a(w)?(u(),x("div",ln,[t("div",nn,[t("div",on,[f(k,{name:"i-heroicons-exclamation-circle",class:"w-5 h-5 text-red-400"})]),t("div",rn,[e[107]||(e[107]=t("p",{class:"font-semibold"},"Cannot import",-1)),t("p",dn,z(a(w)),1)])]),t("div",un,[f(I,{variant:"ghost",color:"neutral",onClick:e[23]||(e[23]=d=>U.value=!1)},{default:C(()=>[...e[108]||(e[108]=[_("Close",-1)])]),_:1})])])):a(S)?(u(),x("div",cn,[t("div",pn,[t("div",fn,[f(k,{name:"i-heroicons-check-circle",class:"w-5 h-5 text-green-400"})]),e[109]||(e[109]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold"},"Import complete"),t("p",{class:"text-sm text-slate-400"},"Records merged. Reload to see all updates.")],-1))]),t("div",vn,[f(I,{onClick:e[24]||(e[24]=()=>{U.value=!1,te()})},{default:C(()=>[...e[110]||(e[110]=[_("Reload",-1)])]),_:1})])])):a(V)?(u(),x("div",mn,[t("div",xn,[t("div",yn,[f(k,{name:"i-heroicons-arrow-up-tray",class:"w-5 h-5 text-primary-400"})]),e[111]||(e[111]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold"},"Import data?"),t("p",{class:"text-sm text-slate-400"},"New records will be added; existing IDs are skipped.")],-1))]),t("div",gn,[t("p",bn," Version "+z(a(V).version)+" export from "+z(new Date(a(V).exported_at).toLocaleDateString()),1),(u(),x(F,null,ue(r,d=>(u(),x(F,{key:d.label},[(u(!0),x(F,null,ue(d.items,Q=>(u(),x(F,{key:Q.key},[(a(V)[Q.key]??[]).length>0?(u(),x("div",hn,[t("span",kn,z(Q.label),1),t("span",wn,z((a(V)[Q.key]??[]).length),1)])):j("",!0)],64))),128))],64))),64))]),t("div",Sn,[f(I,{variant:"ghost",color:"neutral",onClick:e[25]||(e[25]=d=>U.value=!1)},{default:C(()=>[...e[112]||(e[112]=[_("Cancel",-1)])]),_:1}),f(I,{loading:a(K),onClick:xe},{default:C(()=>[...e[113]||(e[113]=[_("Import",-1)])]),_:1},8,["loading"])])])):j("",!0)]),_:1},8,["open"]),f(_e,{open:a(ge),"onUpdate:open":e[28]||(e[28]=d=>Fe(ge)?ge.value=d:null)},{content:C(()=>[t("div",_n,[t("div",Cn,[t("div",qn,[f(k,{name:"i-heroicons-exclamation-triangle",class:"w-5 h-5 text-red-400"})]),e[114]||(e[114]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold"},"Clear app data?"),t("p",{class:"text-sm text-slate-400"},"Select what to delete. This cannot be undone.")],-1))]),t("div",In,[(u(),x(F,null,ue(Ge,d=>t("label",{key:d.key,class:"flex items-start gap-3 px-3.5 py-3 cursor-pointer hover:bg-slate-800/40 transition-colors"},[Xe(t("input",{"onUpdate:modelValue":Q=>a(L)[d.key]=Q,type:"checkbox",class:"mt-0.5 accent-red-500 shrink-0"},null,8,An),[[et,a(L)[d.key]]]),t("div",jn,[t("p",zn,z(d.label),1),t("p",Vn,z(d.description),1)])])),64))]),t("div",$n,[f(I,{variant:"ghost",color:"neutral",onClick:e[27]||(e[27]=d=>ge.value=!1)},{default:C(()=>[...e[115]||(e[115]=[_("Cancel",-1)])]),_:1}),f(I,{color:"error",loading:a(Ae),disabled:a(je),onClick:He},{default:C(()=>[...e[116]||(e[116]=[_(" Delete selected ",-1)])]),_:1},8,["loading","disabled"])])])]),_:1},8,["open"]),f(_e,{open:a(ze),"onUpdate:open":e[32]||(e[32]=d=>Fe(ze)?ze.value=d:null)},{content:C(()=>[a(Ie)?(u(),x("div",Un,[t("div",On,[t("div",En,[f(k,{name:"i-heroicons-check-circle",class:"w-5 h-5 text-green-400"})]),e[117]||(e[117]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold"},"All data wiped"),t("p",{class:"text-sm text-slate-400"},"Storage has been cleared. You can safely close this tab.")],-1))])])):(u(),x("div",Mn,[t("div",Dn,[t("div",Hn,[f(k,{name:"i-heroicons-fire",class:"w-5 h-5 text-red-400"})]),e[118]||(e[118]=t("div",{class:"space-y-1"},[t("p",{class:"font-semibold"},"Wipe OPFS storage?"),t("p",{class:"text-sm text-slate-400"}," Removes every file in the browser's origin private file system — including the SQLite database. Voice recordings and check-in entries will also be cleared. ")],-1))]),t("div",Bn,[f(I,{variant:"ghost",color:"neutral",onClick:e[29]||(e[29]=d=>ze.value=!1)},{default:C(()=>[...e[119]||(e[119]=[_("Cancel",-1)])]),_:1}),f(I,{color:"error",variant:"ghost",loading:a(Qe),onClick:e[30]||(e[30]=d=>ht(!1))},{default:C(()=>[...e[120]||(e[120]=[_("Wipe only",-1)])]),_:1},8,["loading"]),f(I,{color:"error",loading:a(Qe),onClick:e[31]||(e[31]=d=>ht(!0))},{default:C(()=>[...e[121]||(e[121]=[_("Wipe & reload",-1)])]),_:1},8,["loading"])])]))]),_:1},8,["open"]),f(_e,{open:a(de),"onUpdate:open":e[37]||(e[37]=d=>Fe(de)?de.value=d:null)},{content:C(()=>[t("div",Tn,[e[128]||(e[128]=t("div",null,[t("h3",{class:"text-lg font-semibold"},"Set up Health Tracking"),t("p",{class:"text-sm text-slate-400 mt-0.5"},"Choose what you'd like to track. Habits are created in your habit list.")],-1)),t("div",Rn,[t("label",Fn,[Xe(t("input",{"onUpdate:modelValue":e[33]||(e[33]=d=>a(O).enableSteps=d),type:"checkbox",class:"rounded"},null,512),[[et,a(O).enableSteps]]),e[122]||(e[122]=t("div",null,[t("p",{class:"text-sm font-medium"},"Track Steps"),t("p",{class:"text-xs text-slate-500"},"Creates a daily NUMERIC habit with your step goal.")],-1))]),a(O).enableSteps?(u(),x("div",Pn,[f(is,{label:"Daily step goal"},{default:C(()=>[f(ut,{modelValue:a(O).stepGoal,"onUpdate:modelValue":e[34]||(e[34]=d=>a(O).stepGoal=d),modelModifiers:{number:!0},type:"number",min:"1000",step:"500",class:"w-40"},null,8,["modelValue"])]),_:1})])):j("",!0)]),t("div",Nn,[t("label",Ln,[Xe(t("input",{"onUpdate:modelValue":e[35]||(e[35]=d=>a(O).enableMeals=d),type:"checkbox",class:"rounded"},null,512),[[et,a(O).enableMeals]]),e[123]||(e[123]=t("div",null,[t("p",{class:"text-sm font-medium"},"Track Meals"),t("p",{class:"text-xs text-slate-500"},"Creates LIMIT habits for calorie tracking per meal.")],-1))]),a(O).enableMeals?(u(),x("div",Wn,[(u(!0),x(F,null,ue(a(O).meals,(d,Q)=>(u(),x("div",{key:Q,class:"flex items-center gap-2"},[f(ut,{modelValue:d.name,"onUpdate:modelValue":Oe=>d.name=Oe,placeholder:"Meal name",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),f(ut,{modelValue:d.calories,"onUpdate:modelValue":Oe=>d.calories=Oe,modelModifiers:{number:!0},type:"number",min:"0",step:"50",class:"w-24"},null,8,["modelValue","onUpdate:modelValue"]),e[124]||(e[124]=t("span",{class:"text-xs text-slate-500 shrink-0"},"kcal",-1)),t("button",{class:"text-slate-700 hover:text-red-400 transition-colors shrink-0",onClick:Oe=>ye(Q)},[f(k,{name:"i-heroicons-x-mark",class:"w-4 h-4"})],8,Jn)]))),128)),t("button",{class:"text-xs text-slate-500 hover:text-slate-400 flex items-center gap-1 mt-1",onClick:G},[f(k,{name:"i-heroicons-plus",class:"w-3 h-3"}),e[125]||(e[125]=_(" Add meal ",-1))])])):j("",!0)]),t("div",Gn,[f(I,{variant:"ghost",color:"neutral",onClick:e[36]||(e[36]=d=>de.value=!1)},{default:C(()=>[...e[126]||(e[126]=[_("Skip",-1)])]),_:1}),f(I,{color:"primary",disabled:!a(O).enableSteps&&!a(O).enableMeals,loading:a(pe),onClick:De},{default:C(()=>[...e[127]||(e[127]=[_(" Create Habits ",-1)])]),_:1},8,["disabled","loading"])])])]),_:1},8,["open"])])}}});export{ti as default};
