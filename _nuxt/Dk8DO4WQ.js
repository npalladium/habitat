import{e as D,f as A,g as H,o as a,c as n,a as t,b as c,j as S,n as y,i as o,F as h,l as N,r as _,k as b,t as d,d as B,y as u,A as L}from"./D__IzthQ.js";const U={class:"space-y-5"},$={class:"flex items-center gap-2 -mb-1"},j={class:"flex gap-1 bg-slate-900 rounded-xl p-1"},z={key:0,class:"flex flex-col items-center gap-3 py-12 text-center"},V={key:1,class:"space-y-2"},q={class:"flex-1 min-w-0"},F={class:"text-sm font-medium text-slate-400 truncate"},T={class:"text-xs text-slate-600"},E={key:0,class:"flex items-center gap-2 text-xs text-slate-500 py-4"},I={key:1,class:"flex flex-col items-center gap-3 py-12 text-center"},M={key:2,class:"space-y-2"},R={class:"w-9 h-9 rounded-full bg-slate-800 flex items-center justify-center flex-shrink-0"},G={class:"flex-1 min-w-0"},J={class:"text-sm font-medium text-slate-300 truncate"},K={class:"text-xs text-slate-600"},Q=D({__name:"archive",setup(O){const x=L(),l=u("habits"),f=u([]),p=u(!0);async function g(){if(!x.isAvailable){p.value=!1;return}f.value=await x.getArchivedHabits(),p.value=!1}function k(i){return new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}const m=u([]),v=u(!1);async function w(){if(x.isAvailable){v.value=!0;try{const i=await x.getCheckinResponseDates();m.value=i.map(e=>({date:e.date,label:new Date(e.date+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),count:e.count}))}finally{v.value=!1}}}return A(l,i=>{i==="checkin"&&m.value.length===0&&w()}),H(g),(i,e)=>{const C=S,r=N;return a(),n("div",U,[t("div",$,[c(C,{icon:"i-heroicons-arrow-left",variant:"ghost",color:"neutral",size:"sm",to:"/habits"}),e[2]||(e[2]=t("span",{class:"text-sm text-slate-500"},"Habits",-1))]),e[6]||(e[6]=t("header",null,[t("h2",{class:"text-2xl font-bold"},"Archive & History")],-1)),t("div",j,[t("button",{class:y(["flex-1 py-1.5 text-sm font-medium rounded-lg transition-colors",o(l)==="habits"?"bg-slate-800 text-slate-100":"text-slate-500 hover:text-slate-400"]),onClick:e[0]||(e[0]=s=>l.value="habits")}," Habits ",2),t("button",{class:y(["flex-1 py-1.5 text-sm font-medium rounded-lg transition-colors",o(l)==="checkin"?"bg-slate-800 text-slate-100":"text-slate-500 hover:text-slate-400"]),onClick:e[1]||(e[1]=s=>l.value="checkin")}," Check-in ",2)]),o(l)==="habits"?(a(),n(h,{key:0},[!o(p)&&o(f).length===0?(a(),n("section",z,[c(r,{name:"i-heroicons-archive-box",class:"w-8 h-8 text-slate-700"}),e[3]||(e[3]=t("p",{class:"text-sm text-slate-500"},"No archived habits yet.",-1))])):(a(),n("ul",V,[(a(!0),n(h,null,_(o(f),s=>(a(),n("li",{key:s.id,class:"flex items-center gap-3 p-3 rounded-xl bg-slate-900 border border-slate-800"},[t("div",{class:"w-9 h-9 rounded-full flex-shrink-0 flex items-center justify-center opacity-60",style:b({backgroundColor:s.color+"33"})},[c(r,{name:s.icon,class:"w-5 h-5",style:b({color:s.color})},null,8,["name","style"])],4),t("div",q,[t("p",F,d(s.name),1),t("p",T," Archived "+d(s.archived_at?k(s.archived_at):""),1)])]))),128))]))],64)):(a(),n(h,{key:1},[o(v)?(a(),n("div",E,[c(r,{name:"i-heroicons-arrow-path",class:"w-3.5 h-3.5 animate-spin"}),e[4]||(e[4]=B(" Loadingâ€¦ ",-1))])):o(m).length===0?(a(),n("section",I,[c(r,{name:"i-heroicons-pencil-square",class:"w-8 h-8 text-slate-700"}),e[5]||(e[5]=t("p",{class:"text-sm text-slate-500"},"No check-in responses yet.",-1))])):(a(),n("ul",M,[(a(!0),n(h,null,_(o(m),s=>(a(),n("li",{key:s.date,class:"flex items-center gap-3 p-3 rounded-xl bg-slate-900 border border-slate-800"},[t("div",R,[c(r,{name:"i-heroicons-pencil-square",class:"w-4 h-4 text-slate-400"})]),t("div",G,[t("p",J,d(s.label),1),t("p",K,d(s.count)+" "+d(s.count===1?"response":"responses"),1)])]))),128))]))],64))])}}});export{Q as default};
