import{e as j,g as I,o as n,c as o,a as t,b as r,w as b,d as g,j as V,i as a,l as z,F as C,r as w,m as B,t as h,_ as K,p as L,s as F,I as U,n as Y,y as c,A as O}from"./5yv4BkwC.js";import{_ as H}from"./Dib1RHzq.js";const q={class:"space-y-5"},R={class:"flex items-center justify-between"},G={key:0,class:"flex items-center justify-center py-12"},J={key:1,class:"space-y-2"},P={class:"font-semibold text-slate-100"},Q={class:"text-xs text-slate-500 mt-0.5"},X={key:0,class:"flex flex-col items-center gap-3 py-12 text-center"},Z={key:2,class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center"},ee={class:"relative w-full sm:max-w-md bg-slate-900 border border-slate-800 rounded-t-3xl sm:rounded-2xl p-5 space-y-4"},te={class:"flex items-center justify-between"},se={class:"space-y-1.5"},le={class:"flex gap-1.5"},ae=["onClick"],ne={key:0,class:"space-y-1.5"},oe={class:"flex gap-1.5"},ie=["onClick"],re={class:"flex justify-end gap-2 pt-1"},fe=j({__name:"index",setup(ue){const x=O(),y=c([]),k=c(!0);async function A(){if(!x.isAvailable){k.value=!1;return}y.value=await x.getCheckinTemplates(),k.value=!1}I(A);const N=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function T(l){return l.schedule_type==="DAILY"?"Daily":l.schedule_type==="MONTHLY"?"Monthly":!l.days_active||l.days_active.length===0?"Weekly":`Weekly Â· ${l.days_active.map(e=>N[e]).join(", ")}`}const d=c(!1),v=c(!1),u=c(""),m=c("DAILY"),i=c([]),E=["Su","Mo","Tu","We","Th","Fr","Sa"];function $(l){const e=i.value.indexOf(l);e>=0?i.value.splice(e,1):(i.value.push(l),i.value.sort((f,p)=>f-p))}function M(){u.value="",m.value="DAILY",i.value=[],d.value=!0}async function D(){if(!(!x.isAvailable||!u.value.trim()||v.value)){v.value=!0;try{const l=await x.createCheckinTemplate({title:u.value.trim(),schedule_type:m.value,days_active:m.value==="WEEKLY"&&i.value.length?[...i.value]:null});y.value.push(l),d.value=!1}finally{v.value=!1}}}return(l,e)=>{const f=V,p=z,S=K,W=H;return n(),o("div",q,[t("header",R,[e[5]||(e[5]=t("h2",{class:"text-2xl font-bold"},"Check-in",-1)),r(f,{icon:"i-heroicons-plus",variant:"soft",color:"neutral",size:"sm",onClick:M},{default:b(()=>[...e[4]||(e[4]=[g(" New ",-1)])]),_:1})]),a(k)?(n(),o("div",G,[r(p,{name:"i-heroicons-arrow-path",class:"w-5 h-5 animate-spin text-slate-600"})])):(n(),o("div",J,[(n(!0),o(C,null,w(a(y),s=>(n(),B(S,{key:s.id,to:`/checkin/${s.id}`,class:"flex items-center justify-between p-4 rounded-2xl bg-slate-900 border border-slate-800 hover:border-slate-700 transition-colors"},{default:b(()=>[t("div",null,[t("p",P,h(s.title),1),t("p",Q,h(T(s)),1)]),r(p,{name:"i-heroicons-chevron-right",class:"w-4 h-4 text-slate-600 flex-shrink-0"})]),_:2},1032,["to"]))),128)),a(y).length===0?(n(),o("div",X,[r(p,{name:"i-heroicons-pencil-square",class:"w-8 h-8 text-slate-700"}),e[6]||(e[6]=t("p",{class:"text-sm text-slate-500"},"No check-ins yet. Create one to get started.",-1))])):L("",!0)])),a(d)?(n(),o("div",Z,[t("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e[0]||(e[0]=s=>d.value=!1)}),t("div",ee,[t("div",te,[e[7]||(e[7]=t("h3",{class:"font-semibold text-slate-100"},"New Check-in",-1)),r(f,{icon:"i-heroicons-x-mark",variant:"ghost",color:"neutral",size:"sm",onClick:e[1]||(e[1]=s=>d.value=!1)})]),r(W,{modelValue:a(u),"onUpdate:modelValue":e[2]||(e[2]=s=>U(u)?u.value=s:null),placeholder:"Name (e.g. Morning Check-in)",autofocus:"",onKeydown:F(D,["enter"])},null,8,["modelValue"]),t("div",se,[e[8]||(e[8]=t("p",{class:"text-xs text-slate-500"},"Schedule",-1)),t("div",le,[(n(),o(C,null,w(["DAILY","WEEKLY","MONTHLY"],s=>t("button",{key:s,class:Y(["flex-1 py-1.5 text-xs font-medium rounded-lg border transition-colors",a(m)===s?"bg-primary-500/20 border-primary-500 text-primary-300":"border-slate-700 text-slate-500 hover:border-slate-600 hover:text-slate-400"]),onClick:_=>m.value=s},h(s==="DAILY"?"Daily":s==="WEEKLY"?"Weekly":"Monthly"),11,ae)),64))])]),a(m)==="WEEKLY"?(n(),o("div",ne,[e[9]||(e[9]=t("p",{class:"text-xs text-slate-500"},"Days (leave blank for every day)",-1)),t("div",oe,[(n(),o(C,null,w(E,(s,_)=>t("button",{key:_,class:Y(["w-8 h-8 rounded-full text-xs font-medium border transition-colors",a(i).includes(_)?"bg-primary-500/20 border-primary-500 text-primary-300":"border-slate-700 text-slate-500 hover:border-slate-600"]),onClick:ce=>$(_)},h(s),11,ie)),64))])])):L("",!0),t("div",re,[r(f,{variant:"ghost",color:"neutral",size:"sm",onClick:e[3]||(e[3]=s=>d.value=!1)},{default:b(()=>[...e[10]||(e[10]=[g("Cancel",-1)])]),_:1}),r(f,{size:"sm",disabled:!a(u).trim()||a(v),loading:a(v),onClick:D},{default:b(()=>[...e[11]||(e[11]=[g(" Create ",-1)])]),_:1},8,["disabled","loading"])])])])):L("",!0)])}}});export{fe as default};
