import{e as E,g as L,o as l,c as o,a as n,b as f,w as g,d as u,j as U,F as T,r as B,n as D,i as e,t as v,k as C,l as q,p as c,m as z,T as P,_ as G,A as H,y as p,x as _}from"./IgzNwamV.js";import{_ as J}from"./DlAUqK2U.js";const K={class:"max-w-lg mx-auto space-y-6"},Q={class:"flex items-center justify-between"},W={class:"flex gap-2 flex-wrap"},X=["onClick"],Y={key:0,class:"flex gap-2 flex-wrap"},Z=["onClick"],ee={class:"flex flex-col items-center gap-5 py-4"},te={class:"ball-window"},se={key:0,class:"result-content"},le={key:1,class:"idle-question"},oe={class:"text-sm text-slate-500 text-center"},ae={key:0,class:"bg-slate-900 border border-slate-800 rounded-2xl p-5 space-y-4"},ne={class:"space-y-2"},ie={class:"text-lg font-semibold leading-snug"},re={class:"flex flex-wrap gap-2"},ue={key:1,class:"flex items-center gap-1 text-xs px-2 py-0.5 rounded-full bg-slate-800 text-slate-300"},ce={key:2,class:"text-xs px-2 py-0.5 rounded-full bg-blue-900/40 text-blue-300"},de={key:0,class:"text-sm text-slate-400"},ve={key:1,class:"flex flex-wrap gap-1.5"},me={class:"flex gap-2 pt-1"},fe={key:1,class:"text-center py-4"},ge={key:0,class:"text-slate-500 text-sm"},pe={key:1,class:"text-slate-500 text-sm"},xe=E({__name:"index",setup(ye){const x=H(),b=p([]),t=p(null),m=p(!1),k=p(!1),N=p(!1),d=p([]),h=p(null);L(async()=>{b.value=await x.getBoredCategories()});const M=[{label:"Any",value:null},{label:"< 15m",value:15},{label:"< 30m",value:30},{label:"< 1h",value:60}];function R(r){d.value.includes(r)?d.value=d.value.filter(s=>s!==r):d.value=[...d.value,r]}async function O(){m.value||(m.value=!0,N.value=!0,await new Promise(r=>setTimeout(r,650)),t.value=await x.getBoredOracle([...d.value],h.value),m.value=!1)}async function j(){if(!(!t.value||k.value)){k.value=!0;try{t.value.source==="activity"?await x.markBoredActivityDone(t.value.activity.id):await x.toggleTodo(t.value.todo.id),t.value=await x.getBoredOracle([...d.value],h.value)}finally{k.value=!1}}}const F=_(()=>t.value?t.value.source==="activity"?t.value.activity.title:t.value.todo.title:""),V=_(()=>t.value?t.value.source==="activity"?t.value.activity.description:t.value.todo.description:""),$=_(()=>{if(!t.value)return null;const r=t.value.source==="activity"?t.value.activity.estimated_minutes:t.value.todo.estimated_minutes;return r?r<60?`${r}m`:`${Math.round(r/60*10)/10}h`:null}),i=_(()=>t.value?t.value.category:null),A=_(()=>t.value?t.value.source==="activity"?t.value.activity.tags:t.value.todo.tags:[]);return(r,s)=>{const y=U,w=q,I=G;return l(),o("div",K,[n("div",Q,[s[1]||(s[1]=n("h1",{class:"text-2xl font-bold"},"I'm Bored",-1)),f(y,{to:"/bored/activities",variant:"ghost",color:"neutral",size:"sm",icon:"i-heroicons-cog-6-tooth"},{default:g(()=>[...s[0]||(s[0]=[u(" Manage ",-1)])]),_:1})]),n("div",W,[(l(),o(T,null,B(M,a=>n("button",{key:String(a.value),class:D(["px-3 py-1 rounded-full text-sm font-medium transition-colors",e(h)===a.value?"bg-primary-600 text-white":"bg-slate-800 text-slate-300 hover:bg-slate-700"]),onClick:S=>h.value=a.value},v(a.label),11,X)),64))]),e(b).length?(l(),o("div",Y,[(l(!0),o(T,null,B(e(b),a=>(l(),o("button",{key:a.id,class:D(["flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium transition-colors border",e(d).includes(a.id)?"border-slate-700 text-slate-500 bg-slate-900":"border-transparent text-white"]),style:C(e(d).includes(a.id)?{}:{backgroundColor:a.color+"33",borderColor:a.color+"88",color:a.color}),onClick:S=>R(a.id)},[f(w,{name:a.icon,class:"w-3.5 h-3.5"},null,8,["name"]),u(" "+v(a.name),1)],14,Z))),128))])):c("",!0),n("div",ee,[n("button",{class:D(["ball select-none outline-none focus-visible:ring-2 focus-visible:ring-indigo-400 focus-visible:ring-offset-4 focus-visible:ring-offset-slate-950",{"ball-shake":e(m)}]),"aria-label":"Roll the oracle",onClick:O},[s[2]||(s[2]=n("div",{class:"ball-glow"},null,-1)),s[3]||(s[3]=n("div",{class:"ball-specular"},null,-1)),s[4]||(s[4]=n("div",{class:"ball-rim"},null,-1)),n("div",te,[e(t)&&!e(m)?(l(),o("div",se,[e(i)?(l(),z(w,{key:0,name:e(i).icon,class:"w-8 h-8 shrink-0",style:C({color:e(i).color})},null,8,["name","style"])):c("",!0),e(i)?(l(),o("span",{key:1,class:"text-[10px] font-semibold tracking-wide text-center leading-tight px-1.5",style:C({color:e(i).color})},v(e(i).name),5)):c("",!0)])):(l(),o("span",le,"?"))])],2),n("p",oe,v(e(m)?"Consulting the oracleâ€¦":e(t)?"Tap to roll again":"Tap to get a suggestion"),1)]),f(P,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0"},{default:g(()=>[e(t)&&!e(m)?(l(),o("div",ae,[n("div",ne,[n("h2",ie,v(e(F)),1),n("div",re,[e(i)?(l(),o("span",{key:0,class:"flex items-center gap-1 text-xs px-2 py-0.5 rounded-full font-medium",style:C({backgroundColor:e(i).color+"22",color:e(i).color})},[f(w,{name:e(i).icon,class:"w-3 h-3"},null,8,["name"]),u(" "+v(e(i).name),1)],4)):c("",!0),e($)?(l(),o("span",ue,[f(w,{name:"i-heroicons-clock",class:"w-3 h-3"}),u(" "+v(e($)),1)])):c("",!0),e(t).source==="todo"?(l(),o("span",ce," from TODOs ")):c("",!0)])]),e(V)?(l(),o("p",de,v(e(V)),1)):c("",!0),e(A).length?(l(),o("div",ve,[(l(!0),o(T,null,B(e(A),a=>(l(),o("span",{key:a,class:"text-xs px-2 py-0.5 rounded-full bg-slate-800 text-slate-400"},v(a),1))),128))])):c("",!0),n("div",me,[f(y,{variant:"soft",color:"success",size:"sm",icon:"i-heroicons-check",loading:e(k),onClick:j},{default:g(()=>[...s[5]||(s[5]=[u(" Done ",-1)])]),_:1},8,["loading"]),f(y,{variant:"soft",color:"neutral",size:"sm",icon:"i-heroicons-arrow-path",onClick:O},{default:g(()=>[...s[6]||(s[6]=[u(" Roll again ",-1)])]),_:1}),e(t).source==="todo"?(l(),z(y,{key:0,to:"/todos",variant:"ghost",color:"neutral",size:"sm",icon:"i-heroicons-arrow-right"},{default:g(()=>[...s[7]||(s[7]=[u(" View TODO ",-1)])]),_:1})):(l(),z(y,{key:1,to:"/bored/activities",variant:"ghost",color:"neutral",size:"sm",icon:"i-heroicons-arrow-right"},{default:g(()=>[...s[8]||(s[8]=[u(" View all ",-1)])]),_:1}))])])):c("",!0)]),_:1}),e(t)===null&&!e(m)?(l(),o("div",fe,[e(N)?(l(),o("p",ge," Nothing matches your current filters. Try adjusting categories or time. ")):e(b).length===0?(l(),o("p",pe,[s[10]||(s[10]=u(" No activities yet. ",-1)),f(I,{to:"/bored/activities",class:"text-primary-400 underline"},{default:g(()=>[...s[9]||(s[9]=[u("Add some",-1)])]),_:1}),s[11]||(s[11]=u(" to get started. ",-1))])):c("",!0)])):c("",!0)])}}}),ke=J(xe,[["__scopeId","data-v-6aa3dda5"]]);export{ke as default};
